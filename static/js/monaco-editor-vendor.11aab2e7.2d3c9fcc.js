"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[277],{58314:(t,e,i)=>{i.d(e,{N:()=>n});var o=i(86837);function n(t,e){t instanceof o.Z?(t.setFontFamily(e.getMassagedFontFamily()),t.setFontWeight(e.fontWeight),t.setFontSize(e.fontSize),t.setFontFeatureSettings(e.fontFeatureSettings),t.setFontVariationSettings(e.fontVariationSettings),t.setLineHeight(e.lineHeight),t.setLetterSpacing(e.letterSpacing)):(t.style.fontFamily=e.getMassagedFontFamily(),t.style.fontWeight=e.fontWeight,t.style.fontSize=e.fontSize+"px",t.style.fontFeatureSettings=e.fontFeatureSettings,t.style.fontVariationSettings=e.fontVariationSettings,t.style.lineHeight=e.lineHeight+"px",t.style.letterSpacing=e.letterSpacing+"px")}},30545:(t,e,i)=>{i.d(e,{z:()=>y});var o=i(22512),n=i(88648),s=i(68515),r=i(59652),a=i(62922),l=i(44352),u=i(26405),c=i(95691);class h{constructor(t,e){this.key=t,this.migrate=e}apply(t){const e=h._read(t,this.key);this.migrate(e,(e=>h._read(t,e)),((e,i)=>h._write(t,e,i)))}static _read(t,e){if("undefined"===typeof t)return;const i=e.indexOf(".");if(i>=0){const o=e.substring(0,i);return this._read(t[o],e.substring(i+1))}return t[e]}static _write(t,e,i){const o=e.indexOf(".");if(o>=0){const n=e.substring(0,o);return t[n]=t[n]||{},void this._write(t[n],e.substring(o+1),i)}t[e]=i}}function d(t,e){h.items.push(new h(t,e))}function p(t,e){d(t,((i,o,n)=>{if("undefined"!==typeof i)for(const[s,r]of e)if(i===s)return void n(t,r)}))}h.items=[],p("wordWrap",[[!0,"on"],[!1,"off"]]),p("lineNumbers",[[!0,"on"],[!1,"off"]]),p("cursorBlinking",[["visible","solid"]]),p("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),p("renderLineHighlight",[[!0,"line"],[!1,"none"]]),p("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),p("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),p("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),p("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),p("autoIndent",[[!1,"advanced"],[!0,"full"]]),p("matchBrackets",[[!0,"always"],[!1,"never"]]),p("renderFinalNewline",[[!0,"on"],[!1,"off"]]),p("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),d("autoClosingBrackets",((t,e,i)=>{!1===t&&(i("autoClosingBrackets","never"),"undefined"===typeof e("autoClosingQuotes")&&i("autoClosingQuotes","never"),"undefined"===typeof e("autoSurround")&&i("autoSurround","never"))})),d("renderIndentGuides",((t,e,i)=>{"undefined"!==typeof t&&(i("renderIndentGuides",void 0),"undefined"===typeof e("guides.indentation")&&i("guides.indentation",!!t))})),d("highlightActiveIndentGuide",((t,e,i)=>{"undefined"!==typeof t&&(i("highlightActiveIndentGuide",void 0),"undefined"===typeof e("guides.highlightActiveIndentation")&&i("guides.highlightActiveIndentation",!!t))}));const m={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};d("suggest.filteredTypes",((t,e,i)=>{if(t&&"object"===typeof t){for(const o of Object.entries(m)){!1===t[o[0]]&&"undefined"===typeof e("suggest.".concat(o[1]))&&i("suggest.".concat(o[1]),!1)}i("suggest.filteredTypes",void 0)}})),d("quickSuggestions",((t,e,i)=>{if("boolean"===typeof t){const e=t?"on":"off";i("quickSuggestions",{comments:e,strings:e,other:e})}})),d("experimental.stickyScroll.enabled",((t,e,i)=>{"boolean"===typeof t&&(i("experimental.stickyScroll.enabled",void 0),"undefined"===typeof e("stickyScroll.enabled")&&i("stickyScroll.enabled",t))})),d("experimental.stickyScroll.maxLineCount",((t,e,i)=>{"number"===typeof t&&(i("experimental.stickyScroll.maxLineCount",void 0),"undefined"===typeof e("stickyScroll.maxLineCount")&&i("stickyScroll.maxLineCount",t))}));var g=i(30264),_=i(77116),f=i(21369),C=i(78196),v=i(65429),w=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},S=function(t,e){return function(i,o){e(i,o,t)}};let y=class extends r.JT{constructor(t,e,i,n){super(),this._accessibilityService=n,this._onDidChange=this._register(new s.Q5),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new s.Q5),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new _.LJ,this.isSimpleWidget=t,this._containerObserver=this._register(new u.I(i,e.dimension)),this._rawOptions=M(e),this._validatedOptions=E.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(11)&&this._containerObserver.startObserving(),this._register(f.C.onDidChangeZoomLevel((()=>this._recomputeOptions()))),this._register(g.n.onDidChangeTabFocus((()=>this._recomputeOptions()))),this._register(this._containerObserver.onDidChange((()=>this._recomputeOptions()))),this._register(c.g.onDidChange((()=>this._recomputeOptions()))),this._register(o.PixelRatio.onDidChange((()=>this._recomputeOptions()))),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized((()=>this._recomputeOptions())))}_recomputeOptions(){const t=this._computeOptions(),e=E.checkEquals(this.options,t);null!==e&&(this.options=t,this._onDidChangeFast.fire(e),this._onDidChange.fire(e))}_computeOptions(){const t=this._readEnvConfiguration(),e=C.E4.createFromValidatedSettings(this._validatedOptions,t.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(e),o={memory:this._computeOptionsMemory,outerWidth:t.outerWidth,outerHeight:t.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:t.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:t.emptySelectionClipboard,pixelRatio:t.pixelRatio,tabFocusMode:g.n.getTabFocusMode("editorFocus"),accessibilitySupport:t.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return E.computeOptions(this._validatedOptions,o)}_readEnvConfiguration(){return{extraEditorClassName:x(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:o.isWebKit||o.isFirefox,pixelRatio:o.PixelRatio.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(t){return c.g.readFontInfo(t)}getRawOptions(){return this._rawOptions}updateOptions(t){const e=M(t);E.applyUpdate(this._rawOptions,e)&&(this._validatedOptions=E.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(t){this._containerObserver.observe(t)}setIsDominatedByLongLines(t){this._isDominatedByLongLines!==t&&(this._isDominatedByLongLines=t,this._recomputeOptions())}setModelLineCount(t){const e=function(t){let e=0;for(;t;)t=Math.floor(t/10),e++;return e||1}(t);this._lineNumbersDigitCount!==e&&(this._lineNumbersDigitCount=e,this._recomputeOptions())}setViewLineCount(t){this._viewLineCount!==t&&(this._viewLineCount=t,this._recomputeOptions())}setReservedHeight(t){this._reservedHeight!==t&&(this._reservedHeight=t,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(t){this._glyphMarginDecorationLaneCount!==t&&(this._glyphMarginDecorationLaneCount=t,this._recomputeOptions())}};function x(){let t="";return o.isSafari||o.isWebkitWebView||(t+="no-user-select "),o.isSafari&&(t+="no-minimap-shadow ",t+="enable-user-select "),l.dz&&(t+="mac "),t}y=w([S(3,v.F)],y);class b{constructor(){this._values=[]}_read(t){return this._values[t]}get(t){return this._values[t]}_write(t,e){this._values[t]=e}}class T{constructor(){this._values=[]}_read(t){if(t>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[t]}get(t){return this._read(t)}_write(t,e){this._values[t]=e}}class E{static validateOptions(t){const e=new b;for(const i of _.Bc){const o="_never_"===i.name?void 0:t[i.name];e._write(i.id,i.validate(o))}return e}static computeOptions(t,e){const i=new T;for(const o of _.Bc)i._write(o.id,o.compute(e,i,t._read(o.id)));return i}static _deepEquals(t,e){if("object"!==typeof t||"object"!==typeof e||!t||!e)return t===e;if(Array.isArray(t)||Array.isArray(e))return!(!Array.isArray(t)||!Array.isArray(e))&&n.fS(t,e);if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!E._deepEquals(t[i],e[i]))return!1;return!0}static checkEquals(t,e){const i=[];let o=!1;for(const n of _.Bc){const s=!E._deepEquals(t._read(n.id),e._read(n.id));i[n.id]=s,s&&(o=!0)}return o?new _.Bb(i):null}static applyUpdate(t,e){let i=!1;for(const o of _.Bc)if(e.hasOwnProperty(o.name)){const n=o.applyUpdate(t[o.name],e[o.name]);t[o.name]=n.newValue,i=i||n.didChange}return i}}function M(t){const e=a.I8(t);return function(t){h.items.forEach((e=>e.apply(t)))}(e),e}},26405:(t,e,i)=>{i.d(e,{I:()=>s});var o=i(59652),n=i(68515);class s extends o.JT{constructor(t,e){super(),this._onDidChange=this._register(new n.Q5),this.onDidChange=this._onDidChange.event,this._referenceDomElement=t,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,e)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver((t=>{t&&t[0]&&t[0].contentRect?this.observe({width:t[0].contentRect.width,height:t[0].contentRect.height}):this.observe()})),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(t){this.measureReferenceDomElement(!0,t)}measureReferenceDomElement(t,e){let i=0,o=0;e?(i=e.width,o=e.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,o=this._referenceDomElement.clientHeight),i=Math.max(5,i),o=Math.max(5,o),this._width===i&&this._height===o||(this._width=i,this._height=o,t&&this._onDidChange.fire())}}},95691:(t,e,i)=>{i.d(e,{g:()=>p});var o=i(22512),n=i(68515),s=i(59652),r=i(58314);class a{constructor(t,e){this.chr=t,this.type=e,this.width=0}fulfill(t){this.width=t}}class l{constructor(t,e){this._bareFontInfo=t,this._requests=e,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const e=document.createElement("div");(0,r.N)(e,this._bareFontInfo),t.appendChild(e);const i=document.createElement("div");(0,r.N)(i,this._bareFontInfo),i.style.fontWeight="bold",t.appendChild(i);const o=document.createElement("div");(0,r.N)(o,this._bareFontInfo),o.style.fontStyle="italic",t.appendChild(o);const n=[];for(const s of this._requests){let t;0===s.type&&(t=e),2===s.type&&(t=i),1===s.type&&(t=o),t.appendChild(document.createElement("br"));const r=document.createElement("span");l._render(r,s),t.appendChild(r),n.push(r)}this._container=t,this._testElements=n}static _render(t,e){if(" "===e.chr){let e="\xa0";for(let t=0;t<8;t++)e+=e;t.innerText=e}else{let i=e.chr;for(let t=0;t<8;t++)i+=i;t.textContent=i}}_readFromDomElements(){for(let t=0,e=this._requests.length;t<e;t++){const e=this._requests[t],i=this._testElements[t];e.fulfill(i.offsetWidth/256)}}}var u=i(77116),c=i(78196);class h extends s.JT{constructor(){super(),this._onDidChange=this._register(new n.Q5),this.onDidChange=this._onDidChange.event,this._cache=new d,this._evictUntrustedReadingsTimeout=-1}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new d,this._onDidChange.fire()}_writeToCache(t,e){this._cache.put(t,e),e.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=window.setTimeout((()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()}),5e3))}_evictUntrustedReadings(){const t=this._cache.getValues();let e=!1;for(const i of t)i.isTrusted||(e=!0,this._cache.remove(i));e&&this._onDidChange.fire()}readFontInfo(t){if(!this._cache.has(t)){let e=this._actualReadFontInfo(t);(e.typicalHalfwidthCharacterWidth<=2||e.typicalFullwidthCharacterWidth<=2||e.spaceWidth<=2||e.maxDigitWidth<=2)&&(e=new c.pR({pixelRatio:o.PixelRatio.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:e.isMonospace,typicalHalfwidthCharacterWidth:Math.max(e.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(e.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:e.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(e.spaceWidth,5),middotWidth:Math.max(e.middotWidth,5),wsmiddotWidth:Math.max(e.wsmiddotWidth,5),maxDigitWidth:Math.max(e.maxDigitWidth,5)},!1)),this._writeToCache(t,e)}return this._cache.get(t)}_createRequest(t,e,i,o){const n=new a(t,e);return i.push(n),null===o||void 0===o||o.push(n),n}_actualReadFontInfo(t){const e=[],i=[],n=this._createRequest("n",0,e,i),s=this._createRequest("\uff4d",0,e,null),r=this._createRequest(" ",0,e,i),a=this._createRequest("0",0,e,i),h=this._createRequest("1",0,e,i),d=this._createRequest("2",0,e,i),p=this._createRequest("3",0,e,i),m=this._createRequest("4",0,e,i),g=this._createRequest("5",0,e,i),_=this._createRequest("6",0,e,i),f=this._createRequest("7",0,e,i),C=this._createRequest("8",0,e,i),v=this._createRequest("9",0,e,i),w=this._createRequest("\u2192",0,e,i),S=this._createRequest("\uffeb",0,e,null),y=this._createRequest("\xb7",0,e,i),x=this._createRequest(String.fromCharCode(11825),0,e,null),b="|/-_ilm%";for(let o=0,l=8;o<l;o++)this._createRequest(b.charAt(o),0,e,i),this._createRequest(b.charAt(o),1,e,i),this._createRequest(b.charAt(o),2,e,i);!function(t,e){new l(t,e).read()}(t,e);const T=Math.max(a.width,h.width,d.width,p.width,m.width,g.width,_.width,f.width,C.width,v.width);let E=t.fontFeatureSettings===u.n0.OFF;const M=i[0].width;for(let o=1,l=i.length;E&&o<l;o++){const t=M-i[o].width;if(t<-.001||t>.001){E=!1;break}}let A=!0;return E&&S.width!==M&&(A=!1),S.width>w.width&&(A=!1),new c.pR({pixelRatio:o.PixelRatio.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:E,typicalHalfwidthCharacterWidth:n.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:A,spaceWidth:r.width,middotWidth:y.width,wsmiddotWidth:x.width,maxDigitWidth:T},!0)}}class d{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(t){const e=t.getId();return!!this._values[e]}get(t){const e=t.getId();return this._values[e]}put(t,e){const i=t.getId();this._keys[i]=t,this._values[i]=e}remove(t){const e=t.getId();delete this._keys[e],delete this._values[e]}getValues(){return Object.keys(this._keys).map((t=>this._values[t]))}}const p=new h},30264:(t,e,i)=>{i.d(e,{n:()=>n});var o=i(68515);const n=new class{constructor(){this._tabFocusTerminal=!1,this._tabFocusEditor=!1,this._onDidChangeTabFocus=new o.Q5,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(t){return"terminalFocus"===t?this._tabFocusTerminal:this._tabFocusEditor}setTabFocusMode(t,e){"terminalFocus"===e?this._tabFocusTerminal=t:this._tabFocusEditor=t,this._onDidChangeTabFocus.fire()}}},77858:(t,e,i)=>{i.d(e,{Iq:()=>f,ZP:()=>g,rp:()=>y,sB:()=>m});var o,n=i(19550),s=i(27113),r=i(62849),a=i(99924),l=i(55597),u=i(20596),c=i(20494),h=i(20648);class d{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.hitTarget=t,this.type=0}}class p{constructor(t,e,i){this.position=t,this.spanNode=e,this.injectedText=i,this.type=1}}!function(t){t.createFromDOMInfo=function(t,e,i){const o=t.getPositionFromDOMInfo(e,i);return o?new p(o,e,null):new d(e)}}(o||(o={}));class m{constructor(t,e){this.lastViewCursorsRenderData=t,this.lastTextareaPosition=e}}class g{static _deduceRage(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!e&&t?new l.e(t.lineNumber,t.column,t.lineNumber,t.column):null!==e&&void 0!==e?e:null}static createUnknown(t,e,i){return{type:0,element:t,mouseColumn:e,position:i,range:this._deduceRage(i)}}static createTextarea(t,e){return{type:1,element:t,mouseColumn:e,position:null,range:null}}static createMargin(t,e,i,o,n,s){return{type:t,element:e,mouseColumn:i,position:o,range:n,detail:s}}static createViewZone(t,e,i,o,n){return{type:t,element:e,mouseColumn:i,position:o,range:this._deduceRage(o),detail:n}}static createContentText(t,e,i,o,n){return{type:6,element:t,mouseColumn:e,position:i,range:this._deduceRage(i,o),detail:n}}static createContentEmpty(t,e,i,o){return{type:7,element:t,mouseColumn:e,position:i,range:this._deduceRage(i),detail:o}}static createContentWidget(t,e,i){return{type:9,element:t,mouseColumn:e,position:null,range:null,detail:i}}static createScrollbar(t,e,i){return{type:11,element:t,mouseColumn:e,position:i,range:this._deduceRage(i)}}static createOverlayWidget(t,e,i){return{type:12,element:t,mouseColumn:e,position:null,range:null,detail:i}}static createOutsideEditor(t,e,i,o){return{type:13,element:null,mouseColumn:t,position:e,range:this._deduceRage(e),outsidePosition:i,outsideDistance:o}}static _typeToString(t){return 1===t?"TEXTAREA":2===t?"GUTTER_GLYPH_MARGIN":3===t?"GUTTER_LINE_NUMBERS":4===t?"GUTTER_LINE_DECORATIONS":5===t?"GUTTER_VIEW_ZONE":6===t?"CONTENT_TEXT":7===t?"CONTENT_EMPTY":8===t?"CONTENT_VIEW_ZONE":9===t?"CONTENT_WIDGET":10===t?"OVERVIEW_RULER":11===t?"SCROLLBAR":12===t?"OVERLAY_WIDGET":"UNKNOWN"}static toString(t){return this._typeToString(t.type)+": "+t.position+" - "+t.range+" - "+JSON.stringify(t.detail)}}class _{static isTextArea(t){return 2===t.length&&3===t[0]&&6===t[1]}static isChildOfViewLines(t){return t.length>=4&&3===t[0]&&7===t[3]}static isStrictChildOfViewLines(t){return t.length>4&&3===t[0]&&7===t[3]}static isChildOfScrollableElement(t){return t.length>=2&&3===t[0]&&5===t[1]}static isChildOfMinimap(t){return t.length>=2&&3===t[0]&&8===t[1]}static isChildOfContentWidgets(t){return t.length>=4&&3===t[0]&&1===t[3]}static isChildOfOverflowingContentWidgets(t){return t.length>=1&&2===t[0]}static isChildOfOverlayWidgets(t){return t.length>=2&&3===t[0]&&4===t[1]}}class f{constructor(t,e,i){this.viewModel=t.viewModel;const o=t.configuration.options;this.layoutInfo=o.get(140),this.viewDomNode=e.viewDomNode,this.lineHeight=o.get(64),this.stickyTabStops=o.get(112),this.typicalHalfwidthCharacterWidth=o.get(48).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=t,this._viewHelper=e}getZoneAtCoord(t){return f.getZoneAtCoord(this._context,t)}static getZoneAtCoord(t,e){const i=t.viewLayout.getWhitespaceAtVerticalOffset(e);if(i){const o=i.verticalOffset+i.height/2,n=t.viewModel.getLineCount();let s,r=null,l=null;return i.afterLineNumber!==n&&(l=new a.L(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new a.L(i.afterLineNumber,t.viewModel.getLineMaxColumn(i.afterLineNumber))),s=null===l?r:null===r?l:e<o?r:l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:s}}return null}getFullLineRangeAtCoord(t){if(this._context.viewLayout.isAfterLines(t)){const t=this._context.viewModel.getLineCount(),e=this._context.viewModel.getLineMaxColumn(t);return{range:new l.e(t,e,t,e),isAfterLines:!0}}const e=this._context.viewLayout.getLineNumberAtVerticalOffset(t),i=this._context.viewModel.getLineMaxColumn(e);return{range:new l.e(e,1,e,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(t){return this._context.viewLayout.getLineNumberAtVerticalOffset(t)}isAfterLines(t){return this._context.viewLayout.isAfterLines(t)}isInTopPadding(t){return this._context.viewLayout.isInTopPadding(t)}isInBottomPadding(t){return this._context.viewLayout.isInBottomPadding(t)}getVerticalOffsetForLineNumber(t){return this._context.viewLayout.getVerticalOffsetForLineNumber(t)}findAttribute(t,e){return f._findAttribute(t,e,this._viewHelper.viewDomNode)}static _findAttribute(t,e,i){for(;t&&t!==document.body;){if(t.hasAttribute&&t.hasAttribute(e))return t.getAttribute(e);if(t===i)return null;t=t.parentNode}return null}getLineWidth(t){return this._viewHelper.getLineWidth(t)}visibleRangeForPosition(t,e){return this._viewHelper.visibleRangeForPosition(t,e)}getPositionFromDOMInfo(t,e){return this._viewHelper.getPositionFromDOMInfo(t,e)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class C{constructor(t,e,i,o){this.editorPos=e,this.pos=i,this.relativePos=o,this.mouseVerticalOffset=Math.max(0,t.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=t.getCurrentScrollLeft()+this.relativePos.x-t.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<t.layoutInfo.contentLeft&&this.relativePos.x>=t.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,y._getMouseColumn(this.mouseContentHorizontalOffset,t.typicalHalfwidthCharacterWidth))}}class v extends C{constructor(t,e,i,o,n){super(t,e,i,o),this._ctx=t,n?(this.target=n,this.targetPath=s.K.collect(n,t.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return"pos(".concat(this.pos.x,",").concat(this.pos.y,"), editorPos(").concat(this.editorPos.x,",").concat(this.editorPos.y,"), relativePos(").concat(this.relativePos.x,",").concat(this.relativePos.y,"), mouseVerticalOffset: ").concat(this.mouseVerticalOffset,", mouseContentHorizontalOffset: ").concat(this.mouseContentHorizontalOffset,"\n\ttarget: ").concat(this.target?this.target.outerHTML:null)}_getMouseColumn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t&&t.column<this._ctx.viewModel.getLineMaxColumn(t.lineNumber)?u.i.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(t.lineNumber),t.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return g.createUnknown(this.target,this._getMouseColumn(t),t)}fulfillTextarea(){return g.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(t,e,i,o){return g.createMargin(t,this.target,this._getMouseColumn(e),e,i,o)}fulfillViewZone(t,e,i){return g.createViewZone(t,this.target,this._getMouseColumn(e),e,i)}fulfillContentText(t,e,i){return g.createContentText(this.target,this._getMouseColumn(t),t,e,i)}fulfillContentEmpty(t,e){return g.createContentEmpty(this.target,this._getMouseColumn(t),t,e)}fulfillContentWidget(t){return g.createContentWidget(this.target,this._getMouseColumn(),t)}fulfillScrollbar(t){return g.createScrollbar(this.target,this._getMouseColumn(t),t)}fulfillOverlayWidget(t){return g.createOverlayWidget(this.target,this._getMouseColumn(),t)}withTarget(t){return new v(this._ctx,this.editorPos,this.pos,this.relativePos,t)}}const w={isAfterLines:!0};function S(t){return{isAfterLines:!1,horizontalDistanceToText:t}}class y{constructor(t,e){this._context=t,this._viewHelper=e}mouseTargetIsWidget(t){const e=t.target,i=s.K.collect(e,this._viewHelper.viewDomNode);return!(!_.isChildOfContentWidgets(i)&&!_.isChildOfOverflowingContentWidgets(i))||!!_.isChildOfOverlayWidgets(i)}createMouseTarget(t,e,i,o,n){const s=new f(this._context,this._viewHelper,t),r=new v(s,e,i,o,n);try{const t=y._createMouseTarget(s,r,!1);if(6===t.type&&s.stickyTabStops&&null!==t.position){const e=y._snapToSoftTabBoundary(t.position,s.viewModel),i=l.e.fromPositions(e,e).plusRange(t.range);return r.fulfillContentText(e,i,t.detail)}return t}catch(a){return r.fulfillUnknown()}}static _createMouseTarget(t,e,i){if(null===e.target){if(i)return e.fulfillUnknown();const o=y._doHitTest(t,e);return 1===o.type?y.createMouseTargetFromHitTestPosition(t,e,o.spanNode,o.position,o.injectedText):this._createMouseTarget(t,e.withTarget(o.hitTarget),!0)}const o=e;let n=null;return n=n||y._hitTestContentWidget(t,o),n=n||y._hitTestOverlayWidget(t,o),n=n||y._hitTestMinimap(t,o),n=n||y._hitTestScrollbarSlider(t,o),n=n||y._hitTestViewZone(t,o),n=n||y._hitTestMargin(t,o),n=n||y._hitTestViewCursor(t,o),n=n||y._hitTestTextArea(t,o),n=n||y._hitTestViewLines(t,o,i),n=n||y._hitTestScrollbar(t,o),n||e.fulfillUnknown()}static _hitTestContentWidget(t,e){if(_.isChildOfContentWidgets(e.targetPath)||_.isChildOfOverflowingContentWidgets(e.targetPath)){const i=t.findAttribute(e.target,"widgetId");return i?e.fulfillContentWidget(i):e.fulfillUnknown()}return null}static _hitTestOverlayWidget(t,e){if(_.isChildOfOverlayWidgets(e.targetPath)){const i=t.findAttribute(e.target,"widgetId");return i?e.fulfillOverlayWidget(i):e.fulfillUnknown()}return null}static _hitTestViewCursor(t,e){if(e.target){const i=t.lastRenderData.lastViewCursorsRenderData;for(const t of i)if(e.target===t.domNode)return e.fulfillContentText(t.position,null,{mightBeForeignElement:!1,injectedText:null})}if(e.isInContentArea){const i=t.lastRenderData.lastViewCursorsRenderData,o=e.mouseContentHorizontalOffset,n=e.mouseVerticalOffset;for(const s of i){if(o<s.contentLeft)continue;if(o>s.contentLeft+s.width)continue;const i=t.getVerticalOffsetForLineNumber(s.position.lineNumber);if(i<=n&&n<=i+s.height)return e.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(t,e){const i=t.getZoneAtCoord(e.mouseVerticalOffset);if(i){const t=e.isInContentArea?8:5;return e.fulfillViewZone(t,i.position,i)}return null}static _hitTestTextArea(t,e){return _.isTextArea(e.targetPath)?t.lastRenderData.lastTextareaPosition?e.fulfillContentText(t.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):e.fulfillTextarea():null}static _hitTestMargin(t,e){if(e.isInMarginArea){const i=t.getFullLineRangeAtCoord(e.mouseVerticalOffset),o=i.range.getStartPosition();let n=Math.abs(e.relativePos.x);const s={isAfterLines:i.isAfterLines,glyphMarginLeft:t.layoutInfo.glyphMarginLeft,glyphMarginWidth:t.layoutInfo.glyphMarginWidth,lineNumbersWidth:t.layoutInfo.lineNumbersWidth,offsetX:n};return n-=t.layoutInfo.glyphMarginLeft,n<=t.layoutInfo.glyphMarginWidth?e.fulfillMargin(2,o,i.range,s):(n-=t.layoutInfo.glyphMarginWidth,n<=t.layoutInfo.lineNumbersWidth?e.fulfillMargin(3,o,i.range,s):(n-=t.layoutInfo.lineNumbersWidth,e.fulfillMargin(4,o,i.range,s)))}return null}static _hitTestViewLines(t,e,i){if(!_.isChildOfViewLines(e.targetPath))return null;if(t.isInTopPadding(e.mouseVerticalOffset))return e.fulfillContentEmpty(new a.L(1,1),w);if(t.isAfterLines(e.mouseVerticalOffset)||t.isInBottomPadding(e.mouseVerticalOffset)){const i=t.viewModel.getLineCount(),o=t.viewModel.getLineMaxColumn(i);return e.fulfillContentEmpty(new a.L(i,o),w)}if(i){if(_.isStrictChildOfViewLines(e.targetPath)){const i=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset);if(0===t.viewModel.getLineLength(i)){const o=t.getLineWidth(i),n=S(e.mouseContentHorizontalOffset-o);return e.fulfillContentEmpty(new a.L(i,1),n)}const o=t.getLineWidth(i);if(e.mouseContentHorizontalOffset>=o){const n=S(e.mouseContentHorizontalOffset-o),s=new a.L(i,t.viewModel.getLineMaxColumn(i));return e.fulfillContentEmpty(s,n)}}return e.fulfillUnknown()}const o=y._doHitTest(t,e);return 1===o.type?y.createMouseTargetFromHitTestPosition(t,e,o.spanNode,o.position,o.injectedText):this._createMouseTarget(t,e.withTarget(o.hitTarget),!0)}static _hitTestMinimap(t,e){if(_.isChildOfMinimap(e.targetPath)){const i=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),o=t.viewModel.getLineMaxColumn(i);return e.fulfillScrollbar(new a.L(i,o))}return null}static _hitTestScrollbarSlider(t,e){if(_.isChildOfScrollableElement(e.targetPath)&&e.target&&1===e.target.nodeType){const i=e.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const i=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),o=t.viewModel.getLineMaxColumn(i);return e.fulfillScrollbar(new a.L(i,o))}}return null}static _hitTestScrollbar(t,e){if(_.isChildOfScrollableElement(e.targetPath)){const i=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),o=t.viewModel.getLineMaxColumn(i);return e.fulfillScrollbar(new a.L(i,o))}return null}getMouseColumn(t){const e=this._context.configuration.options,i=e.get(140),o=this._context.viewLayout.getCurrentScrollLeft()+t.x-i.contentLeft;return y._getMouseColumn(o,e.get(48).typicalHalfwidthCharacterWidth)}static _getMouseColumn(t,e){if(t<0)return 1;return Math.round(t/e)+1}static createMouseTargetFromHitTestPosition(t,e,i,o,n){const s=o.lineNumber,r=o.column,u=t.getLineWidth(s);if(e.mouseContentHorizontalOffset>u){const t=S(e.mouseContentHorizontalOffset-u);return e.fulfillContentEmpty(o,t)}const c=t.visibleRangeForPosition(s,r);if(!c)return e.fulfillUnknown(o);const h=c.left;if(Math.abs(e.mouseContentHorizontalOffset-h)<1)return e.fulfillContentText(o,null,{mightBeForeignElement:!!n,injectedText:n});const d=[];if(d.push({offset:c.left,column:r}),r>1){const e=t.visibleRangeForPosition(s,r-1);e&&d.push({offset:e.left,column:r-1})}if(r<t.viewModel.getLineMaxColumn(s)){const e=t.visibleRangeForPosition(s,r+1);e&&d.push({offset:e.left,column:r+1})}d.sort(((t,e)=>t.offset-e.offset));const p=e.pos.toClientCoordinates(),m=i.getBoundingClientRect(),g=m.left<=p.clientX&&p.clientX<=m.right;let _=null;for(let f=1;f<d.length;f++){const t=d[f-1],i=d[f];if(t.offset<=e.mouseContentHorizontalOffset&&e.mouseContentHorizontalOffset<=i.offset){_=new l.e(s,t.column,s,i.column);o=Math.abs(t.offset-e.mouseContentHorizontalOffset)<Math.abs(i.offset-e.mouseContentHorizontalOffset)?new a.L(s,t.column):new a.L(s,i.column);break}}return e.fulfillContentText(o,_,{mightBeForeignElement:!g||!!n,injectedText:n})}static _doHitTestWithCaretRangeFromPoint(t,e){const i=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),o=t.getVerticalOffsetForLineNumber(i),s=o+t.lineHeight;if(!(i===t.viewModel.getLineCount()&&e.mouseVerticalOffset>s)){const i=Math.floor((o+s)/2);let r=e.pos.y+(i-e.mouseVerticalOffset);r<=e.editorPos.y&&(r=e.editorPos.y+1),r>=e.editorPos.y+e.editorPos.height&&(r=e.editorPos.y+e.editorPos.height-1);const a=new n.YN(e.pos.x,r),l=this._actualDoHitTestWithCaretRangeFromPoint(t,a.toClientCoordinates());if(1===l.type)return l}return this._actualDoHitTestWithCaretRangeFromPoint(t,e.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(t,e){const i=c.Ay(t.viewDomNode);let n;if(n=i?"undefined"===typeof i.caretRangeFromPoint?function(t,e,i){const o=document.createRange();let n=t.elementFromPoint(e,i);if(null!==n){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const t=n.getBoundingClientRect(),i=window.getComputedStyle(n,null).getPropertyValue("font-style"),s=window.getComputedStyle(n,null).getPropertyValue("font-variant"),r=window.getComputedStyle(n,null).getPropertyValue("font-weight"),a=window.getComputedStyle(n,null).getPropertyValue("font-size"),l=window.getComputedStyle(n,null).getPropertyValue("line-height"),u=window.getComputedStyle(n,null).getPropertyValue("font-family"),c="".concat(i," ").concat(s," ").concat(r," ").concat(a,"/").concat(l," ").concat(u),h=n.innerText;let d,p=t.left,m=0;if(e>t.left+t.width)m=h.length;else{const t=x.getInstance();for(let i=0;i<h.length+1;i++){if(d=t.getCharWidth(h.charAt(i),c)/2,p+=d,e<p){m=i;break}p+=d}}o.setStart(n.firstChild,m),o.setEnd(n.firstChild,m)}return o}(i,e.clientX,e.clientY):i.caretRangeFromPoint(e.clientX,e.clientY):document.caretRangeFromPoint(e.clientX,e.clientY),!n||!n.startContainer)return new d;const s=n.startContainer;if(s.nodeType===s.TEXT_NODE){const e=s.parentNode,i=e?e.parentNode:null,a=i?i.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===r.N.CLASS_NAME?o.createFromDOMInfo(t,e,n.startOffset):new d(s.parentNode)}if(s.nodeType===s.ELEMENT_NODE){const e=s.parentNode,i=e?e.parentNode:null;return(i&&i.nodeType===i.ELEMENT_NODE?i.className:null)===r.N.CLASS_NAME?o.createFromDOMInfo(t,s,s.textContent.length):new d(s)}return new d}static _doHitTestWithCaretPositionFromPoint(t,e){const i=document.caretPositionFromPoint(e.clientX,e.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const e=i.offsetNode.parentNode,n=e?e.parentNode:null,s=n?n.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===r.N.CLASS_NAME?o.createFromDOMInfo(t,i.offsetNode.parentNode,i.offset):new d(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const e=i.offsetNode.parentNode,n=e&&e.nodeType===e.ELEMENT_NODE?e.className:null,s=e?e.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(n===r.N.CLASS_NAME){const e=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(e)return o.createFromDOMInfo(t,e,0)}else if(a===r.N.CLASS_NAME)return o.createFromDOMInfo(t,i.offsetNode,0)}return new d(i.offsetNode)}static _snapToSoftTabBoundary(t,e){const i=e.getLineContent(t.lineNumber),{tabSize:o}=e.model.getOptions(),n=h.l.atomicPosition(i,t.column-1,o,2);return-1!==n?new a.L(t.lineNumber,n+1):t}static _doHitTest(t,e){let i=new d;if("function"===typeof document.caretRangeFromPoint?i=this._doHitTestWithCaretRangeFromPoint(t,e):document.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(t,e.pos.toClientCoordinates())),1===i.type){const e=t.viewModel.getInjectedTextAt(i.position),o=t.viewModel.normalizePosition(i.position,2);!e&&o.equals(i.position)||(i=new p(o,i.spanNode,e))}return i}}class x{static getInstance(){return x._INSTANCE||(x._INSTANCE=new x),x._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(t,e){const i=t+e;if(this._cache[i])return this._cache[i];const o=this._canvas.getContext("2d");o.font=e;const n=o.measureText(t).width;return this._cache[i]=n,n}}x._INSTANCE=null},93629:(t,e,i)=>{i.d(e,{a:()=>b});var o=i(20494),n=i(44352),s=i(25776),r=i(59652),a=i(78884),l=i(77858),u=i(19550),c=i(21369),h=i(99924),d=i(80253),p=i(80629),m=i(59844);class g extends p.O{constructor(t,e,i){super(),this._mouseLeaveMonitor=null,this._context=t,this.viewController=e,this.viewHelper=i,this.mouseTargetFactory=new l.rp(this._context,i),this._mouseDownOperation=this._register(new _(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,((t,e)=>this._createMouseTarget(t,e)),(t=>this._getMouseColumn(t)))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(140).height;const n=new u.N5(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,(t=>this._onContextMenu(t,!0)))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,(t=>{this._onMouseMove(t),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=o.nm(document,"mousemove",(t=>{this.viewHelper.viewDomNode.contains(t.target)||this._onMouseLeave(new u.gy(t,!1,this.viewHelper.viewDomNode))})))}))),this._register(n.onMouseUp(this.viewHelper.viewDomNode,(t=>this._onMouseUp(t)))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,(t=>this._onMouseLeave(t))));let s=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,((t,e)=>{s=e}))),this._register(o.nm(this.viewHelper.viewDomNode,o.tw.POINTER_UP,(t=>{this._mouseDownOperation.onPointerUp()}))),this._register(n.onMouseDown(this.viewHelper.viewDomNode,(t=>this._onMouseDown(t,s)))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const t=m.Io.INSTANCE;let e=0,i=c.C.getZoomLevel(),s=!1,r=0;function l(t){return n.dz?(t.metaKey||t.ctrlKey)&&!t.shiftKey&&!t.altKey:t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey}this._register(o.nm(this.viewHelper.viewDomNode,o.tw.MOUSE_WHEEL,(o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(73))return;const n=new a.q(o);if(t.acceptStandardWheelEvent(n),t.isPhysicalMouseWheel()){if(l(o)){const t=c.C.getZoomLevel(),e=n.deltaY>0?1:-1;c.C.setZoomLevel(t+e),n.preventDefault(),n.stopPropagation()}}else Date.now()-e>50&&(i=c.C.getZoomLevel(),s=l(o),r=0),e=Date.now(),r+=n.deltaY,s&&(c.C.setZoomLevel(i+r/5),n.preventDefault(),n.stopPropagation())}),{capture:!0,passive:!1}))}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(t){if(t.hasChanged(140)){const t=this._context.configuration.options.get(140).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(t){return this._mouseDownOperation.onCursorStateChanged(t),!1}onFocusChanged(t){return!1}getTargetAtClientPoint(t,e){const i=new u.rU(t,e).toPageCoordinates(),o=(0,u.kG)(this.viewHelper.viewDomNode);if(i.y<o.y||i.y>o.y+o.height||i.x<o.x||i.x>o.x+o.width)return null;const n=(0,u.Pp)(this.viewHelper.viewDomNode,o,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,i,n,null)}_createMouseTarget(t,e){let i=t.target;if(!this.viewHelper.viewDomNode.contains(i)){const e=o.Ay(this.viewHelper.viewDomNode);e&&(i=e.elementsFromPoint(t.posx,t.posy).find((t=>this.viewHelper.viewDomNode.contains(t))))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),t.editorPos,t.pos,t.relativePos,e?i:null)}_getMouseColumn(t){return this.mouseTargetFactory.getMouseColumn(t.relativePos)}_onContextMenu(t,e){this.viewController.emitContextMenu({event:t,target:this._createMouseTarget(t,e)})}_onMouseMove(t){if(this.mouseTargetFactory.mouseTargetIsWidget(t)||t.preventDefault(),this._mouseDownOperation.isActive())return;t.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:t,target:this._createMouseTarget(t,!0)})}_onMouseLeave(t){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:t,target:null})}_onMouseUp(t){this.viewController.emitMouseUp({event:t,target:this._createMouseTarget(t,!0)})}_onMouseDown(t,e){const i=this._createMouseTarget(t,!0),o=6===i.type||7===i.type,s=2===i.type||3===i.type||4===i.type,r=3===i.type,a=this._context.configuration.options.get(105),l=8===i.type||5===i.type,u=9===i.type;let c=t.leftButton||t.middleButton;n.dz&&t.leftButton&&t.ctrlKey&&(c=!1);const h=()=>{t.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(o||r&&a))h(),this._mouseDownOperation.start(i.type,t,e);else if(s)t.preventDefault();else if(l){const o=i.detail;c&&this.viewHelper.shouldSuppressMouseDownOnViewZone(o.viewZoneId)&&(h(),this._mouseDownOperation.start(i.type,t,e),t.preventDefault())}else u&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(h(),t.preventDefault());this.viewController.emitMouseDown({event:t,target:i})}}class _ extends r.JT{constructor(t,e,i,o,n,s){super(),this._context=t,this._viewController=e,this._viewHelper=i,this._mouseTargetFactory=o,this._createMouseTarget=n,this._getMouseColumn=s,this._mouseMoveMonitor=this._register(new u.AL(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new f(this._context,this._viewHelper,this._mouseTargetFactory,((t,e,i)=>this._dispatchMouse(t,e,i)))),this._mouseState=new v,this._currentSelection=new d.Y(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t);const e=this._findMousePosition(t,!1);e&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:t,target:e}):13!==e.type||"above"!==e.outsidePosition&&"below"!==e.outsidePosition?(this._topBottomDragScrolling.stop(),this._dispatchMouse(e,!0,1)):this._topBottomDragScrolling.start(e,t))}start(t,e,i){this._lastMouseEvent=e,this._mouseState.setStartedOnLineNumbers(3===t),this._mouseState.setStartButtons(e),this._mouseState.setModifiers(e);const o=this._findMousePosition(e,!0);if(!o||!o.position)return;this._mouseState.trySetCount(e.detail,o.position),e.detail=this._mouseState.count;const n=this._context.configuration.options;if(!n.get(88)&&n.get(33)&&!n.get(20)&&!this._mouseState.altKey&&e.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===o.type&&o.position&&this._currentSelection.containsPosition(o.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,e.buttons,(t=>this._onMouseDownThenMove(t)),(t=>{const e=this._findMousePosition(this._lastMouseEvent,!1);t&&t instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:e?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(o,e.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,e.buttons,(t=>this._onMouseDownThenMove(t)),(()=>this._stop())))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(t){this._currentSelection=t.selections[0]}_getPositionOutsideEditor(t){const e=t.editorPos,i=this._context.viewModel,o=this._context.viewLayout,n=this._getMouseColumn(t);if(t.posy<e.y){const i=e.y-t.posy,s=Math.max(o.getCurrentScrollTop()-i,0),r=l.Iq.getZoneAtCoord(this._context,s);if(r){const t=this._helpPositionJumpOverViewZone(r);if(t)return l.ZP.createOutsideEditor(n,t,"above",i)}const a=o.getLineNumberAtVerticalOffset(s);return l.ZP.createOutsideEditor(n,new h.L(a,1),"above",i)}if(t.posy>e.y+e.height){const s=t.posy-e.y-e.height,r=o.getCurrentScrollTop()+t.relativePos.y,a=l.Iq.getZoneAtCoord(this._context,r);if(a){const t=this._helpPositionJumpOverViewZone(a);if(t)return l.ZP.createOutsideEditor(n,t,"below",s)}const u=o.getLineNumberAtVerticalOffset(r);return l.ZP.createOutsideEditor(n,new h.L(u,i.getLineMaxColumn(u)),"below",s)}const s=o.getLineNumberAtVerticalOffset(o.getCurrentScrollTop()+t.relativePos.y);if(t.posx<e.x){const i=e.x-t.posx;return l.ZP.createOutsideEditor(n,new h.L(s,1),"left",i)}if(t.posx>e.x+e.width){const o=t.posx-e.x-e.width;return l.ZP.createOutsideEditor(n,new h.L(s,i.getLineMaxColumn(s)),"right",o)}return null}_findMousePosition(t,e){const i=this._getPositionOutsideEditor(t);if(i)return i;const o=this._createMouseTarget(t,e);if(!o.position)return null;if(8===o.type||5===o.type){const t=this._helpPositionJumpOverViewZone(o.detail);if(t)return l.ZP.createViewZone(o.type,o.element,o.mouseColumn,t,o.detail)}return o}_helpPositionJumpOverViewZone(t){const e=new h.L(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=t.positionBefore,o=t.positionAfter;return i&&o?i.isBefore(e)?i:o:null}_dispatchMouse(t,e,i){t.position&&this._viewController.dispatchMouse({position:t.position,mouseColumn:t.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:e,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===t.type&&null!==t.detail.injectedText})}}class f extends r.JT{constructor(t,e,i,o){super(),this._context=t,this._viewHelper=e,this._mouseTargetFactory=i,this._dispatchMouse=o,this._operation=null}dispose(){super.dispose(),this.stop()}start(t,e){this._operation?this._operation.setPosition(t,e):this._operation=new C(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,t,e)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class C extends r.JT{constructor(t,e,i,n,s,r){super(),this._context=t,this._viewHelper=e,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=o.jL((()=>this._execute()))}dispose(){this._animationFrameDisposable.dispose()}setPosition(t,e){this._position=t,this._mouseEvent=e}_tick(){const t=Date.now(),e=t-this._lastTime;return this._lastTime=t,e}_getScrollSpeed(){const t=this._context.configuration.options.get(64),e=this._context.configuration.options.get(140).height/t,i=this._position.outsideDistance/t;return i<=1.5?Math.max(30,e*(1+i)):i<=3?Math.max(60,e*(2+i)):Math.max(200,e*(7+i))}_execute(){const t=this._context.configuration.options.get(64),e=this._getScrollSpeed()*(this._tick()/1e3)*t,i="above"===this._position.outsidePosition?-e:e;this._context.viewModel.viewLayout.deltaScrollNow(0,i),this._viewHelper.renderNow();const n=this._context.viewLayout.getLinesViewportData(),s="above"===this._position.outsidePosition?n.startLineNumber:n.endLineNumber;let r;{const t=(0,u.kG)(this._viewHelper.viewDomNode),e=this._context.configuration.options.get(140).horizontalScrollbarHeight,i=new u.YN(this._mouseEvent.pos.x,t.y+t.height-e-.1),o=(0,u.Pp)(this._viewHelper.viewDomNode,t,i);r=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),t,i,o,null)}r.position&&r.position.lineNumber===s||(r="above"===this._position.outsidePosition?l.ZP.createOutsideEditor(this._position.mouseColumn,new h.L(s,1),"above",this._position.outsideDistance):l.ZP.createOutsideEditor(this._position.mouseColumn,new h.L(s,this._context.viewModel.getLineMaxColumn(s)),"below",this._position.outsideDistance)),this._dispatchMouse(r,!0,2),this._animationFrameDisposable=o.jL((()=>this._execute()))}}class v{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(t){this._altKey=t.altKey,this._ctrlKey=t.ctrlKey,this._metaKey=t.metaKey,this._shiftKey=t.shiftKey}setStartButtons(t){this._leftButton=t.leftButton,this._middleButton=t.middleButton}setStartedOnLineNumbers(t){this._startedOnLineNumbers=t}trySetCount(t,e){const i=(new Date).getTime();i-this._lastSetMouseDownCountTime>v.CLEAR_MOUSE_DOWN_COUNT_TIME&&(t=1),this._lastSetMouseDownCountTime=i,t>this._lastMouseDownCount+1&&(t=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(e)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=e,this._lastMouseDownCount=Math.min(t,this._lastMouseDownPositionEqualCount)}}v.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var w=i(69010),S=i(28480);class y extends g{constructor(t,e,i){super(t,e,i),this._register(s.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(o.nm(this.viewHelper.linesContentDomNode,s.t.Tap,(t=>this.onTap(t)))),this._register(o.nm(this.viewHelper.linesContentDomNode,s.t.Change,(t=>this.onChange(t)))),this._register(o.nm(this.viewHelper.linesContentDomNode,s.t.Contextmenu,(t=>this._onContextMenu(new u.gy(t,!1,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(o.nm(this.viewHelper.linesContentDomNode,"pointerdown",(t=>{const e=t.pointerType;this._lastPointerType="mouse"!==e?"touch"===e?"touch":"pen":"mouse"})));const n=new u.tC(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,(t=>this._onMouseMove(t)))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,(t=>this._onMouseUp(t)))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,(t=>this._onMouseLeave(t)))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,((t,e)=>this._onMouseDown(t,e))))}onTap(t){if(!t.initialTarget||!this.viewHelper.linesContentDomNode.contains(t.initialTarget))return;t.preventDefault(),this.viewHelper.focusTextArea();const e=this._createMouseTarget(new u.gy(t,!1,this.viewHelper.viewDomNode),!1);e.position&&this.viewController.dispatchMouse({position:e.position,mouseColumn:e.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:t.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===e.type&&null!==e.detail.injectedText})}onChange(t){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)}_onMouseDown(t,e){"touch"!==t.browserEvent.pointerType&&super._onMouseDown(t,e)}}class x extends g{constructor(t,e,i){super(t,e,i),this._register(s.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(o.nm(this.viewHelper.linesContentDomNode,s.t.Tap,(t=>this.onTap(t)))),this._register(o.nm(this.viewHelper.linesContentDomNode,s.t.Change,(t=>this.onChange(t)))),this._register(o.nm(this.viewHelper.linesContentDomNode,s.t.Contextmenu,(t=>this._onContextMenu(new u.gy(t,!1,this.viewHelper.viewDomNode),!1))))}onTap(t){t.preventDefault(),this.viewHelper.focusTextArea();const e=this._createMouseTarget(new u.gy(t,!1,this.viewHelper.viewDomNode),!1);if(e.position){const t=document.createEvent("CustomEvent");t.initEvent(S.pd.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(t),this.viewController.moveTo(e.position,1)}}onChange(t){this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)}}class b extends r.JT{constructor(t,e,i){super(),n.gn&&w.D.pointerEvents?this.handler=this._register(new y(t,e,i)):window.TouchEvent?this.handler=this._register(new x(t,e,i)):this.handler=this._register(new g(t,e,i))}getTargetAtClientPoint(t,e){return this.handler.getTargetAtClientPoint(t,e)}}},69624:(t,e,i)=>{i.d(e,{H:()=>T});var o=i(26511),n=i(22512),s=i(86837),r=i(44352),a=i(17224),l=i(58314),u=i(28480),c=i(77327),h=i(27113),d=i(26458),p=i(37061),m=i(77116),g=i(34361),_=i(99924),f=i(55597),C=i(80253),v=i(22907),w=i(76958),S=i(57612),y=i(37093);class x{constructor(t,e,i,o,n){this._context=t,this.modelLineNumber=e,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=o,this.distanceToModelLineEnd=n,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(t){const e=new _.L(this.modelLineNumber,this.distanceToModelLineStart+1),i=new _.L(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(e),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=t.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=t.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(t){return this._previousPresentation||(this._previousPresentation=t||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const b=n.isFirefox;class T extends h.E{constructor(t,e,i){super(t),this._primaryCursorPosition=new _.L(1,1),this._primaryCursorVisibleRange=null,this._viewController=e,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const a=this._context.configuration.options,d=a.get(140);this._setAccessibilityOptions(a),this._contentLeft=d.contentLeft,this._contentWidth=d.contentWidth,this._contentHeight=d.height,this._fontInfo=a.get(48),this._lineHeight=a.get(64),this._emptySelectionClipboard=a.get(35),this._copyWithSyntaxHighlighting=a.get(23),this._visibleTextArea=null,this._selections=[new C.Y(1,1,1,1)],this._modelSelections=[new C.Y(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,s.X)(document.createElement("textarea")),h.K.write(this.textArea,6),this.textArea.setClassName("inputarea ".concat(v.S)),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:p}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize="".concat(p*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(a)),this.textArea.setAttribute("tabindex",String(a.get(120))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",o.NC("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this._ensureReadOnlyAttribute(),this.textAreaCover=(0,s.X)(document.createElement("div")),this.textAreaCover.setPosition("absolute");const m={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:t=>this._context.viewModel.getLineMaxColumn(t),getValueInRange:(t,e)=>this._context.viewModel.getValueInRange(t,e),getValueLengthInRange:(t,e)=>this._context.viewModel.getValueLengthInRange(t,e),modifyPosition:(t,e)=>this._context.viewModel.modifyPosition(t,e)},g={getDataToCopy:()=>{const t=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,r.ED),e=this._context.viewModel.model.getEOL(),i=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),o=Array.isArray(t)?t:null,n=Array.isArray(t)?t.join(e):t;let s,a=null;if(u.RA.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&n.length<65536){const t=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);t&&(s=t.html,a=t.mode)}return{isFromEmptySelection:i,multicursorText:o,text:n,html:s,mode:a}},getScreenReaderContent:()=>{if(1===this._accessibilitySupport){const t=this._selections[0];if(r.dz&&t.isEmpty()){const e=t.getStartPosition();let i=this._getWordBeforePosition(e);if(0===i.length&&(i=this._getCharacterBeforePosition(e)),i.length>0)return new c.un(i,i.length,i.length,f.e.fromPositions(e),0)}const e=500;if(r.dz&&!t.isEmpty()&&m.getValueLengthInRange(t,0)<e){const e=m.getValueInRange(t,0);return new c.un(e,0,e.length,t,0)}if(n.isSafari&&!t.isEmpty()){const t="vscode-placeholder";return new c.un(t,0,t.length,null,void 0)}return c.un.EMPTY}if(n.isAndroid){const t=this._selections[0];if(t.isEmpty()){const e=t.getStartPosition(),[i,o]=this._getAndroidWordAtPosition(e);if(i.length>0)return new c.un(i,o,o,f.e.fromPositions(e),0)}return c.un.EMPTY}return c.ee.fromEditorSelection(m,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(t,e,i)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(t,e,i)},w=this._register(new u.Tj(this.textArea.domNode));this._textAreaInput=this._register(new u.Fz(g,w,r.OS,n)),this._register(this._textAreaInput.onKeyDown((t=>{this._viewController.emitKeyDown(t)}))),this._register(this._textAreaInput.onKeyUp((t=>{this._viewController.emitKeyUp(t)}))),this._register(this._textAreaInput.onPaste((t=>{let e=!1,i=null,o=null;t.metadata&&(e=this._emptySelectionClipboard&&!!t.metadata.isFromEmptySelection,i="undefined"!==typeof t.metadata.multicursorText?t.metadata.multicursorText:null,o=t.metadata.mode),this._viewController.paste(t.text,e,i,o)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((t=>{t.replacePrevCharCnt||t.replaceNextCharCnt||t.positionDelta?(c.al&&console.log(" => compositionType: <<".concat(t.text,">>, ").concat(t.replacePrevCharCnt,", ").concat(t.replaceNextCharCnt,", ").concat(t.positionDelta)),this._viewController.compositionType(t.text,t.replacePrevCharCnt,t.replaceNextCharCnt,t.positionDelta)):(c.al&&console.log(" => type: <<".concat(t.text,">>")),this._viewController.type(t.text))}))),this._register(this._textAreaInput.onSelectionChangeRequest((t=>{this._viewController.setSelection(t)}))),this._register(this._textAreaInput.onCompositionStart((t=>{const e=this.textArea.domNode,i=this._modelSelections[0],{distanceToModelLineStart:o,widthOfHiddenTextBefore:n}=(()=>{const t=e.value.substring(0,Math.min(e.selectionStart,e.selectionEnd)),o=t.lastIndexOf("\n"),n=t.substring(o+1),s=n.lastIndexOf("\t"),r=n.length-s-1,a=i.getStartPosition(),u=Math.min(a.column-1,r),c=a.column-1-u,h=n.substring(0,n.length-u),{tabSize:d}=this._context.viewModel.model.getOptions(),p=function(t,e,i){if(0===t.length)return 0;const o=document.createElement("div");o.style.position="absolute",o.style.top="-50000px",o.style.width="50000px";const n=document.createElement("span");(0,l.N)(n,e),n.style.whiteSpace="pre",n.style.tabSize="".concat(i*e.spaceWidth,"px"),n.append(t),o.appendChild(n),document.body.appendChild(o);const s=n.offsetWidth;return document.body.removeChild(o),s}(h,this._fontInfo,d);return{distanceToModelLineStart:c,widthOfHiddenTextBefore:p}})(),{distanceToModelLineEnd:s}=(()=>{const t=e.value.substring(Math.max(e.selectionStart,e.selectionEnd)),o=t.indexOf("\n"),n=-1===o?t:t.substring(0,o),s=n.indexOf("\t"),r=-1===s?n.length:n.length-s-1,a=i.getEndPosition(),l=Math.min(this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column,r);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column-l}})();this._context.viewModel.revealRange("keyboard",!0,f.e.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new x(this._context,i.startLineNumber,o,n,s),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName("inputarea ".concat(v.S," ime-input")),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((t=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName("inputarea ".concat(v.S)),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.viewModel.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.viewModel.setHasFocus(!1)}))),this._register(y.F.onDidChange((()=>{this._ensureReadOnlyAttribute()})))}writeScreenReaderContent(t){this._textAreaInput.writeScreenReaderContent(t)}dispose(){super.dispose()}_getAndroidWordAtPosition(t){const e=this._context.viewModel.getLineContent(t.lineNumber),i=(0,g.u)('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?');let o=!0,n=t.column,s=!0,r=t.column,a=0;for(;a<50&&(o||s);){if(o&&n<=1&&(o=!1),o){const t=e.charCodeAt(n-2);0!==i.get(t)?o=!1:n--}if(s&&r>e.length&&(s=!1),s){const t=e.charCodeAt(r-1);0!==i.get(t)?s=!1:r++}a++}return[e.substring(n-1,r-1),t.column-n]}_getWordBeforePosition(t){const e=this._context.viewModel.getLineContent(t.lineNumber),i=(0,g.u)(this._context.configuration.options.get(126));let o=t.column,n=0;for(;o>1;){const s=e.charCodeAt(o-2);if(0!==i.get(s)||n>50)return e.substring(o-1,t.column-1);n++,o--}return e.substring(0,t.column-1)}_getCharacterBeforePosition(t){if(t.column>1){const e=this._context.viewModel.getLineContent(t.lineNumber).charAt(t.column-2);if(!a.ZG(e.charCodeAt(0)))return e}return""}_getAriaLabel(t){return 1===t.get(2)?o.NC("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",r.IJ?"Shift+Alt+F1":"Alt+F1"):t.get(4)}_setAccessibilityOptions(t){this._accessibilitySupport=t.get(2);const e=t.get(3);2===this._accessibilitySupport&&e===m.BH.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=e;const i=t.get(140).wrappingColumn;if(-1!==i&&1!==this._accessibilitySupport){const e=t.get(48);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*e.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=b?0:1}onConfigurationChanged(t){const e=this._context.configuration.options,i=e.get(140);this._setAccessibilityOptions(e),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=e.get(48),this._lineHeight=e.get(64),this._emptySelectionClipboard=e.get(35),this._copyWithSyntaxHighlighting=e.get(23),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:o}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize="".concat(o*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("aria-label",this._getAriaLabel(e)),this.textArea.setAttribute("tabindex",String(e.get(120))),(t.hasChanged(32)||t.hasChanged(88))&&this._ensureReadOnlyAttribute(),t.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(t){return this._selections=t.selections.slice(0),this._modelSelections=t.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return this._scrollLeft=t.scrollLeft,this._scrollTop=t.scrollTop,!0}onZonesChanged(t){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(t){t.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",t.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),t.role&&this.textArea.setAttribute("role",t.role)}_ensureReadOnlyAttribute(){const t=this._context.configuration.options;!y.F.enabled||t.get(32)&&t.get(88)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(t){var e;this._primaryCursorPosition=new _.L(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=t.visibleRangeForPosition(this._primaryCursorPosition),null===(e=this._visibleTextArea)||void 0===e||e.prepareRender(t)}render(t){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){var t;if(this._visibleTextArea){const t=this._visibleTextArea.visibleTextareaStart,e=this._visibleTextArea.visibleTextareaEnd,i=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(i&&o&&t&&e&&e.left>=this._scrollLeft&&t.left<=this._scrollLeft+this._contentWidth){const n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,s=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let r=this._visibleTextArea.widthOfHiddenLineTextBefore,a=this._contentLeft+t.left-this._scrollLeft,l=e.left-t.left+1;if(a<this._contentLeft){const t=this._contentLeft-a;a+=t,r+=t,l-=t}l>this._contentWidth&&(l=this._contentWidth);const u=this._context.viewModel.getViewLineData(i.lineNumber),c=u.tokens.findTokenIndexAtOffset(i.column-1),h=c===u.tokens.findTokenIndexAtOffset(o.column-1),d=this._visibleTextArea.definePresentation(h?u.tokens.getPresentation(c):null);this.textArea.domNode.scrollTop=s*this._lineHeight,this.textArea.domNode.scrollLeft=r,this._doRender({lastRenderPosition:null,top:n,left:a,width:l,height:this._lineHeight,useCover:!1,color:(w.RW.getColorMap()||[])[d.foreground],italic:d.italic,bold:d.bold,underline:d.underline,strikethrough:d.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const i=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(i<0||i>this._contentHeight)this._renderAtTopLeft();else if(r.dz){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const o=null!==(t=this._textAreaInput.textAreaState.newlineCountBeforeSelection)&&void 0!==t?t:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=o*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:b?0:1,useCover:!1})}_newlinecount(t){let e=0,i=-1;for(;;){if(i=t.indexOf("\n",i+1),-1===i)break;e++}return e}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:b?0:1,useCover:!0})}_doRender(t){this._lastRenderPosition=t.lastRenderPosition;const e=this.textArea,i=this.textAreaCover;(0,l.N)(e,this._fontInfo),e.setTop(t.top),e.setLeft(t.left),e.setWidth(t.width),e.setHeight(t.height),e.setColor(t.color?S.Il.Format.CSS.formatHex(t.color):""),e.setFontStyle(t.italic?"italic":""),t.bold&&e.setFontWeight("bold"),e.setTextDecoration("".concat(t.underline?" underline":"").concat(t.strikethrough?" line-through":"")),i.setTop(t.useCover?t.top:0),i.setLeft(t.useCover?t.left:0),i.setWidth(t.useCover?t.width:0),i.setHeight(t.useCover?t.height:0);const o=this._context.configuration.options;o.get(55)?i.setClassName("monaco-editor-background textAreaCover "+p.Z.OUTER_CLASS_NAME):0!==o.get(65).renderType?i.setClassName("monaco-editor-background textAreaCover "+d.x.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}}},28480:(t,e,i)=>{i.d(e,{Fz:()=>v,Nl:()=>f,RA:()=>_,Tj:()=>S,pd:()=>o});var o,n=i(22512),s=i(20494),r=i(68215),a=i(85941),l=i(23334),u=i(37368),c=i(68515),h=i(59652),d=i(88869),p=i(17224),m=i(77327),g=i(80253);!function(t){t.Tap="-monaco-textarea-synthetic-tap"}(o||(o={}));const _={forceCopyWithSyntaxHighlighting:!1};class f{constructor(){this._lastState=null}set(t,e){this._lastState={lastCopiedValue:t,data:e}}get(t){return this._lastState&&this._lastState.lastCopiedValue===t?this._lastState.data:(this._lastState=null,null)}}f.INSTANCE=new f;class C{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(t){const e={text:t=t||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=t.length,e}}class v extends h.JT{get textAreaState(){return this._textAreaState}constructor(t,e,i,o){super(),this._host=t,this._textArea=e,this._OS=i,this._browser=o,this._onFocus=this._register(new c.Q5),this.onFocus=this._onFocus.event,this._onBlur=this._register(new c.Q5),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new c.Q5),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new c.Q5),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new c.Q5),this.onCut=this._onCut.event,this._onPaste=this._register(new c.Q5),this.onPaste=this._onPaste.event,this._onType=this._register(new c.Q5),this.onType=this._onType.event,this._onCompositionStart=this._register(new c.Q5),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new c.Q5),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new c.Q5),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new c.Q5),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new u.pY((()=>this._onCut.fire()),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new u.pY((()=>this.writeScreenReaderContent("asyncFocusGain")),0)),this._textAreaState=m.un.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let n=null;this._register(this._textArea.onKeyDown((t=>{const e=new a.y(t);(114===e.keyCode||this._currentComposition&&1===e.keyCode)&&e.stopPropagation(),e.equals(9)&&e.preventDefault(),n=e,this._onKeyDown.fire(e)}))),this._register(this._textArea.onKeyUp((t=>{const e=new a.y(t);this._onKeyUp.fire(e)}))),this._register(this._textArea.onCompositionStart((t=>{m.al&&console.log("[compositionstart]",t);const e=new C;if(this._currentComposition)this._currentComposition=e;else{if(this._currentComposition=e,2===this._OS&&n&&n.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===t.data&&("ArrowRight"===n.code||"ArrowLeft"===n.code))return m.al&&console.log("[compositionstart] Handling long press case on macOS + arrow key",t),e.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:t.data});this._browser.isAndroid,this._onCompositionStart.fire({data:t.data})}}))),this._register(this._textArea.onCompositionUpdate((t=>{m.al&&console.log("[compositionupdate]",t);const e=this._currentComposition;if(!e)return;if(this._browser.isAndroid){const e=m.un.readFromTextArea(this._textArea,this._textAreaState),i=m.un.deduceAndroidCompositionInput(this._textAreaState,e);return this._textAreaState=e,this._onType.fire(i),void this._onCompositionUpdate.fire(t)}const i=e.handleCompositionUpdate(t.data);this._textAreaState=m.un.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionUpdate.fire(t)}))),this._register(this._textArea.onCompositionEnd((t=>{m.al&&console.log("[compositionend]",t);const e=this._currentComposition;if(!e)return;if(this._currentComposition=null,this._browser.isAndroid){const t=m.un.readFromTextArea(this._textArea,this._textAreaState),e=m.un.deduceAndroidCompositionInput(this._textAreaState,t);return this._textAreaState=t,this._onType.fire(e),void this._onCompositionEnd.fire()}const i=e.handleCompositionUpdate(t.data);this._textAreaState=m.un.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((t=>{if(m.al&&console.log("[input]",t),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const e=m.un.readFromTextArea(this._textArea,this._textAreaState),i=m.un.deduceInput(this._textAreaState,e,2===this._OS);(0!==i.replacePrevCharCnt||1!==i.text.length||!p.ZG(i.text.charCodeAt(0))&&127!==i.text.charCodeAt(0))&&(this._textAreaState=e,""===i.text&&0===i.replacePrevCharCnt&&0===i.replaceNextCharCnt&&0===i.positionDelta||this._onType.fire(i))}))),this._register(this._textArea.onCut((t=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(t),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((t=>{this._ensureClipboardGetsEditorSelection(t)}))),this._register(this._textArea.onPaste((t=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),t.preventDefault(),!t.clipboardData)return;let[e,i]=w.getTextData(t.clipboardData);e&&(i=i||f.INSTANCE.get(e),this._onPaste.fire({text:e,metadata:i}))}))),this._register(this._textArea.onFocus((()=>{const t=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!t&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let t=0;return s.nm(document,"selectionchange",(e=>{if(l.B.onSelectionChange(),!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;const i=Date.now(),o=i-t;if(t=i,o<5)return;const n=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),n<100)return;if(!this._textAreaState.selection)return;const s=this._textArea.getValue();if(this._textAreaState.value!==s)return;const r=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===r&&this._textAreaState.selectionEnd===a)return;const u=this._textAreaState.deduceEditorPosition(r),c=this._host.deduceModelPosition(u[0],u[1],u[2]),h=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(h[0],h[1],h[2]),p=new g.Y(c.lineNumber,c.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(p)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(t,e){this._hasFocus||(e=e.collapseSelection()),e.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=e}writeScreenReaderContent(t){this._currentComposition||this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(t){const e=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:e.isFromEmptySelection,multicursorText:e.multicursorText,mode:e.mode};f.INSTANCE.set(this._browser.isFirefox?e.text.replace(/\r\n/g,"\n"):e.text,i),t.preventDefault(),t.clipboardData&&w.setTextData(t.clipboardData,e.text,e.html,i)}}class w{static getTextData(t){const e=t.getData(d.v.text);let i=null;const o=t.getData("vscode-editor-data");if("string"===typeof o)try{i=JSON.parse(o),1!==i.version&&(i=null)}catch(n){}if(0===e.length&&null===i&&t.files.length>0){return[Array.prototype.slice.call(t.files,0).map((t=>t.name)).join("\n"),null]}return[e,i]}static setTextData(t,e,i,o){t.setData(d.v.text,e),"string"===typeof i&&t.setData("text/html",i),t.setData("vscode-editor-data",JSON.stringify(o))}}class S extends h.JT{constructor(t){super(),this._actual=t,this.onKeyDown=this._register(new r.Y(this._actual,"keydown")).event,this.onKeyUp=this._register(new r.Y(this._actual,"keyup")).event,this.onCompositionStart=this._register(new r.Y(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new r.Y(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new r.Y(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new r.Y(this._actual,"beforeinput")).event,this.onInput=this._register(new r.Y(this._actual,"input")).event,this.onCut=this._register(new r.Y(this._actual,"cut")).event,this.onCopy=this._register(new r.Y(this._actual,"copy")).event,this.onPaste=this._register(new r.Y(this._actual,"paste")).event,this.onFocus=this._register(new r.Y(this._actual,"focus")).event,this.onBlur=this._register(new r.Y(this._actual,"blur")).event,this._onSyntheticTap=this._register(new c.Q5),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown((()=>l.B.onKeyDown()))),this._register(this.onBeforeInput((()=>l.B.onBeforeInput()))),this._register(this.onInput((()=>l.B.onInput()))),this._register(this.onKeyUp((()=>l.B.onKeyUp()))),this._register(s.nm(this._actual,o.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const t=s.Ay(this._actual);return t?t.activeElement===this._actual:!!s.Uw(this._actual)&&document.activeElement===this._actual}setIgnoreSelectionChangeTime(t){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(t,e){const i=this._actual;i.value!==e&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=e)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(t,e,i){const o=this._actual;let r=null;const a=s.Ay(o);r=a?a.activeElement:document.activeElement;const l=r===o,u=o.selectionStart,c=o.selectionEnd;if(l&&u===e&&c===i)n.isFirefox&&window.parent!==window&&o.focus();else{if(l)return this.setIgnoreSelectionChangeTime("setSelectionRange"),o.setSelectionRange(e,i),void(n.isFirefox&&window.parent!==window&&o.focus());try{const t=s.vL(o);this.setIgnoreSelectionChangeTime("setSelectionRange"),o.focus(),o.setSelectionRange(e,i),s._0(o,t)}catch(h){}}}}},77327:(t,e,i)=>{i.d(e,{al:()=>s,ee:()=>a,un:()=>r});var o=i(17224),n=i(55597);const s=!1;class r{constructor(t,e,i,o,n){this.value=t,this.selectionStart=e,this.selectionEnd=i,this.selection=o,this.newlineCountBeforeSelection=n}toString(){return"[ <".concat(this.value,">, selectionStart: ").concat(this.selectionStart,", selectionEnd: ").concat(this.selectionEnd,"]")}static readFromTextArea(t,e){const i=t.getValue(),o=t.getSelectionStart(),n=t.getSelectionEnd();let s;if(e){i.substring(0,o)===e.value.substring(0,e.selectionStart)&&(s=e.newlineCountBeforeSelection)}return new r(i,o,n,null,s)}collapseSelection(){return this.selectionStart===this.value.length?this:new r(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(t,e,i){s&&console.log("writeToTextArea ".concat(t,": ").concat(this.toString())),e.setValue(t,this.value),i&&e.setSelectionRange(t,this.selectionStart,this.selectionEnd)}deduceEditorPosition(t){var e,i,o,n,s,r,a,l;if(t<=this.selectionStart){const o=this.value.substring(t,this.selectionStart);return this._finishDeduceEditorPosition(null!==(i=null===(e=this.selection)||void 0===e?void 0:e.getStartPosition())&&void 0!==i?i:null,o,-1)}if(t>=this.selectionEnd){const e=this.value.substring(this.selectionEnd,t);return this._finishDeduceEditorPosition(null!==(n=null===(o=this.selection)||void 0===o?void 0:o.getEndPosition())&&void 0!==n?n:null,e,1)}const u=this.value.substring(this.selectionStart,t);if(-1===u.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(null!==(r=null===(s=this.selection)||void 0===s?void 0:s.getStartPosition())&&void 0!==r?r:null,u,1);const c=this.value.substring(t,this.selectionEnd);return this._finishDeduceEditorPosition(null!==(l=null===(a=this.selection)||void 0===a?void 0:a.getEndPosition())&&void 0!==l?l:null,c,-1)}_finishDeduceEditorPosition(t,e,i){let o=0,n=-1;for(;-1!==(n=e.indexOf("\n",n+1));)o++;return[t,i*e.length,o]}static deduceInput(t,e,i){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};s&&(console.log("------------------------deduceInput"),console.log("PREVIOUS STATE: ".concat(t.toString())),console.log("CURRENT STATE: ".concat(e.toString())));const n=Math.min(o.Mh(t.value,e.value),t.selectionStart,e.selectionStart),r=Math.min(o.P1(t.value,e.value),t.value.length-t.selectionEnd,e.value.length-e.selectionEnd),a=t.value.substring(n,t.value.length-r),l=e.value.substring(n,e.value.length-r),u=t.selectionStart-n,c=t.selectionEnd-n,h=e.selectionStart-n,d=e.selectionEnd-n;if(s&&(console.log("AFTER DIFFING PREVIOUS STATE: <".concat(a,">, selectionStart: ").concat(u,", selectionEnd: ").concat(c)),console.log("AFTER DIFFING CURRENT STATE: <".concat(l,">, selectionStart: ").concat(h,", selectionEnd: ").concat(d))),h===d){const e=t.selectionStart-n;return s&&console.log("REMOVE PREVIOUS: ".concat(e," chars")),{text:l,replacePrevCharCnt:e,replaceNextCharCnt:0,positionDelta:0}}return{text:l,replacePrevCharCnt:c-u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(t,e){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(s&&(console.log("------------------------deduceAndroidCompositionInput"),console.log("PREVIOUS STATE: ".concat(t.toString())),console.log("CURRENT STATE: ".concat(e.toString()))),t.value===e.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:e.selectionEnd-t.selectionEnd};const i=Math.min(o.Mh(t.value,e.value),t.selectionEnd),n=Math.min(o.P1(t.value,e.value),t.value.length-t.selectionEnd),r=t.value.substring(i,t.value.length-n),a=e.value.substring(i,e.value.length-n),l=t.selectionStart-i,u=t.selectionEnd-i,c=e.selectionStart-i,h=e.selectionEnd-i;return s&&(console.log("AFTER DIFFING PREVIOUS STATE: <".concat(r,">, selectionStart: ").concat(l,", selectionEnd: ").concat(u)),console.log("AFTER DIFFING CURRENT STATE: <".concat(a,">, selectionStart: ").concat(c,", selectionEnd: ").concat(h))),{text:a,replacePrevCharCnt:u,replaceNextCharCnt:r.length-u,positionDelta:h-a.length}}}r.EMPTY=new r("",0,0,null,void 0);class a{static _getPageOfLine(t,e){return Math.floor((t-1)/e)}static _getRangeForPage(t,e){const i=t*e,o=i+1,s=i+e;return new n.e(o,1,s+1,1)}static fromEditorSelection(t,e,i,o){const s=500,l=a._getPageOfLine(e.startLineNumber,i),u=a._getRangeForPage(l,i),c=a._getPageOfLine(e.endLineNumber,i),h=a._getRangeForPage(c,i);let d=u.intersectRanges(new n.e(1,1,e.startLineNumber,e.startColumn));if(o&&t.getValueLengthInRange(d,1)>s){const e=t.modifyPosition(d.getEndPosition(),-500);d=n.e.fromPositions(e,d.getEndPosition())}const p=t.getValueInRange(d,1),m=t.getLineCount(),g=t.getLineMaxColumn(m);let _=h.intersectRanges(new n.e(e.endLineNumber,e.endColumn,m,g));if(o&&t.getValueLengthInRange(_,1)>s){const e=t.modifyPosition(_.getStartPosition(),s);_=n.e.fromPositions(_.getStartPosition(),e)}const f=t.getValueInRange(_,1);let C;if(l===c||l+1===c)C=t.getValueInRange(e,1);else{const i=u.intersectRanges(e),o=h.intersectRanges(e);C=t.getValueInRange(i,1)+String.fromCharCode(8230)+t.getValueInRange(o,1)}return o&&C.length>1e3&&(C=C.substring(0,s)+String.fromCharCode(8230)+C.substring(C.length-s,C.length)),new r(p+C+f,p.length,p.length+C.length,e,d.endLineNumber-d.startLineNumber)}}},73731:(t,e,i)=>{i.r(e),i.d(e,{CoreEditingCommands:()=>M,CoreEditorCommand:()=>v,CoreNavigationCommands:()=>y,EditorScroll_:()=>w,RevealLine_:()=>S});var o=i(26511),n=i(22512),s=i(71923),r=i(15011),a=i(33344),l=i(3527),u=i(70424),c=i(29168),h=i(85426),d=i(57994),p=i(91748),m=i(99924),g=i(55597),_=i(90567),f=i(10071),C=i(16482);class v extends a._l{runEditorCommand(t,e,i){const o=e._getViewModel();o&&this.runCoreEditorCommand(o,i||{})}}var w,S,y;!function(t){t.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(t){if(!s.Kn(t))return!1;const e=t;return!!s.HD(e.to)&&(!(!s.o8(e.by)&&!s.HD(e.by))&&(!(!s.o8(e.value)&&!s.hj(e.value))&&!(!s.o8(e.revealCursor)&&!s.jn(e.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},t.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},t.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},t.parse=function(e){let i,o;switch(e.to){case t.RawDirection.Up:i=1;break;case t.RawDirection.Right:i=2;break;case t.RawDirection.Down:i=3;break;case t.RawDirection.Left:i=4;break;default:return null}switch(e.by){case t.RawUnit.Line:o=1;break;case t.RawUnit.WrappedLine:o=2;break;case t.RawUnit.Page:o=3;break;case t.RawUnit.HalfPage:o=4;break;case t.RawUnit.Editor:o=5;break;case t.RawUnit.Column:o=6;break;default:o=2}return{direction:i,unit:o,value:Math.floor(e.value||1),revealCursor:!!e.revealCursor,select:!!e.select}}}(w||(w={})),function(t){t.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(t){if(!s.Kn(t))return!1;const e=t;return!(!s.hj(e.lineNumber)&&!s.HD(e.lineNumber))&&!(!s.o8(e.at)&&!s.HD(e.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},t.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(S||(S={}));class x{constructor(t){t.addImplementation(1e4,"code-editor",((t,e)=>{const i=t.get(l.$).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&this._runEditorCommand(t,i,e)})),t.addImplementation(1e3,"generic-dom-input-textarea",((t,e)=>{const i=document.activeElement;return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(this.runDOMCommand(),!0)})),t.addImplementation(0,"generic-dom",((t,e)=>{const i=t.get(l.$).getActiveCodeEditor();return!!i&&(i.focus(),this._runEditorCommand(t,i,e))}))}_runEditorCommand(t,e,i){const o=this.runEditorCommand(t,e,i);return o||!0}}!function(t){class e extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){if(!e.position)return;t.model.pushStackElement();t.setCursorStates(e.source,3,[d.P.moveTo(t,t.getPrimaryCursorState(),this._inSelectionMode,e.position,e.viewPosition)])&&2!==e.revealType&&t.revealPrimaryCursor(e.source,!0,!0)}}t.MoveTo=(0,a.fK)(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),t.MoveToSelect=(0,a.fK)(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class i extends v{runCoreEditorCommand(t,e){t.model.pushStackElement();const i=this._getColumnSelectResult(t,t.getPrimaryCursorState(),t.getCursorColumnSelectData(),e);null!==i&&(t.setCursorStates(e.source,3,i.viewStates.map((t=>c.Vi.fromViewState(t)))),t.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?t.revealTopMostCursor(e.source):t.revealBottomMostCursor(e.source))}}t.ColumnSelect=(0,a.fK)(new class extends i{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(t,e,i,o){if("undefined"===typeof o.position||"undefined"===typeof o.viewPosition||"undefined"===typeof o.mouseColumn)return null;const n=t.model.validatePosition(o.position),s=t.coordinatesConverter.validateViewPosition(new m.L(o.viewPosition.lineNumber,o.viewPosition.column),n),r=o.doColumnSelect?i.fromViewLineNumber:s.lineNumber,a=o.doColumnSelect?i.fromViewVisualColumn:o.mouseColumn-1;return u.U.columnSelect(t.cursorConfig,t,r,a,s.lineNumber,o.mouseColumn-1)}}),t.CursorColumnSelectLeft=(0,a.fK)(new class extends i{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(t,e,i,o){return u.U.columnSelectLeft(t.cursorConfig,t,i)}}),t.CursorColumnSelectRight=(0,a.fK)(new class extends i{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(t,e,i,o){return u.U.columnSelectRight(t.cursorConfig,t,i)}});class s extends i{constructor(t){super(t),this._isPaged=t.isPaged}_getColumnSelectResult(t,e,i,o){return u.U.columnSelectUp(t.cursorConfig,t,i,this._isPaged)}}t.CursorColumnSelectUp=(0,a.fK)(new s({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3600,linux:{primary:0}}})),t.CursorColumnSelectPageUp=(0,a.fK)(new s({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3595,linux:{primary:0}}}));class l extends i{constructor(t){super(t),this._isPaged=t.isPaged}_getColumnSelectResult(t,e,i,o){return u.U.columnSelectDown(t.cursorConfig,t,i,this._isPaged)}}t.CursorColumnSelectDown=(0,a.fK)(new l({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3602,linux:{primary:0}}})),t.CursorColumnSelectPageDown=(0,a.fK)(new l({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3596,linux:{primary:0}}}));class h extends v{constructor(){super({id:"cursorMove",precondition:void 0,description:d.N.description})}runCoreEditorCommand(t,e){const i=d.N.parse(e);i&&this._runCursorMove(t,e.source,i)}_runCursorMove(t,e,i){t.model.pushStackElement(),t.setCursorStates(e,3,h._move(t,t.getCursorStates(),i)),t.revealPrimaryCursor(e,!0)}static _move(t,e,i){const o=i.select,n=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return d.P.simpleMove(t,e,i.direction,o,n,i.unit);case 11:case 13:case 12:case 14:return d.P.viewportMove(t,e,i.direction,o,n);default:return null}}}t.CursorMoveImpl=h,t.CursorMove=(0,a.fK)(new h);class p extends v{constructor(t){super(t),this._staticArgs=t.args}runCoreEditorCommand(t,e){let i=this._staticArgs;-1===this._staticArgs.value&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:e.pageSize||t.cursorConfig.pageSize}),t.model.pushStackElement(),t.setCursorStates(e.source,3,d.P.simpleMove(t,t.getCursorStates(),i.direction,i.select,i.value,i.unit)),t.revealPrimaryCursor(e.source,!0)}}t.CursorLeft=(0,a.fK)(new p({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),t.CursorLeftSelect=(0,a.fK)(new p({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1039}})),t.CursorRight=(0,a.fK)(new p({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),t.CursorRightSelect=(0,a.fK)(new p({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1041}})),t.CursorUp=(0,a.fK)(new p({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),t.CursorUpSelect=(0,a.fK)(new p({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),t.CursorPageUp=(0,a.fK)(new p({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:11}})),t.CursorPageUpSelect=(0,a.fK)(new p({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1035}})),t.CursorDown=(0,a.fK)(new p({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),t.CursorDownSelect=(0,a.fK)(new p({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),t.CursorPageDown=(0,a.fK)(new p({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:12}})),t.CursorPageDownSelect=(0,a.fK)(new p({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1036}})),t.CreateCursor=(0,a.fK)(new class extends v{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(t,e){if(!e.position)return;let i;i=e.wholeLine?d.P.line(t,t.getPrimaryCursorState(),!1,e.position,e.viewPosition):d.P.moveTo(t,t.getPrimaryCursorState(),!1,e.position,e.viewPosition);const o=t.getCursorStates();if(o.length>1){const n=i.modelState?i.modelState.position:null,s=i.viewState?i.viewState.position:null;for(let i=0,r=o.length;i<r;i++){const r=o[i];if((!n||r.modelState.selection.containsPosition(n))&&(!s||r.viewState.selection.containsPosition(s)))return o.splice(i,1),t.model.pushStackElement(),void t.setCursorStates(e.source,3,o)}}o.push(i),t.model.pushStackElement(),t.setCursorStates(e.source,3,o)}}),t.LastCursorMoveToSelect=(0,a.fK)(new class extends v{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(t,e){if(!e.position)return;const i=t.getLastAddedCursorIndex(),o=t.getCursorStates(),n=o.slice(0);n[i]=d.P.moveTo(t,o[i],!0,e.position,e.viewPosition),t.model.pushStackElement(),t.setCursorStates(e.source,3,n)}});class f extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,d.P.moveToBeginningOfLine(t,t.getCursorStates(),this._inSelectionMode)),t.revealPrimaryCursor(e.source,!0)}}t.CursorHome=(0,a.fK)(new f({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),t.CursorHomeSelect=(0,a.fK)(new f({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class C extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,this._exec(t.getCursorStates())),t.revealPrimaryCursor(e.source,!0)}_exec(t){const e=[];for(let i=0,o=t.length;i<o;i++){const o=t[i],n=o.modelState.position.lineNumber;e[i]=c.Vi.fromModelState(o.modelState.move(this._inSelectionMode,n,1,0))}return e}}t.CursorLineStart=(0,a.fK)(new C({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:0,mac:{primary:287}}})),t.CursorLineStartSelect=(0,a.fK)(new C({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:0,mac:{primary:1311}}}));class y extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,d.P.moveToEndOfLine(t,t.getCursorStates(),this._inSelectionMode,e.sticky||!1)),t.revealPrimaryCursor(e.source,!0)}}t.CursorEnd=(0,a.fK)(new y({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:_.u.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),t.CursorEndSelect=(0,a.fK)(new y({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:_.u.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class b extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,this._exec(t,t.getCursorStates())),t.revealPrimaryCursor(e.source,!0)}_exec(t,e){const i=[];for(let o=0,n=e.length;o<n;o++){const n=e[o],s=n.modelState.position.lineNumber,r=t.model.getLineMaxColumn(s);i[o]=c.Vi.fromModelState(n.modelState.move(this._inSelectionMode,s,r,0))}return i}}t.CursorLineEnd=(0,a.fK)(new b({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:0,mac:{primary:291}}})),t.CursorLineEndSelect=(0,a.fK)(new b({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:0,mac:{primary:1315}}}));class T extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,d.P.moveToBeginningOfBuffer(t,t.getCursorStates(),this._inSelectionMode)),t.revealPrimaryCursor(e.source,!0)}}t.CursorTop=(0,a.fK)(new T({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:2062,mac:{primary:2064}}})),t.CursorTopSelect=(0,a.fK)(new T({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3086,mac:{primary:3088}}}));class E extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,d.P.moveToEndOfBuffer(t,t.getCursorStates(),this._inSelectionMode)),t.revealPrimaryCursor(e.source,!0)}}t.CursorBottom=(0,a.fK)(new E({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:2061,mac:{primary:2066}}})),t.CursorBottomSelect=(0,a.fK)(new E({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:3085,mac:{primary:3090}}}));class M extends v{constructor(){super({id:"editorScroll",precondition:void 0,description:w.description})}determineScrollMethod(t){return[6].includes(t.unit)&&[4,2].includes(t.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(t.unit)&&[1,3].includes(t.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(t,e){const i=w.parse(e);if(!i)return;const o=this.determineScrollMethod(i);o&&o(t,e.source,i)}_runVerticalEditorScroll(t,e,i){const o=this._computeDesiredScrollTop(t,i);if(i.revealCursor){const n=t.getCompletelyVisibleViewRangeAtScrollTop(o);t.setCursorStates(e,3,[d.P.findPositionInViewportIfOutside(t,t.getPrimaryCursorState(),n,i.select)])}t.viewLayout.setScrollPosition({scrollTop:o},0)}_computeDesiredScrollTop(t,e){if(1===e.unit){const i=t.viewLayout.getFutureViewport(),o=t.getCompletelyVisibleViewRangeAtScrollTop(i.top),n=t.coordinatesConverter.convertViewRangeToModelRange(o);let s;s=1===e.direction?Math.max(1,n.startLineNumber-e.value):Math.min(t.model.getLineCount(),n.startLineNumber+e.value);const r=t.coordinatesConverter.convertModelPositionToViewPosition(new m.L(s,1));return t.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}if(5===e.unit){let i=0;return 3===e.direction&&(i=t.model.getLineCount()-t.cursorConfig.pageSize),t.viewLayout.getVerticalOffsetForLineNumber(i)}let i;i=3===e.unit?t.cursorConfig.pageSize*e.value:4===e.unit?Math.round(t.cursorConfig.pageSize/2)*e.value:e.value;const o=(1===e.direction?-1:1)*i;return t.viewLayout.getCurrentScrollTop()+o*t.cursorConfig.lineHeight}_runHorizontalEditorScroll(t,e,i){const o=this._computeDesiredScrollLeft(t,i);t.viewLayout.setScrollPosition({scrollLeft:o},0)}_computeDesiredScrollLeft(t,e){const i=(4===e.direction?-1:1)*e.value;return t.viewLayout.getCurrentScrollLeft()+i*t.cursorConfig.typicalHalfwidthCharacterWidth}}t.EditorScrollImpl=M,t.EditorScroll=(0,a.fK)(new M),t.ScrollLineUp=(0,a.fK)(new class extends v{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Up,by:w.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),t.ScrollPageUp=(0,a.fK)(new class extends v{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Up,by:w.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),t.ScrollEditorTop=(0,a.fK)(new class extends v{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Up,by:w.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),t.ScrollLineDown=(0,a.fK)(new class extends v{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Down,by:w.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),t.ScrollPageDown=(0,a.fK)(new class extends v{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Down,by:w.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),t.ScrollEditorBottom=(0,a.fK)(new class extends v{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Down,by:w.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),t.ScrollLeft=(0,a.fK)(new class extends v{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Left,by:w.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}}),t.ScrollRight=(0,a.fK)(new class extends v{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus}})}runCoreEditorCommand(e,i){t.EditorScroll.runCoreEditorCommand(e,{to:w.RawDirection.Right,by:w.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}});class A extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){e.position&&(t.model.pushStackElement(),t.setCursorStates(e.source,3,[d.P.word(t,t.getPrimaryCursorState(),this._inSelectionMode,e.position)]),2!==e.revealType&&t.revealPrimaryCursor(e.source,!0,!0))}}t.WordSelect=(0,a.fK)(new A({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),t.WordSelectDrag=(0,a.fK)(new A({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),t.LastCursorWordSelect=(0,a.fK)(new class extends v{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(t,e){if(!e.position)return;const i=t.getLastAddedCursorIndex(),o=t.getCursorStates(),n=o.slice(0),s=o[i];n[i]=d.P.word(t,s,s.modelState.hasSelection(),e.position),t.model.pushStackElement(),t.setCursorStates(e.source,3,n)}});class L extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){e.position&&(t.model.pushStackElement(),t.setCursorStates(e.source,3,[d.P.line(t,t.getPrimaryCursorState(),this._inSelectionMode,e.position,e.viewPosition)]),2!==e.revealType&&t.revealPrimaryCursor(e.source,!1,!0))}}t.LineSelect=(0,a.fK)(new L({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),t.LineSelectDrag=(0,a.fK)(new L({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class P extends v{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,e){if(!e.position)return;const i=t.getLastAddedCursorIndex(),o=t.getCursorStates(),n=o.slice(0);n[i]=d.P.line(t,o[i],this._inSelectionMode,e.position,e.viewPosition),t.model.pushStackElement(),t.setCursorStates(e.source,3,n)}}t.LastCursorLineSelect=(0,a.fK)(new P({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),t.LastCursorLineSelectDrag=(0,a.fK)(new P({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),t.CancelSelection=(0,a.fK)(new class extends v{constructor(){super({id:"cancelSelection",precondition:_.u.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,[d.P.cancelSelection(t,t.getPrimaryCursorState())]),t.revealPrimaryCursor(e.source,!0)}}),t.RemoveSecondaryCursors=(0,a.fK)(new class extends v{constructor(){super({id:"removeSecondaryCursors",precondition:_.u.hasMultipleSelections,kbOpts:{weight:1,kbExpr:_.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates(e.source,3,[t.getPrimaryCursorState()]),t.revealPrimaryCursor(e.source,!0),(0,r.i7)(o.NC("removedCursor","Removed secondary cursors"))}}),t.RevealLine=(0,a.fK)(new class extends v{constructor(){super({id:"revealLine",precondition:void 0,description:S.description})}runCoreEditorCommand(t,e){const i=e,o=i.lineNumber||0;let n="number"===typeof o?o+1:parseInt(o)+1;n<1&&(n=1);const s=t.model.getLineCount();n>s&&(n=s);const r=new g.e(n,1,n,t.model.getLineMaxColumn(n));let a=0;if(i.at)switch(i.at){case S.RawAtArgument.Top:a=3;break;case S.RawAtArgument.Center:a=1;break;case S.RawAtArgument.Bottom:a=4}const l=t.coordinatesConverter.convertModelRangeToViewRange(r);t.revealRange(e.source,!1,l,a,0)}}),t.SelectAll=new class extends x{constructor(){super(a.Sq)}runDOMCommand(){n.isFirefox&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(t,e,i){const o=e._getViewModel();o&&this.runCoreEditorCommand(o,i)}runCoreEditorCommand(t,e){t.model.pushStackElement(),t.setCursorStates("keyboard",3,[d.P.selectAll(t,t.getPrimaryCursorState())])}},t.SetSelection=(0,a.fK)(new class extends v{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(t,e){e.selection&&(t.model.pushStackElement(),t.setCursorStates(e.source,3,[c.Vi.fromModelSelection(e.selection)]))}})}(y||(y={}));const b=f.Ao.and(_.u.textInputFocus,_.u.columnSelection);function T(t,e){C.W.registerKeybindingRule({id:t,primary:e,when:b,weight:1})}function E(t){return t.register(),t}var M;T(y.CursorColumnSelectLeft.id,1039),T(y.CursorColumnSelectRight.id,1041),T(y.CursorColumnSelectUp.id,1040),T(y.CursorColumnSelectPageUp.id,1035),T(y.CursorColumnSelectDown.id,1042),T(y.CursorColumnSelectPageDown.id,1036),function(t){class e extends a._l{runEditorCommand(t,e,i){const o=e._getViewModel();o&&this.runCoreEditingCommand(e,o,i||{})}}t.CoreEditingCommand=e,t.LineBreakInsert=(0,a.fK)(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:_.u.writable,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,e,i){t.pushUndoStop(),t.executeCommands(this.id,p.u6.lineBreakInsert(e.cursorConfig,e.model,e.getCursorStates().map((t=>t.modelState.selection))))}}),t.Outdent=(0,a.fK)(new class extends e{constructor(){super({id:"outdent",precondition:_.u.writable,kbOpts:{weight:0,kbExpr:f.Ao.and(_.u.editorTextFocus,_.u.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,e,i){t.pushUndoStop(),t.executeCommands(this.id,p.u6.outdent(e.cursorConfig,e.model,e.getCursorStates().map((t=>t.modelState.selection)))),t.pushUndoStop()}}),t.Tab=(0,a.fK)(new class extends e{constructor(){super({id:"tab",precondition:_.u.writable,kbOpts:{weight:0,kbExpr:f.Ao.and(_.u.editorTextFocus,_.u.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,e,i){t.pushUndoStop(),t.executeCommands(this.id,p.u6.tab(e.cursorConfig,e.model,e.getCursorStates().map((t=>t.modelState.selection)))),t.pushUndoStop()}}),t.DeleteLeft=(0,a.fK)(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,e,i){const[o,n]=h.A.deleteLeft(e.getPrevEditOperationType(),e.cursorConfig,e.model,e.getCursorStates().map((t=>t.modelState.selection)),e.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,n),e.setPrevEditOperationType(2)}}),t.DeleteRight=(0,a.fK)(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.u.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,e,i){const[o,n]=h.A.deleteRight(e.getPrevEditOperationType(),e.cursorConfig,e.model,e.getCursorStates().map((t=>t.modelState.selection)));o&&t.pushUndoStop(),t.executeCommands(this.id,n),e.setPrevEditOperationType(3)}}),t.Undo=new class extends x{constructor(){super(a.n_)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,e,i){if(e.hasModel()&&!0!==e.getOption(88))return e.getModel().undo()}},t.Redo=new class extends x{constructor(){super(a.kz)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,e,i){if(e.hasModel()&&!0!==e.getOption(88))return e.getModel().redo()}}}(M||(M={}));class A extends a.mY{constructor(t,e,i){super({id:t,precondition:void 0,description:i}),this._handlerId=e}runCommand(t,e){const i=t.get(l.$).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,e)}}function L(t,e){E(new A("default:"+t,t)),E(new A(t,t,e))}L("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),L("replacePreviousChar"),L("compositionType"),L("compositionStart"),L("compositionEnd"),L("paste"),L("cut")}}]);
//# sourceMappingURL=monaco-editor-vendor.11aab2e7.2d3c9fcc.js.map