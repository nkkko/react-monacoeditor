"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[929],{23562:(e,t,i)=>{i.r(t),i.d(t,{FoldingController:()=>G,RangesLimitReporter:()=>B});var n=i(37368),o=i(21706),r=i(33309),s=i(99553),a=i(59652),d=i(17224),l=i(71923),c=i(80134),h=i(33344),u=i(90567),g=i(76958),p=i(41598),f=i(99572),m=i(48575),_=i(68515),v=i(55597),C=i(92626);class b{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new _.Q5,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange((e=>this.updateHiddenRanges())),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some((e=>e.range.endLineNumber!==e.range.startLineNumber||0!==(0,C.Q)(e.text)[0])))}updateHiddenRanges(){let e=!1;const t=[];let i=0,n=0,o=Number.MAX_VALUE,r=-1;const s=this._foldingModel.regions;for(;i<s.length;i++){if(!s.isCollapsed(i))continue;const a=s.getStartLineNumber(i)+1,d=s.getEndLineNumber(i);o<=a&&d<=r||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===a&&this._hiddenRanges[n].endLineNumber===d?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new v.e(a,1,d,1))),o=a,r=d)}(this._hasLineChanges||e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==y(this._hiddenRanges,e)}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let n=null;const o=e=>(n&&function(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}(e,n)||(n=y(this._hiddenRanges,e)),n?n.startLineNumber-1:null);for(let r=0,s=e.length;r<s;r++){let n=e[r];const s=o(n.startLineNumber);s&&(n=n.setStartPosition(s,i.getLineMaxColumn(s)),t=!0);const a=o(n.endLineNumber);a&&(n=n.setEndPosition(a,i.getLineMaxColumn(a)),t=!0),e[r]=n}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function y(e,t){const i=(0,m.J_)(e,(e=>t<e.startLineNumber))-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}var L,w=i(3493),N=i(26511),R=i(10071),k=i(29824),M=i(66006),D=i(68961),S=i(37709),x=i(606),I=i(87794),P=i(90024),E=i(39049),A=i(71308),T=i(79412),F=i(53435),O=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},W=function(e,t){return function(i,n){t(i,n,e)}},U=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};const H=new R.uy("foldingEnabled",!1);let G=L=class extends a.JT{static get(e){return e.getContribution(L.ID)}static getFoldingRangeProviders(e,t){var i,n;const o=e.foldingRangeProvider.ordered(t);return null!==(n=null===(i=L._foldingRangeSelector)||void 0===i?void 0:i.call(L,o,t))&&void 0!==n?n:o}constructor(e,t,i,n,o,r){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=r,this.localToDispose=this._register(new a.SL),this.editor=e,this._foldingLimitReporter=new B(e);const s=this.editor.getOptions();this._isEnabled=s.get(43),this._useFoldingProviders="indentation"!==s.get(44),this._unfoldOnClickAfterEndOfLine=s.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=s.get(46),this.updateDebounceInfo=o.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new k.fF(e),this.foldingDecorationProvider.showFoldingControls=s.get(109),this.foldingDecorationProvider.showFoldingHighlights=s.get(45),this.foldingEnabled=H.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel((()=>this.onModelChanged()))),this._register(this.editor.onDidChangeConfiguration((e=>{if(e.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(47)&&this.onModelChanged(),e.hasChanged(109)||e.hasChanged(45)){const e=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=e.get(109),this.foldingDecorationProvider.showFoldingHighlights=e.get(45),this.triggerFoldingModelChanged()}e.hasChanged(44)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(44),this.onFoldingStrategyChanged()),e.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),e.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))}))),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(t&&this._isEnabled&&!t.isTooLargeForTokenization()&&this.hiddenRangeModel&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new f.av(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new b(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((e=>this.onHiddenRangesChanges(e)))),this.updateScheduler=new n.vp(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new n.pY((()=>this.revealCursor()),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelContent((e=>this.onDidChangeModelContent(e)))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((()=>this.onCursorPositionChanged()))),this.localToDispose.add(this.editor.onMouseDown((e=>this.onEditorMouseDown(e)))),this.localToDispose.add(this.editor.onMouseUp((e=>this.onEditorMouseUp(e)))),this.localToDispose.add({dispose:()=>{var e,t;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),null===(e=this.updateScheduler)||void 0===e||e.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,null===(t=this.rangeProvider)||void 0===t||t.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;null===(e=this.rangeProvider)||void 0===e||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new w.aI(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=L.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new D.e(e,i,(()=>this.triggerFoldingModelChanged()),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;null===(t=this.hiddenRangeModel)||void 0===t||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((()=>{const e=this.foldingModel;if(!e)return null;const t=new I.G,i=this.getRangeProvider(e.textModel),o=this.foldingRegionPromise=(0,n.PG)((e=>i.compute(e)));return o.then((i=>{if(i&&o===this.foldingRegionPromise){let n;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=i.setCollapsedAllOfType(g.AD.Imports.value,!0);e&&(n=c.Z.capture(this.editor),this._currentModelHasFoldedImports=e)}const o=this.editor.getSelections(),r=o?o.map((e=>e.startLineNumber)):[];e.update(i,r),null===n||void 0===n||n.restore(this.editor);const s=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=s)}return e}))})).then(void 0,(e=>((0,r.dL)(e),null))))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then((e=>{if(e){const t=this.editor.getSelections();if(t&&t.length>0){const i=[];for(const n of t){const t=n.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,(e=>e.isCollapsed&&t>e.startLineNumber)))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}})).then(void 0,r.dL)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const t=e.target.detail,n=e.target.element.offsetLeft;if(t.offsetX-n<4)return;i=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){if(!e.target.detail.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){const e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,o=e.target.range;if(!o||o.startLineNumber!==i)return;if(n){if(4!==e.target.type)return}else{const e=this.editor.getModel();if(!e||o.startColumn!==e.getLineMaxColumn(i))return}const r=t.getRegionAtLine(i);if(r&&r.startLineNumber===i){const o=r.isCollapsed;if(n||o){let n=[];if(e.event.altKey){const e=e=>!e.containedBy(r)&&!r.containedBy(e),i=t.getRegionsInside(null,e);for(const t of i)t.isCollapsed&&n.push(t);0===n.length&&(n=i)}else{const i=e.event.middleButton||e.event.shiftKey;if(i)for(const e of t.getRegionsInside(r))e.isCollapsed===o&&n.push(e);!o&&i&&0!==n.length||n.push(r)}t.toggleCollapseState(n),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};G.ID="editor.contrib.folding",G=L=O([W(1,R.i6),W(2,p.c_),W(3,S.lT),W(4,x.A),W(5,P.p)],G);class B{constructor(e){this.editor=e,this._onDidChange=new _.Q5,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}class K extends h.R6{runEditorCommand(e,t,i){const n=e.get(p.c_),o=G.get(t);if(!o)return;const r=o.getFoldingModel();return r?(this.reportTelemetry(e,t),r.then((e=>{if(e){this.invoke(o,e,t,i,n);const r=t.getSelection();r&&o.reveal(r.getStartPosition())}}))):void 0}getSelectedLines(e){const t=e.getSelections();return t?t.map((e=>e.startLineNumber)):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map((e=>e+1)):this.getSelectedLines(t)}run(e,t){}}function V(e){if(!l.o8(e)){if(!l.Kn(e))return!1;const t=e;if(!l.o8(t.levels)&&!l.hj(t.levels))return!1;if(!l.o8(t.direction)&&!l.HD(t.direction))return!1;if(!l.o8(t.selectionLines)&&(!Array.isArray(t.selectionLines)||!t.selectionLines.every(l.hj)))return!1}return!0}class Z extends K{getFoldingLevel(){return parseInt(this.id.substr(Z.ID_PREFIX.length))}invoke(e,t,i){(0,f.Ln)(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}Z.ID_PREFIX="editor.foldLevel",Z.ID=e=>Z.ID_PREFIX+e;(0,h._K)(G.ID,G,0),(0,h.Qr)(class extends K{constructor(){super({id:"editor.unfold",label:N.NC("unfoldAction.label","Unfold"),alias:"Unfold",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:V,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const o=n&&n.levels||1,r=this.getLineNumbers(n,i);n&&"up"===n.direction?(0,f.gU)(t,!1,o,r):(0,f.R$)(t,!1,o,r)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.unfoldRecursively",label:N.NC("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2142),weight:100}})}invoke(e,t,i,n){(0,f.R$)(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.fold",label:N.NC("foldAction.label","Fold"),alias:"Fold",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:V,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const o=this.getLineNumbers(n,i),r=n&&n.levels,s=n&&n.direction;"number"!==typeof r&&"string"!==typeof s?(0,f.HX)(t,!0,o):"up"===s?(0,f.gU)(t,!0,r||1,o):(0,f.R$)(t,!0,r||1,o)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.foldRecursively",label:N.NC("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2140),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);(0,f.R$)(t,!0,Number.MAX_VALUE,n)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.foldAll",label:N.NC("foldAllAction.label","Fold All"),alias:"Fold All",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2069),weight:100}})}invoke(e,t,i){(0,f.R$)(t,!0)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.unfoldAll",label:N.NC("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2088),weight:100}})}invoke(e,t,i){(0,f.R$)(t,!1)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.foldAllBlockComments",label:N.NC("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2138),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())(0,f.MW)(t,g.AD.Comment.value,!0);else{const e=i.getModel();if(!e)return;const n=o.getLanguageConfiguration(e.getLanguageId()).comments;if(n&&n.blockCommentStartToken){const e=new RegExp("^\\s*"+(0,d.ec)(n.blockCommentStartToken));(0,f.DW)(t,e,!0)}}}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.foldAllMarkerRegions",label:N.NC("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2077),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())(0,f.MW)(t,g.AD.Region.value,!0);else{const e=i.getModel();if(!e)return;const n=o.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(n&&n.markers&&n.markers.start){const e=new RegExp(n.markers.start);(0,f.DW)(t,e,!0)}}}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:N.NC("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2078),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())(0,f.MW)(t,g.AD.Region.value,!1);else{const e=i.getModel();if(!e)return;const n=o.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(n&&n.markers&&n.markers.start){const e=new RegExp(n.markers.start);(0,f.DW)(t,e,!1)}}}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.foldAllExcept",label:N.NC("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2136),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);(0,f.YT)(t,!0,n)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.unfoldAllExcept",label:N.NC("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2134),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);(0,f.YT)(t,!1,n)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.toggleFold",label:N.NC("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2090),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);(0,f.d8)(t,1,n)}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.gotoParentFold",label:N.NC("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const e=(0,f.PV)(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.gotoPreviousFold",label:N.NC("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const e=(0,f.sK)(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.gotoNextFold",label:N.NC("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const e=(0,f.hE)(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:N.NC("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2135),weight:100}})}invoke(e,t,i){var n;const o=[],r=i.getSelections();if(r){for(const e of r){let t=e.endLineNumber;1===e.endColumn&&--t,t>e.startLineNumber&&(o.push({startLineNumber:e.startLineNumber,endLineNumber:t,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:e.startLineNumber,startColumn:1,endLineNumber:e.startLineNumber,endColumn:1}))}if(o.length>0){o.sort(((e,t)=>e.startLineNumber-t.startLineNumber));const e=M.MN.sanitizeAndMerge(t.regions,o,null===(n=i.getModel())||void 0===n?void 0:n.getLineCount());t.updatePost(M.MN.fromFoldRanges(e))}}}}),(0,h.Qr)(class extends K{constructor(){super({id:"editor.removeManualFoldingRanges",label:N.NC("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2137),weight:100}})}invoke(e,t,i){const n=i.getSelections();if(n){const i=[];for(const e of n){const{startLineNumber:t,endLineNumber:n}=e;i.push(n>=t?{startLineNumber:t,endLineNumber:n}:{endLineNumber:n,startLineNumber:t})}t.removeManualRanges(i),e.triggerFoldingModelChanged()}}});for(let X=1;X<=7;X++)(0,h.QG)(new Z({id:Z.ID(X),label:N.NC("foldLevelAction.label","Fold Level {0}",X),alias:"Fold Level ".concat(X),precondition:H,kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2048|21+X),weight:100}}));E.P.registerCommand("_executeFoldingRangeProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return U(this,void 0,void 0,(function*(){const[t]=i;if(!(t instanceof A.o))throw(0,r.b1)();const n=e.get(P.p),s=e.get(T.q).getModel(t);if(!s)throw(0,r.b1)();const a=e.get(F.Ui);if(!a.getValue("editor.folding",{resource:t}))return[];const d=e.get(p.c_),l=a.getValue("editor.foldingStrategy",{resource:t}),c={get limit(){return a.getValue("editor.foldingMaximumRegions",{resource:t})},update:(e,t)=>{}},h=new w.aI(s,d,c);let u=h;if("indentation"!==l){const e=G.getFoldingRangeProviders(n,s);e.length&&(u=new D.e(s,e,(()=>{}),c,h))}const f=yield u.compute(o.T.None),m=[];try{if(f)for(let e=0;e<f.length;e++){const t=f.getType(e);m.push({start:f.getStartLineNumber(e),end:f.getEndLineNumber(e),kind:t?g.AD.fromValue(t):void 0})}return m}finally{u.dispose()}}))}))},29824:(e,t,i)=>{i.d(t,{Iy:()=>u,f5:()=>g,fF:()=>_});var n=i(87159),o=i(43232),r=i(13101),s=i(26511),a=i(24999),d=i(31708),l=i(58023),c=i(75246);const h=(0,a.P6G)("editor.foldBackground",{light:(0,a.ZnX)(a.hEj,.3),dark:(0,a.ZnX)(a.hEj,.3),hcDark:null,hcLight:null},(0,s.NC)("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);(0,a.P6G)("editorGutter.foldingControlForeground",{dark:a.XZx,light:a.XZx,hcDark:a.XZx,hcLight:a.XZx},(0,s.NC)("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const u=(0,d.q5)("folding-expanded",n.l.chevronDown,(0,s.NC)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),g=(0,d.q5)("folding-collapsed",n.l.chevronRight,(0,s.NC)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),p=(0,d.q5)("folding-manual-collapsed",g,(0,s.NC)("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),f=(0,d.q5)("folding-manual-expanded",u,(0,s.NC)("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),m={color:(0,l.EN)(h),position:o.F5.Inline};class _{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?_.HIDDEN_RANGE_DECORATION:"never"===this.showFoldingControls?e?this.showFoldingHighlights?_.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:_.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:_.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?_.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:_.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?_.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:_.COLLAPSED_VISUAL_DECORATION:"mouseover"===this.showFoldingControls?i?_.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:_.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?_.MANUALLY_EXPANDED_VISUAL_DECORATION:_.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}_.COLLAPSED_VISUAL_DECORATION=r.qx.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:c.k.asClassName(g)}),_.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=r.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m,isWholeLine:!0,firstLineDecorationClassName:c.k.asClassName(g)}),_.MANUALLY_COLLAPSED_VISUAL_DECORATION=r.qx.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:c.k.asClassName(p)}),_.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=r.qx.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m,isWholeLine:!0,firstLineDecorationClassName:c.k.asClassName(p)}),_.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=r.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0}),_.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=r.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m,isWholeLine:!0}),_.EXPANDED_VISUAL_DECORATION=r.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+c.k.asClassName(u)}),_.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=r.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:c.k.asClassName(u)}),_.MANUALLY_EXPANDED_VISUAL_DECORATION=r.qx.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+c.k.asClassName(f)}),_.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=r.qx.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:c.k.asClassName(f)}),_.NO_CONTROLS_EXPANDED_RANGE_DECORATION=r.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),_.HIDDEN_RANGE_DECORATION=r.qx.register({description:"folding-hidden-range-decoration",stickiness:1})},99572:(e,t,i)=>{i.d(t,{DW:()=>g,HX:()=>c,Ln:()=>h,MW:()=>p,PV:()=>f,R$:()=>d,YT:()=>u,av:()=>s,d8:()=>a,gU:()=>l,hE:()=>_,sK:()=>m});var n=i(68515),o=i(66006),r=i(96215);class s{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new n.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new o.MN(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort(((e,t)=>e.regionIndex-t.regionIndex));const t={};this._decorationProvider.changeDecorations((i=>{let n=0,o=-1,r=-1;const s=e=>{for(;n<e;){const e=this._regions.getEndLineNumber(n),t=this._regions.isCollapsed(n);if(e<=o){const o=0!==this.regions.getSource(n);i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(t,e<=r,o))}t&&e>r&&(r=e),n++}};for(const a of e){const e=a.regionIndex,i=this._editorDecorationIds[e];if(i&&!t[i]){t[i]=!0,s(e);const n=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,n),o=Math.max(o,this._regions.getEndLineNumber(e))}}s(this._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=t=>{for(const i of e)if(!(i.startLineNumber>t.endLineNumber||t.startLineNumber>i.endLineNumber))return!0;return!1};for(let n=0;n<this._regions.length;n++){const e=this._regions.toFoldRange(n);0!==e.source&&i(e)||t.push(e)}this.updatePost(o.MN.fromFoldRanges(t))}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=this._currentFoldedOrManualRanges(t),n=o.MN.sanitizeAndMerge(e,i,this._textModel.getLineCount());this.updatePost(o.MN.fromFoldRanges(n))}updatePost(e){const t=[];let i=-1;for(let n=0,o=e.length;n<o;n++){const o=e.getStartLineNumber(n),r=e.getEndLineNumber(n),s=e.isCollapsed(n),a=0!==e.getSource(n),d={startLineNumber:o,startColumn:this._textModel.getLineMaxColumn(o),endLineNumber:r,endColumn:this._textModel.getLineMaxColumn(r)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(s,r<=i,a)}),s&&r>i&&(i=r)}this._decorationProvider.changeDecorations((e=>this._editorDecorationIds=e.deltaDecorations(this._editorDecorationIds,t))),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(t,i)=>{for(const n of e)if(t<n&&n<=i)return!0;return!1},i=[];for(let n=0,o=this._regions.length;n<o;n++){let e=this.regions.isCollapsed(n);const o=this.regions.getSource(n);if(e||0!==o){const r=this._regions.toFoldRange(n),s=this._textModel.getDecorationRange(this._editorDecorationIds[n]);s&&(e&&t(s.startLineNumber,s.endLineNumber)&&(e=!1),i.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,type:r.type,isCollapsed:e,source:o}))}}return i}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let n=0,o=e.length;n<o;n++){const o=e[n];if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;const r=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:r})}return t.length>0?t:void 0}applyMemento(e){var t,i;if(!Array.isArray(e))return;const n=[],r=this._textModel.getLineCount();for(const o of e){if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>r)continue;const e=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);o.checksum&&e!==o.checksum||n.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:void 0,isCollapsed:null===(t=o.isCollapsed)||void 0===t||t,source:null!==(i=o.source)&&void 0!==i?i:0})}const s=o.MN.sanitizeAndMerge(this._regions,n,r);this.updatePost(o.MN.fromFoldRanges(s))}_getLinesChecksum(e,t){return(0,r.vp)(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let n=this._regions.findRange(e),o=1;for(;n>=0;){const e=this._regions.toRegion(n);t&&!t(e,o)||i.push(e),o++,n=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],n=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let r=n,s=this._regions.length;r<s;r++){const n=this._regions.toRegion(r);if(!(this._regions.getStartLineNumber(r)<o))break;for(;e.length>0&&!n.containedBy(e[e.length-1]);)e.pop();e.push(n),t(n,e.length)&&i.push(n)}}else for(let r=n,s=this._regions.length;r<s;r++){const e=this._regions.toRegion(r);if(!(this._regions.getStartLineNumber(r)<o))break;t&&!t(e)||i.push(e)}return i}}function a(e,t,i){const n=[];for(const o of i){const i=e.getRegionAtLine(o);if(i){const o=!i.isCollapsed;if(n.push(i),t>1){const r=e.getRegionsInside(i,((e,i)=>e.isCollapsed!==o&&i<t));n.push(...r)}}}e.toggleCollapseState(n)}function d(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,n=arguments.length>3?arguments[3]:void 0;const o=[];if(n&&n.length>0)for(const r of n){const n=e.getRegionAtLine(r);if(n&&(n.isCollapsed!==t&&o.push(n),i>1)){const r=e.getRegionsInside(n,((e,n)=>e.isCollapsed!==t&&n<i));o.push(...r)}}else{const n=e.getRegionsInside(null,((e,n)=>e.isCollapsed!==t&&n<i));o.push(...n)}e.toggleCollapseState(o)}function l(e,t,i,n){const o=[];for(const r of n){const n=e.getAllRegionsAtLine(r,((e,n)=>e.isCollapsed!==t&&n<=i));o.push(...n)}e.toggleCollapseState(o)}function c(e,t,i){const n=[];for(const o of i){const i=e.getAllRegionsAtLine(o,(e=>e.isCollapsed!==t));i.length>0&&n.push(i[0])}e.toggleCollapseState(n)}function h(e,t,i,n){const o=e.getRegionsInside(null,((e,o)=>o===t&&e.isCollapsed!==i&&!n.some((t=>e.containsLine(t)))));e.toggleCollapseState(o)}function u(e,t,i){const n=[];for(const r of i){const t=e.getAllRegionsAtLine(r,void 0);t.length>0&&n.push(t[0])}const o=e.getRegionsInside(null,(e=>n.every((t=>!t.containedBy(e)&&!e.containedBy(t)))&&e.isCollapsed!==t));e.toggleCollapseState(o)}function g(e,t,i){const n=e.textModel,o=e.regions,r=[];for(let s=o.length-1;s>=0;s--)if(i!==o.isCollapsed(s)){const e=o.getStartLineNumber(s);t.test(n.getLineContent(e))&&r.push(o.toRegion(s))}e.toggleCollapseState(r)}function p(e,t,i){const n=e.regions,o=[];for(let r=n.length-1;r>=0;r--)i!==n.isCollapsed(r)&&t===n.getType(r)&&o.push(n.toRegion(r));e.toggleCollapseState(o)}function f(e,t){let i=null;const n=t.getRegionAtLine(e);if(null!==n&&(i=n.startLineNumber,e===i)){const e=n.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}function m(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){if(e!==i.startLineNumber)return i.startLineNumber;{const e=i.parentIndex;let n=0;for(-1!==e&&(n=t.regions.getStartLineNumber(i.parentIndex));null!==i;){if(!(i.regionIndex>0))return null;if(i=t.regions.toRegion(i.regionIndex-1),i.startLineNumber<=n)return null;if(i.parentIndex===e)return i.startLineNumber}}}else if(t.regions.length>0)for(i=t.regions.toRegion(t.regions.length-1);null!==i;){if(i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}return null}function _(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){const e=i.parentIndex;let n=0;if(-1!==e)n=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;n=t.regions.getEndLineNumber(t.regions.length-1)}for(;null!==i;){if(!(i.regionIndex<t.regions.length))return null;if(i=t.regions.toRegion(i.regionIndex+1),i.startLineNumber>=n)return null;if(i.parentIndex===e)return i.startLineNumber}}else if(t.regions.length>0)for(i=t.regions.toRegion(0);null!==i;){if(i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}return null}},66006:(e,t,i)=>{i.d(t,{MN:()=>a,Xl:()=>o});const n={0:" ",1:"u",2:"r"},o=16777215,r=4278190080;class s{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return 0!==(this._states[t]&1<<i)}set(e,t){const i=e/32|0,n=e%32,o=this._states[i];this._states[i]=t?o|1<<n:o&~(1<<n)}}class a{constructor(e,t,i){if(e.length!==t.length||e.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new s(e.length),this._userDefinedStates=new s(e.length),this._recoveredStates=new s(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(t,i)=>{const n=e[e.length-1];return this.getStartLineNumber(n)<=t&&this.getEndLineNumber(n)>=i};for(let i=0,n=this._startIndexes.length;i<n;i++){const n=this._startIndexes[i],r=this._endIndexes[i];if(n>o||r>o)throw new Error("startLineNumber or endLineNumber must not exceed "+o);for(;e.length>0&&!t(n,r);)e.pop();const s=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=n+((255&s)<<24),this._endIndexes[i]=r+((65280&s)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&o}getEndLineNumber(e){return this._endIndexes[e]&o}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){1===t?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):2===t?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new d(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&r)>>>24)+((this._endIndexes[e]&r)>>>16);return 65535===t?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return-1;for(;t<i;){const n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]="[".concat(n[this.getSource(t)]).concat(this.isCollapsed(t)?"+":"-","] ").concat(this.getStartLineNumber(t),"/").concat(this.getEndLineNumber(t));return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&o,endLineNumber:this._endIndexes[e]&o,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),n=new Uint32Array(t);let o=[],r=!1;for(let a=0;a<t;a++){const t=e[a];i[a]=t.startLineNumber,n[a]=t.endLineNumber,o.push(t.type),t.type&&(r=!0)}r||(o=void 0);const s=new a(i,n,o);for(let a=0;a<t;a++)e[a].isCollapsed&&s.setCollapsed(a,!0),s.setSource(a,e[a].source);return s}static sanitizeAndMerge(e,t,i){i=null!==i&&void 0!==i?i:Number.MAX_VALUE;const n=(e,t)=>Array.isArray(e)?i=>i<t?e[i]:void 0:i=>i<t?e.toFoldRange(i):void 0,o=n(e,e.length),r=n(t,t.length);let s=0,a=0,d=o(0),l=r(0);const c=[];let h,u=0;const g=[];for(;d||l;){let e;if(l&&(!d||d.startLineNumber>=l.startLineNumber))d&&d.startLineNumber===l.startLineNumber?(1===l.source?e=l:(e=d,e.isCollapsed=l.isCollapsed&&d.endLineNumber===l.endLineNumber,e.source=0),d=o(++s)):(e=l,l.isCollapsed&&0===l.source&&(e.source=2)),l=r(++a);else{let t=a,i=l;for(;;){if(!i||i.startLineNumber>d.endLineNumber){e=d;break}if(1===i.source&&i.endLineNumber>d.endLineNumber)break;i=r(++t)}d=o(++s)}if(e){for(;h&&h.endLineNumber<e.startLineNumber;)h=c.pop();e.endLineNumber>e.startLineNumber&&e.startLineNumber>u&&e.endLineNumber<=i&&(!h||h.endLineNumber>=e.endLineNumber)&&(g.push(e),u=e.startLineNumber,h&&c.push(h),h=e)}}return g}}class d{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}},3493:(e,t,i)=>{i.d(t,{aI:()=>r});var n=i(46430),o=i(66006);class r{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id="indent"}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,o=t&&t.markers;return Promise.resolve(function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a;const r=e.getOptions().tabSize,d=new s(o);let l;i&&(l=new RegExp("(".concat(i.start.source,")|(?:").concat(i.end.source,")")));const c=[],h=e.getLineCount()+1;c.push({indent:-1,endAbove:h,line:h});for(let s=e.getLineCount();s>0;s--){const i=e.getLineContent(s),o=(0,n.q)(i,r);let a,h=c[c.length-1];if(-1!==o){if(l&&(a=i.match(l))){if(!a[1]){c.push({indent:-2,endAbove:s,line:s});continue}{let e=c.length-1;for(;e>0&&-2!==c[e].indent;)e--;if(e>0){c.length=e+1,h=c[e],d.insertFirst(s,h.line,o),h.line=s,h.indent=o,h.endAbove=s;continue}}}if(h.indent>o){do{c.pop(),h=c[c.length-1]}while(h.indent>o);const e=h.endAbove-1;e-s>=1&&d.insertFirst(s,e,o)}h.indent===o?h.endAbove=s:c.push({indent:o,endAbove:s,line:s})}else t&&(h.endAbove=s)}return d.toIndentRanges(e)}(this.editorModel,i,o,this.foldingRangesLimit))}}class s{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>o.Xl||t>o.Xl)return;const n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,n=0;i>=0;i--,n++)e[n]=this._startIndexes[i],t[n]=this._endIndexes[i];return new o.MN(e,t)}{this._foldingRangesLimit.update(this._length,t);let i=0,r=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){const n=this._indentOccurrences[e];if(n){if(n+i>t){r=e;break}i+=n}}const s=e.getOptions().tabSize,a=new Uint32Array(t),d=new Uint32Array(t);for(let o=this._length-1,l=0;o>=0;o--){const c=this._startIndexes[o],h=e.getLineContent(c),u=(0,n.q)(h,s);(u<r||u===r&&i++<t)&&(a[l]=c,d[l]=this._endIndexes[o],l++)}return new o.MN(a,d)}}}const a={limit:5e3,update:()=>{}}},68961:(e,t,i)=>{i.d(t,{e:()=>a});var n=i(33309),o=i(59652),r=i(66006);const s={};class a{constructor(e,t,i,n,r){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=n,this.fallbackRangeProvider=r,this.id="syntax",this.disposables=new o.SL,r&&this.disposables.add(r);for(const o of t)"function"===typeof o.onDidChange&&this.disposables.add(o.onDidChange(i))}compute(e){return function(e,t,i){let o=null;const r=e.map(((e,r)=>Promise.resolve(e.provideFoldingRanges(t,s,i)).then((e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(o)||(o=[]);const i=t.getLineCount();for(const t of e)t.start>0&&t.end>t.start&&t.end<=i&&o.push({start:t.start,end:t.end,rank:r,kind:t.kind})}}),n.Cp)));return Promise.all(r).then((e=>o))}(this.providers,this.editorModel,e).then((t=>{var i,n;if(t){return function(e,t){const i=e.sort(((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i})),n=new d(t);let o;const r=[];for(const s of i)if(o){if(s.start>o.start)if(s.end<=o.end)r.push(o),o=s,n.add(s.start,s.end,s.kind&&s.kind.value,r.length);else{if(s.start>o.end){do{o=r.pop()}while(o&&s.start>o.end);o&&r.push(o),o=s}n.add(s.start,s.end,s.kind&&s.kind.value,r.length)}}else o=s,n.add(s.start,s.end,s.kind&&s.kind.value,r.length);return n.toIndentRanges()}(t,this.foldingRangesLimit)}return null!==(n=null===(i=this.fallbackRangeProvider)||void 0===i?void 0:i.compute(e))&&void 0!==n?n:null}))}dispose(){this.disposables.dispose()}}class d{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,n){if(e>r.Xl||t>r.Xl)return;const o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=n,this._types[o]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new r.MN(e,t,this._types)}{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let r=0;r<this._nestingLevelCounts.length;r++){const n=this._nestingLevelCounts[r];if(n){if(n+t>e){i=r;break}t+=n}}const n=new Uint32Array(e),o=new Uint32Array(e),s=[];for(let r=0,a=0;r<this._length;r++){const d=this._nestingLevels[r];(d<i||d===i&&t++<e)&&(n[a]=this._startIndexes[r],o[a]=this._endIndexes[r],s[a]=this._types[r],a++)}return new r.MN(n,o,s)}}}},44605:(e,t,i)=>{i.r(t);var n=i(33344),o=i(21369),r=i(26511);class s extends n.R6{constructor(){super({id:"editor.action.fontZoomIn",label:r.NC("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){o.C.setZoomLevel(o.C.getZoomLevel()+1)}}class a extends n.R6{constructor(){super({id:"editor.action.fontZoomOut",label:r.NC("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){o.C.setZoomLevel(o.C.getZoomLevel()-1)}}class d extends n.R6{constructor(){super({id:"editor.action.fontZoomReset",label:r.NC("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){o.C.setZoomLevel(0)}}(0,n.Qr)(s),(0,n.Qr)(a),(0,n.Qr)(d)},43940:(e,t,i)=>{i.d(t,{Qq:()=>I,Qs:()=>E,Zg:()=>k,x$:()=>S,xC:()=>D});var n=i(15011),o=i(88648),r=i(21706),s=i(33309),a=i(27502),d=i(91358),l=i(71923),c=i(71308),h=i(67113),u=i(6191),g=i(99924),p=i(55597),f=i(80253),m=i(41776),_=i(60065),v=i(17323),C=i(26511),b=i(39049),y=i(52875),L=i(22046),w=i(90024),N=i(93442),R=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};function k(e){if(!(e=e.filter((e=>e.range))).length)return;let{range:t}=e[0];for(let n=1;n<e.length;n++)t=p.e.plusRange(t,e[n].range);const{startLineNumber:i,endLineNumber:o}=t;i===o?1===e.length?(0,n.Z9)(C.NC("hint11","Made 1 formatting edit on line {0}",i)):(0,n.Z9)(C.NC("hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?(0,n.Z9)(C.NC("hint1n","Made 1 formatting edit between lines {0} and {1}",i,o)):(0,n.Z9)(C.NC("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,o))}function M(e,t,i){const n=[],o=new y.o,r=e.ordered(i);for(const a of r)n.push(a),a.extensionId&&o.add(a.extensionId);const s=t.ordered(i);for(const a of s){if(a.extensionId){if(o.has(a.extensionId))continue;o.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits:(e,t,i)=>a.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,i)})}return n}class D{static setFormatterSelector(e){return{dispose:D._selectors.unshift(e)}}static select(e,t,i){return R(this,void 0,void 0,(function*(){if(0===e.length)return;const n=a.$.first(D._selectors);return n?yield n(e,t,i):void 0}))}}function S(e,t,i,n,o,r){return R(this,void 0,void 0,(function*(){const s=e.get(L.TG),{documentRangeFormattingEditProvider:a}=e.get(w.p),d=(0,u.CL)(t)?t.getModel():t,l=a.ordered(d),c=yield D.select(l,d,n);c&&(o.report(c),yield s.invokeFunction(x,c,t,i,r))}))}function x(e,t,i,n,r){var s,a;return R(this,void 0,void 0,(function*(){const d=e.get(m.p),l=e.get(N.VZ);let c,g;(0,u.CL)(i)?(c=i.getModel(),g=new h.Dl(i,5,void 0,r)):(c=i,g=new h.YQ(i,r));const _=[];let C=0;for(const e of(0,o._2)(n).sort(p.e.compareRangesUsingStarts))C>0&&p.e.areIntersectingOrTouching(_[C-1],e)?_[C-1]=p.e.fromPositions(_[C-1].getStartPosition(),e.getEndPosition()):C=_.push(e);const b=e=>R(this,void 0,void 0,(function*(){var i,n;l.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(i=t.extensionId)||void 0===i?void 0:i.value,e);const o=(yield t.provideDocumentRangeFormattingEdits(c,e,c.getFormattingOptions(),g.token))||[];return l.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(n=t.extensionId)||void 0===n?void 0:n.value,o),o})),y=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce(((e,t)=>p.e.plusRange(e,t.range)),e[0].range);if(!t.some((e=>p.e.intersectRanges(i,e.range))))return!1;for(const n of e)for(const e of t)if(p.e.intersectRanges(n.range,e.range))return!0;return!1},L=[],w=[];try{if("function"===typeof t.provideDocumentRangesFormattingEdits){l.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(s=t.extensionId)||void 0===s?void 0:s.value,_);const e=(yield t.provideDocumentRangesFormattingEdits(c,_,c.getFormattingOptions(),g.token))||[];l.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(a=t.extensionId)||void 0===a?void 0:a.value,e),w.push(e)}else{for(const e of _){if(g.token.isCancellationRequested)return!0;w.push(yield b(e))}for(let e=0;e<_.length;++e)for(let t=e+1;t<_.length;++t){if(g.token.isCancellationRequested)return!0;if(y(w[e],w[t])){const i=p.e.plusRange(_[e],_[t]),n=yield b(i);_.splice(t,1),_.splice(e,1),_.push(i),w.splice(t,1),w.splice(e,1),w.push(n),e=0,t=0}}}for(const e of w){if(g.token.isCancellationRequested)return!0;const t=yield d.computeMoreMinimalEdits(c.uri,e);t&&L.push(...t)}}finally{g.dispose()}if(0===L.length)return!1;if((0,u.CL)(i))v.V.execute(i,L,!0),k(L),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=L,t=new f.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);c.pushEditOperations([t],L.map((e=>({text:e.text,range:p.e.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(p.e.areIntersectingOrTouching(i,t))return[new f.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return!0}))}function I(e,t,i,n,o){return R(this,void 0,void 0,(function*(){const r=e.get(L.TG),s=e.get(w.p),a=(0,u.CL)(t)?t.getModel():t,d=M(s.documentFormattingEditProvider,s.documentRangeFormattingEditProvider,a),l=yield D.select(d,a,i);l&&(n.report(l),yield r.invokeFunction(P,l,t,i,o))}))}function P(e,t,i,n,o){return R(this,void 0,void 0,(function*(){const r=e.get(m.p);let s,a,d;(0,u.CL)(i)?(s=i.getModel(),a=new h.Dl(i,5,void 0,o)):(s=i,a=new h.YQ(i,o));try{const e=yield t.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(d=yield r.computeMoreMinimalEdits(s.uri,e),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!d||0===d.length)return!1;if((0,u.CL)(i))v.V.execute(i,d,2!==n),2!==n&&(k(d),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1));else{const[{range:e}]=d,t=new f.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);s.pushEditOperations([t],d.map((e=>({text:e.text,range:p.e.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(p.e.areIntersectingOrTouching(i,t))return[new f.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return!0}))}function E(e,t,i,n,o,r,a){const d=t.onTypeFormattingEditProvider.ordered(i);return 0===d.length||d[0].autoFormatTriggerCharacters.indexOf(o)<0?Promise.resolve(void 0):Promise.resolve(d[0].provideOnTypeFormattingEdits(i,n,o,r,a)).catch(s.Cp).then((t=>e.computeMoreMinimalEdits(i.uri,t)))}D._selectors=new d.S,b.P.registerCommand("_executeFormatRangeProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return R(this,void 0,void 0,(function*(){const[t,n,a]=i;(0,l.p_)(c.o.isUri(t)),(0,l.p_)(p.e.isIRange(n));const d=e.get(_.S),h=e.get(m.p),u=e.get(w.p),g=yield d.createModelReference(t);try{return function(e,t,i,n,r,a){return R(this,void 0,void 0,(function*(){const d=t.documentRangeFormattingEditProvider.ordered(i);for(const t of d){const d=yield Promise.resolve(t.provideDocumentRangeFormattingEdits(i,n,r,a)).catch(s.Cp);if((0,o.Of)(d))return yield e.computeMoreMinimalEdits(i.uri,d)}}))}(h,u,g.object.textEditorModel,p.e.lift(n),a,r.T.None)}finally{g.dispose()}}))})),b.P.registerCommand("_executeFormatDocumentProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return R(this,void 0,void 0,(function*(){const[t,n]=i;(0,l.p_)(c.o.isUri(t));const a=e.get(_.S),d=e.get(m.p),h=e.get(w.p),u=yield a.createModelReference(t);try{return function(e,t,i,n,r){return R(this,void 0,void 0,(function*(){const a=M(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,i);for(const t of a){const a=yield Promise.resolve(t.provideDocumentFormattingEdits(i,n,r)).catch(s.Cp);if((0,o.Of)(a))return yield e.computeMoreMinimalEdits(i.uri,a)}}))}(d,h,u.object.textEditorModel,n,r.T.None)}finally{u.dispose()}}))})),b.P.registerCommand("_executeFormatOnTypeProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return R(this,void 0,void 0,(function*(){const[t,n,o,s]=i;(0,l.p_)(c.o.isUri(t)),(0,l.p_)(g.L.isIPosition(n)),(0,l.p_)("string"===typeof o);const a=e.get(_.S),d=e.get(m.p),h=e.get(w.p),u=yield a.createModelReference(t);try{return E(d,h,u.object.textEditorModel,g.L.lift(n),o,s,r.T.None)}finally{u.dispose()}}))}))},28201:(e,t,i)=>{i.r(t),i.d(t,{FormatOnType:()=>R});var n=i(88648),o=i(21706),r=i(33309),s=i(99553),a=i(59652),d=i(33344),l=i(3527),c=i(79670),h=i(55597),u=i(90567),g=i(41776),p=i(90024),f=i(43940),m=i(17323),_=i(26511),v=i(39049),C=i(10071),b=i(22046),y=i(94247),L=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},w=function(e,t){return function(i,n){t(i,n,e)}},N=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let R=class{constructor(e,t,i){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._disposables=new a.SL,this._sessionDisposables=new a.SL,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(56)&&this._update()}))),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new c.q;for(const n of t.autoFormatTriggerCharacters)i.add(n.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType((e=>{const t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))})))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),r=new o.A,s=this._editor.onDidChangeModelContent((e=>{if(e.isFlush)return r.cancel(),void s.dispose();for(let t=0,n=e.changes.length;t<n;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return r.cancel(),void s.dispose()}}));(0,f.Qs)(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),r.token).then((e=>{r.token.isCancellationRequested||(0,n.Of)(e)&&(m.V.execute(this._editor,e,!0),(0,f.Zg)(e))})).finally((()=>{s.dispose()}))}};R.ID="editor.contrib.autoFormat",R=L([w(1,p.p),w(2,g.p)],R);let k=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new a.SL,this._callOnModel=new a.SL,this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((e=>{let{range:t}=e;return this._trigger(t)})))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(f.x$,this.editor,e,2,y.Ex.None,o.T.None).catch(r.dL))}};k.ID="editor.contrib.formatOnPaste",k=L([w(1,p.p),w(2,b.TG)],k);class M extends d.R6{constructor(){super({id:"editor.action.formatDocument",label:_.NC("formatDocument.label","Format Document"),alias:"Format Document",precondition:C.Ao.and(u.u.notInCompositeEditor,u.u.writable,u.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:u.u.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return N(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(b.TG),n=e.get(y.ek);yield n.showWhile(i.invokeFunction(f.Qq,t,1,y.Ex.None,o.T.None),250)}}))}}class D extends d.R6{constructor(){super({id:"editor.action.formatSelection",label:_.NC("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:C.Ao.and(u.u.writable,u.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,s.gx)(2089,2084),weight:100},contextMenuOpts:{when:u.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return N(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(b.TG),n=t.getModel(),r=t.getSelections().map((e=>e.isEmpty()?new h.e(e.startLineNumber,1,e.startLineNumber,n.getLineMaxColumn(e.startLineNumber)):e)),s=e.get(y.ek);yield s.showWhile(i.invokeFunction(f.x$,t,r,1,y.Ex.None,o.T.None),250)}))}}(0,d._K)(R.ID,R,2),(0,d._K)(k.ID,k,2),(0,d.Qr)(M),(0,d.Qr)(D),v.P.registerCommand("editor.action.format",(e=>N(void 0,void 0,void 0,(function*(){const t=e.get(l.$).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(v.H);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")}))))},17323:(e,t,i)=>{i.d(t,{V:()=>s});var n=i(95354),o=i(55597),r=i(80134);class s{static _handleEolEdits(e,t){let i;const n=[];for(const o of t)"number"===typeof o.eol&&(i=o.eol),o.range&&"string"===typeof o.text&&n.push(o);return"number"===typeof i&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),n=i.validateRange(t.range);return i.getFullModelRange().equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();const a=r.Z.capture(e),d=s._handleEolEdits(e,t);1===d.length&&s._isFullModelReplaceEdit(e,d[0])?e.executeEdits("formatEditsCommand",d.map((e=>n.h.replace(o.e.lift(e.range),e.text)))):e.executeEdits("formatEditsCommand",d.map((e=>n.h.replaceMove(o.e.lift(e.range),e.text)))),i&&e.pushUndoStop(),a.restoreRelativeVerticalPositionOfCursor(e)}}},12303:(e,t,i)=>{i.r(t),i.d(t,{MarkerController:()=>re,NextMarkerAction:()=>ae});var n=i(87159),o=i(59652),r=i(33344),s=i(3527),a=i(99924),d=i(55597),l=i(90567),c=i(88648),h=i(68515),u=i(91358),g=i(17224),p=i(71308),f=i(73198),m=i(22046),_=i(2115),v=i(53435),C=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},b=function(e,t){return function(i,n){t(i,n,e)}};class y{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let L=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new h.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new o.SL,this._markers=[],this._nextIdx=-1,p.o.isUri(e)?this._resourceFilter=t=>t.toString()===e.toString():e&&(this._resourceFilter=e);const n=this._configService.getValue("problems.sortOrder"),r=(e,t)=>{let i=(0,g.qu)(e.resource.toString(),t.resource.toString());return 0===i&&(i="position"===n?d.e.compareRangesUsingStarts(e,t)||_.ZL.compare(e.severity,t.severity):_.ZL.compare(e.severity,t.severity)||d.e.compareRangesUsingStarts(e,t)),i},s=()=>{this._markers=this._markerService.read({resource:p.o.isUri(e)?e:void 0,severities:_.ZL.Error|_.ZL.Warning|_.ZL.Info}),"function"===typeof e&&(this._markers=this._markers.filter((e=>this._resourceFilter(e.resource)))),this._markers.sort(r)};s(),this._dispoables.add(t.onMarkerChanged((e=>{this._resourceFilter&&!e.some((e=>this._resourceFilter(e)))||(s(),this._nextIdx=-1,this._onDidChange.fire())})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new y(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex((t=>t.resource.toString()===e.uri.toString()));o<0&&(o=(0,c.ry)(this._markers,{resource:e.uri},((e,t)=>(0,g.qu)(e.resource.toString(),t.resource.toString()))),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let i=d.e.lift(this._markers[r]);if(i.isEmpty()){const t=e.getWordAtPosition(i.getStartPosition());t&&(i=new d.e(i.startLineNumber,t.startColumn,i.startLineNumber,t.endColumn))}if(t&&(i.containsPosition(t)||t.isBeforeOrEqual(i.getStartPosition()))){this._nextIdx=r,n=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;const n=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex((t=>t.resource.toString()===e.toString()));if(!(i<0))for(;i<this._markers.length;i++)if(d.e.containsPosition(this._markers[i],t))return new y(this._markers[i],i+1,this._markers.length)}};L=C([b(1,_.lT),b(2,v.Ui)],L);const w=(0,m.yh)("IMarkerNavigationService");let N=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new u.S}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new L(e,this._markerService,this._configService)}};N=C([b(0,_.lT),b(1,v.Ui)],N),(0,f.z)(w,N,1);var R,k=i(26511),M=i(41377),D=i(10071),S=i(31708),x=i(20494),I=i(53307),P=i(57612),E=i(63670),A=i(71823),T=i(80007),F=i(93915),O=i(66495),W=i(41906),U=i(24999),H=i(58023),G=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},B=function(e,t){return function(i,n){t(i,n,e)}};class K{constructor(e,t,i,n,r){this._openerService=n,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new o.SL,this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(x.mu(this._relatedBlock,"click",(e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new I.NB(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((e=>{s.style.left="-".concat(e.scrollLeft,"px"),s.style.top="-".concat(e.scrollTop,"px")}))),this._disposables.add(this._scrollable)}dispose(){(0,o.B9)(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:o}=e;let r=((null===t||void 0===t?void 0:t.length)||0)+2;o&&(r+="string"===typeof o?o.length:o.value.length);const s=(0,g.uq)(i);this._lines=s.length,this._longestLineLength=0;for(const c of s)this._longestLineLength=Math.max(c.length+r,this._longestLineLength);x.PO(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const c of s)a=document.createElement("div"),a.innerText=c,""===c&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||o){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(o)if("string"===typeof o){const t=document.createElement("span");t.innerText="(".concat(o,")"),t.classList.add("code"),e.appendChild(t)}else{this._codeLink=x.$("a.code-link"),this._codeLink.setAttribute("href","".concat(o.target.toString())),this._codeLink.onclick=e=>{this._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};x.R3(this._codeLink,x.$("span")).innerText=o.value,e.appendChild(this._codeLink)}}if(x.PO(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,c.Of)(n)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop="".concat(Math.floor(.66*this._editor.getOption(66)),"px"),this._lines+=1;for(const t of n){const i=document.createElement("div"),n=document.createElement("a");n.classList.add("filename"),n.innerText="".concat(this._labelService.getUriBasenameLabel(t.resource),"(").concat(t.startLineNumber,", ").concat(t.startColumn,"): "),n.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(n,t);const o=document.createElement("span");o.innerText=t.message,i.appendChild(n),i.appendChild(o),this._lines+=1,e.appendChild(i)}}const d=this._editor.getOption(50),l=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:l,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height="".concat(e,"px"),this._scrollable.getDomNode().style.width="".concat(t,"px"),this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case _.ZL.Error:t=k.NC("Error","Error");break;case _.ZL.Warning:t=k.NC("Warning","Warning");break;case _.ZL.Info:t=k.NC("Info","Info");break;case _.ZL.Hint:t=k.NC("Hint","Hint")}let i=k.NC("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){const t=n.getLineContent(e.startLineNumber);i="".concat(t,", ").concat(i)}return i}}let V=R=class extends A.vk{constructor(e,t,i,n,r,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new o.SL,this._onDidSelectRelatedInformation=new h.Q5,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=_.ZL.Warning,this._backgroundColor=P.Il.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(ee);let t=j,i=q;this._severity===_.ZL.Warning?(t=z,i=$):this._severity===_.ZL.Info&&(t=J,i=Y);const n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(A.IH),secondaryHeadingColor:e.getColor(A.R7)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun((e=>this.editor.focus())));const t=[],i=this._menuService.createMenu(R.TitleMenu,this._contextKeyService);(0,T.vr)(i,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),i.dispose()}_fillTitleIcon(e){this._icon=x.R3(e,x.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new K(this._container,this.editor,(e=>this._onDidSelectRelatedInformation.fire(e)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const n=d.e.lift(e),o=this.editor.getPosition(),r=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(r,this.computeRequiredHeight());const s=this.editor.getModel();if(s){const e=i>1?k.NC("problems","{0} of {1} problems",t,i):k.NC("change","{0} of {1} problem",t,i);this.setTitle((0,E.EZ)(s.uri),e)}this._icon.className="codicon ".concat(W.j.className(_.ZL.toSeverity(this._severity))),this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height="".concat(e,"px")}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};V.TitleMenu=new M.eH("gotoErrorTitleMenu"),V=R=G([B(1,H.XE),B(2,O.v4),B(3,M.co),B(4,m.TG),B(5,D.i6),B(6,F.e)],V);const Z=(0,U.kwl)(U.lXJ,U.b6y),X=(0,U.kwl)(U.uoC,U.pW3),Q=(0,U.kwl)(U.c63,U.T83),j=(0,U.P6G)("editorMarkerNavigationError.background",{dark:Z,light:Z,hcDark:U.lRK,hcLight:U.lRK},k.NC("editorMarkerNavigationError","Editor marker navigation widget error color.")),q=(0,U.P6G)("editorMarkerNavigationError.headerBackground",{dark:(0,U.ZnX)(j,.1),light:(0,U.ZnX)(j,.1),hcDark:null,hcLight:null},k.NC("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),z=(0,U.P6G)("editorMarkerNavigationWarning.background",{dark:X,light:X,hcDark:U.lRK,hcLight:U.lRK},k.NC("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),$=(0,U.P6G)("editorMarkerNavigationWarning.headerBackground",{dark:(0,U.ZnX)(z,.1),light:(0,U.ZnX)(z,.1),hcDark:"#0C141F",hcLight:(0,U.ZnX)(z,.2)},k.NC("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),J=(0,U.P6G)("editorMarkerNavigationInfo.background",{dark:Q,light:Q,hcDark:U.lRK,hcLight:U.lRK},k.NC("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Y=(0,U.P6G)("editorMarkerNavigationInfo.headerBackground",{dark:(0,U.ZnX)(J,.1),light:(0,U.ZnX)(J,.1),hcDark:null,hcLight:null},k.NC("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),ee=(0,U.P6G)("editorMarkerNavigation.background",{dark:U.cvW,light:U.cvW,hcDark:U.cvW,hcLight:U.cvW},k.NC("editorMarkerNavigationBackground","Editor marker navigation widget background."));var te,ie=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ne=function(e,t){return function(i,n){t(i,n,e)}},oe=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let re=te=class{static get(e){return e.getContribution(te.ID)}constructor(e,t,i,n,r){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=r,this._sessionDispoables=new o.SL,this._editor=e,this._widgetVisible=le.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(V,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((e=>{var t,i,n;(null===(t=this._model)||void 0===t?void 0:t.selected)&&d.e.containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(n=this._model)||void 0===n||n.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:d.e.lift(e).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new a.L(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var i,n;return oe(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const o=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(o.move(e,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);r&&(null===(i=te.get(r))||void 0===i||i.close(),null===(n=te.get(r))||void 0===n||n.nagivate(e,t))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}))}};re.ID="editor.contrib.markerController",re=te=ie([ne(1,w),ne(2,D.i6),ne(3,s.$),ne(4,m.TG)],re);class se extends r.R6{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){var i;return oe(this,void 0,void 0,(function*(){t.hasModel()&&(null===(i=re.get(t))||void 0===i||i.nagivate(this._next,this._multiFile))}))}}class ae extends se{constructor(){super(!0,!1,{id:ae.ID,label:ae.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:578,weight:100},menuOpts:{menuId:V.TitleMenu,title:ae.LABEL,icon:(0,S.q5)("marker-navigation-next",n.l.arrowDown,k.NC("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}ae.ID="editor.action.marker.next",ae.LABEL=k.NC("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class de extends se{constructor(){super(!1,!1,{id:de.ID,label:de.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:1602,weight:100},menuOpts:{menuId:V.TitleMenu,title:de.LABEL,icon:(0,S.q5)("marker-navigation-previous",n.l.arrowUp,k.NC("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}de.ID="editor.action.marker.prev",de.LABEL=k.NC("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");(0,r._K)(re.ID,re,4),(0,r.Qr)(ae),(0,r.Qr)(de),(0,r.Qr)(class extends se{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:k.NC("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:66,weight:100},menuOpts:{menuId:M.eH.MenubarGoMenu,title:k.NC({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}),(0,r.Qr)(class extends se{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:k.NC("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:1090,weight:100},menuOpts:{menuId:M.eH.MenubarGoMenu,title:k.NC({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}});const le=new D.uy("markersNavigationVisible",!1),ce=r._l.bindToContribution(re.get);(0,r.fK)(new ce({id:"closeMarkersNavigation",precondition:le,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:l.u.focus,primary:9,secondary:[1033]}}))},68546:(e,t,i)=>{i.r(t),i.d(t,{DefinitionAction:()=>te,SymbolNavigationAction:()=>ee,SymbolNavigationAnchor:()=>Y});var n=i(15011),o=i(37368),r=i(99553),s=i(71923),a=i(71308),d=i(67113),l=i(6191),c=i(33344),h=i(3527),u=i(84017),g=i(99924),p=i(55597),f=i(90567),m=i(76958),_=i(64935),v=i(11788),C=i(68515),b=i(59652),y=i(63670),L=i(26511),w=i(10071),N=i(73198),R=i(22046),k=i(85149),M=i(16482),D=i(37709),S=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},x=function(e,t){return function(i,n){t(i,n,e)}};const I=new w.uy("hasSymbols",!1,(0,L.NC)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),P=(0,R.yh)("ISymbolNavigationService");let E=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=I.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new A(this._editorService),n=i.onDidChange((e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const n=i.getModel(),o=i.getPosition();if(!n||!o)return;let r=!1,s=!1;for(const a of t.references)if((0,y.Xy)(a.uri,n.uri))r=!0,s=s||p.e.containsPosition(a.range,o);else if(r)break;r&&s||this.reset()}));this._currentState=(0,b.F8)(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:p.e.collapseToStart(t.range),selectionRevealType:3}},e).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?(0,L.NC)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,L.NC)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};E=S([x(0,w.i6),x(1,h.$),x(2,D.lT),x(3,k.d)],E),(0,N.z)(P,E,1),(0,c.fK)(new class extends c._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:I,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(P).revealNext(t)}}),M.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:I,primary:9,handler(e){e.get(P).reset()}});let A=class{constructor(e){this._listener=new Map,this._disposables=new b.SL,this._onDidChange=new C.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,b.B9)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,b.F8)(e.onDidChangeCursorPosition((t=>this._onDidChange.fire({editor:e}))),e.onDidChangeModelContent((t=>this._onDidChange.fire({editor:e})))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};A=S([x(0,h.$)],A);var T,F,O,W,U,H,G,B,K=i(88556),V=i(71823),Z=i(41377),X=i(39049),Q=i(94247),j=i(38013),q=i(90024),z=i(27502),$=i(11528),J=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};Z.BH.appendMenuItem(Z.eH.EditorContext,{submenu:Z.eH.EditorContextPeek,title:L.NC("peek.submenu","Peek"),group:"navigation",order:100});class Y{static is(e){return!(!e||"object"!==typeof e)&&(e instanceof Y||!(!g.L.isIPosition(e.position)||!e.model))}constructor(e,t){this.model=e,this.position=t}}class ee extends c.x1{static all(){return ee._allSymbolNavigationCommands.values()}static _patchConfig(e){const t=Object.assign(Object.assign({},e),{f1:!0});if(t.menu)for(const i of z.$.wrap(t.menu))i.id!==Z.eH.EditorContext&&i.id!==Z.eH.EditorContextPeek||(i.when=w.Ao.and(e.precondition,i.when));return t}constructor(e,t){super(ee._patchConfig(t)),this.configuration=e,ee._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,r){if(!t.hasModel())return Promise.resolve(void 0);const s=e.get(D.lT),a=e.get(h.$),l=e.get(Q.ek),c=e.get(P),u=e.get(q.p),g=e.get(R.TG),p=t.getModel(),f=t.getPosition(),m=Y.is(i)?i:new Y(p,f),_=new d.Dl(t,5),v=(0,o.eP)(this._getLocationModel(u,m.model,m.position,_.token),_.token).then((e=>J(this,void 0,void 0,(function*(){var o;if(!e||_.token.isCancellationRequested)return;let s;if((0,n.Z9)(e.ariaMessage),e.referenceAt(p.uri,f)){const e=this._getAlternativeCommand(t);!ee._activeAlternativeCommands.has(e)&&ee._allSymbolNavigationCommands.has(e)&&(s=ee._allSymbolNavigationCommands.get(e))}const d=e.references.length;if(0===d){if(!this.configuration.muteMessage){const e=p.getWordAtPosition(f);null===(o=K.O.get(t))||void 0===o||o.showMessage(this._getNoResultFoundMessage(e),f)}}else{if(1!==d||!s)return this._onResult(a,c,t,e,r);ee._activeAlternativeCommands.add(this.desc.id),g.invokeFunction((e=>s.runEditorCommand(e,t,i,r).finally((()=>{ee._activeAlternativeCommands.delete(this.desc.id)}))))}}))),(e=>{s.error(e)})).finally((()=>{_.dispose()}));return l.showWhile(v,250),v}_onResult(e,t,i,n,o){return J(this,void 0,void 0,(function*(){const r=this._getGoToPreference(i);if(i instanceof u.H||!(this.configuration.openInPeek||"peek"===r&&n.references.length>1)){const s=n.firstReference(),a=n.references.length>1&&"gotoAndPeek"===r,d=yield this._openReference(i,e,s,this.configuration.openToSide,!a);a&&d?this._openInPeek(d,n,o):n.dispose(),"goto"===r&&t.put(s)}else this._openInPeek(i,n,o)}))}_openReference(e,t,i,n,o){return J(this,void 0,void 0,(function*(){let r;if((0,m.vx)(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const s=yield t.openCodeEditor({resource:i.uri,options:{selection:p.e.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,n);if(s){if(o){const e=s.getModel(),t=s.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{s.getModel()===e&&t.clear()}),350)}return s}}))}_openInPeek(e,t,i){const n=_.J.get(e);n&&e.hasModel()?n.toggleWidget(null!==i&&void 0!==i?i:e.getSelection(),(0,o.PG)((e=>Promise.resolve(t))),this.configuration.openInPeek):t.dispose()}}ee._allSymbolNavigationCommands=new Map,ee._activeAlternativeCommands=new Set;class te extends ee{_getLocationModel(e,t,i,n){return J(this,void 0,void 0,(function*(){return new v.oQ(yield(0,j.nD)(e.definitionProvider,t,i,n),L.NC("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?L.NC("noResultWord","No definition found for '{0}'",e.word):L.NC("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}(0,Z.r1)(((T=class extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:T.id,title:{value:L.NC("actions.goToDecl.label","Go to Definition"),original:"Go to Definition",mnemonicTitle:L.NC({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:w.Ao.and(f.u.hasDefinitionProvider,f.u.isInWalkThroughSnippet.toNegated()),keybinding:[{when:f.u.editorTextFocus,primary:70,weight:100},{when:w.Ao.and(f.u.editorTextFocus,$.Pf),primary:2118,weight:100}],menu:[{id:Z.eH.EditorContext,group:"navigation",order:1.1},{id:Z.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),X.P.registerCommandAlias("editor.action.goToDeclaration",T.id)}}).id="editor.action.revealDefinition",T)),(0,Z.r1)(((F=class extends te{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:F.id,title:{value:L.NC("actions.goToDeclToSide.label","Open Definition to the Side"),original:"Open Definition to the Side"},precondition:w.Ao.and(f.u.hasDefinitionProvider,f.u.isInWalkThroughSnippet.toNegated()),keybinding:[{when:f.u.editorTextFocus,primary:(0,r.gx)(2089,70),weight:100},{when:w.Ao.and(f.u.editorTextFocus,$.Pf),primary:(0,r.gx)(2089,2118),weight:100}]}),X.P.registerCommandAlias("editor.action.openDeclarationToTheSide",F.id)}}).id="editor.action.revealDefinitionAside",F)),(0,Z.r1)(((O=class extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:O.id,title:{value:L.NC("actions.previewDecl.label","Peek Definition"),original:"Peek Definition"},precondition:w.Ao.and(f.u.hasDefinitionProvider,V.Jy.notInPeekEditor,f.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:f.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:Z.eH.EditorContextPeek,group:"peek",order:2}}),X.P.registerCommandAlias("editor.action.previewDeclaration",O.id)}}).id="editor.action.peekDefinition",O));class ie extends ee{_getLocationModel(e,t,i,n){return J(this,void 0,void 0,(function*(){return new v.oQ(yield(0,j.zq)(e.declarationProvider,t,i,n),L.NC("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?L.NC("decl.noResultWord","No declaration found for '{0}'",e.word):L.NC("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}(0,Z.r1)(((W=class extends ie{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:W.id,title:{value:L.NC("actions.goToDeclaration.label","Go to Declaration"),original:"Go to Declaration",mnemonicTitle:L.NC({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:w.Ao.and(f.u.hasDeclarationProvider,f.u.isInWalkThroughSnippet.toNegated()),menu:[{id:Z.eH.EditorContext,group:"navigation",order:1.3},{id:Z.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?L.NC("decl.noResultWord","No declaration found for '{0}'",e.word):L.NC("decl.generic.noResults","No declaration found")}}).id="editor.action.revealDeclaration",W)),(0,Z.r1)(class extends ie{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:{value:L.NC("actions.peekDecl.label","Peek Declaration"),original:"Peek Declaration"},precondition:w.Ao.and(f.u.hasDeclarationProvider,V.Jy.notInPeekEditor,f.u.isInWalkThroughSnippet.toNegated()),menu:{id:Z.eH.EditorContextPeek,group:"peek",order:3}})}});class ne extends ee{_getLocationModel(e,t,i,n){return J(this,void 0,void 0,(function*(){return new v.oQ(yield(0,j.L3)(e.typeDefinitionProvider,t,i,n),L.NC("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?L.NC("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):L.NC("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}(0,Z.r1)(((U=class extends ne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:U.ID,title:{value:L.NC("actions.goToTypeDefinition.label","Go to Type Definition"),original:"Go to Type Definition",mnemonicTitle:L.NC({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:w.Ao.and(f.u.hasTypeDefinitionProvider,f.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:f.u.editorTextFocus,primary:0,weight:100},menu:[{id:Z.eH.EditorContext,group:"navigation",order:1.4},{id:Z.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}).ID="editor.action.goToTypeDefinition",U)),(0,Z.r1)(((H=class extends ne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:H.ID,title:{value:L.NC("actions.peekTypeDefinition.label","Peek Type Definition"),original:"Peek Type Definition"},precondition:w.Ao.and(f.u.hasTypeDefinitionProvider,V.Jy.notInPeekEditor,f.u.isInWalkThroughSnippet.toNegated()),menu:{id:Z.eH.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",H));class oe extends ee{_getLocationModel(e,t,i,n){return J(this,void 0,void 0,(function*(){return new v.oQ(yield(0,j.f4)(e.implementationProvider,t,i,n),L.NC("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?L.NC("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):L.NC("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}(0,Z.r1)(((G=class extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:G.ID,title:{value:L.NC("actions.goToImplementation.label","Go to Implementations"),original:"Go to Implementations",mnemonicTitle:L.NC({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:w.Ao.and(f.u.hasImplementationProvider,f.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:f.u.editorTextFocus,primary:2118,weight:100},menu:[{id:Z.eH.EditorContext,group:"navigation",order:1.45},{id:Z.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}).ID="editor.action.goToImplementation",G)),(0,Z.r1)(((B=class extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:B.ID,title:{value:L.NC("actions.peekImplementation.label","Peek Implementations"),original:"Peek Implementations"},precondition:w.Ao.and(f.u.hasImplementationProvider,V.Jy.notInPeekEditor,f.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:f.u.editorTextFocus,primary:3142,weight:100},menu:{id:Z.eH.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",B));class re extends ee{_getNoResultFoundMessage(e){return e?L.NC("references.no","No references found for '{0}'",e.word):L.NC("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}(0,Z.r1)(class extends re{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{value:L.NC("goToReferences.label","Go to References"),original:"Go to References",mnemonicTitle:L.NC({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:w.Ao.and(f.u.hasReferenceProvider,V.Jy.notInPeekEditor,f.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:f.u.editorTextFocus,primary:1094,weight:100},menu:[{id:Z.eH.EditorContext,group:"navigation",order:1.45},{id:Z.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}_getLocationModel(e,t,i,n){return J(this,void 0,void 0,(function*(){return new v.oQ(yield(0,j.aA)(e.referenceProvider,t,i,!0,n),L.NC("ref.title","References"))}))}}),(0,Z.r1)(class extends re{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:{value:L.NC("references.action.label","Peek References"),original:"Peek References"},precondition:w.Ao.and(f.u.hasReferenceProvider,V.Jy.notInPeekEditor,f.u.isInWalkThroughSnippet.toNegated()),menu:{id:Z.eH.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i,n){return J(this,void 0,void 0,(function*(){return new v.oQ(yield(0,j.aA)(e.referenceProvider,t,i,!1,n),L.NC("ref.title","References"))}))}});class se extends ee{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:{value:L.NC("label.generic","Go to Any Symbol"),original:"Go to Any Symbol"},precondition:w.Ao.and(V.Jy.notInPeekEditor,f.u.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i,n){return J(this,void 0,void 0,(function*(){return new v.oQ(this._references,L.NC("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&L.NC("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}X.P.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:a.o},{name:"position",description:"The position at which to start",constraint:g.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,n,o,r,d)=>J(void 0,void 0,void 0,(function*(){(0,s.p_)(a.o.isUri(t)),(0,s.p_)(g.L.isIPosition(i)),(0,s.p_)(Array.isArray(n)),(0,s.p_)("undefined"===typeof o||"string"===typeof o),(0,s.p_)("undefined"===typeof d||"boolean"===typeof d);const c=e.get(h.$),u=yield c.openCodeEditor({resource:t},c.getFocusedCodeEditor());if((0,l.CL)(u))return u.setPosition(i),u.revealPositionInCenterIfOutsideViewport(i,0),u.invokeWithinContext((e=>{const t=new class extends se{_getNoResultFoundMessage(e){return r||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(r),openInPeek:Boolean(d),openToSide:!1},n,o);e.get(R.TG).invokeFunction(t.run.bind(t),u)}))}))}),X.P.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:a.o},{name:"position",description:"The position at which to start",constraint:g.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,n,o)=>J(void 0,void 0,void 0,(function*(){e.get(X.H).executeCommand("editor.action.goToLocations",t,i,n,o,void 0,!0)}))}),X.P.registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{(0,s.p_)(a.o.isUri(t)),(0,s.p_)(g.L.isIPosition(i));const n=e.get(q.p),r=e.get(h.$);return r.openCodeEditor({resource:t},r.getFocusedCodeEditor()).then((e=>{if(!(0,l.CL)(e)||!e.hasModel())return;const t=_.J.get(e);if(!t)return;const r=(0,o.PG)((t=>(0,j.aA)(n.referenceProvider,e.getModel(),g.L.lift(i),!1,t).then((e=>new v.oQ(e,L.NC("ref.title","References")))))),s=new p.e(i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(s,r,!1))}))}}),X.P.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations")},38013:(e,t,i)=>{i.d(t,{L3:()=>p,aA:()=>f,f4:()=>g,nD:()=>h,zq:()=>u});var n=i(88648),o=i(21706),r=i(33309),s=i(33344),a=i(90024),d=i(11788),l=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};function c(e,t,i,o){return l(this,void 0,void 0,(function*(){const s=i.ordered(e).map((i=>Promise.resolve(o(i,e,t)).then(void 0,(e=>{(0,r.Cp)(e)})))),a=yield Promise.all(s);return(0,n.kX)(a.flat())}))}function h(e,t,i,n){return c(t,i,e,((e,t,i)=>e.provideDefinition(t,i,n)))}function u(e,t,i,n){return c(t,i,e,((e,t,i)=>e.provideDeclaration(t,i,n)))}function g(e,t,i,n){return c(t,i,e,((e,t,i)=>e.provideImplementation(t,i,n)))}function p(e,t,i,n){return c(t,i,e,((e,t,i)=>e.provideTypeDefinition(t,i,n)))}function f(e,t,i,n,o){return c(t,i,e,((e,t,i)=>l(this,void 0,void 0,(function*(){const r=yield e.provideReferences(t,i,{includeDeclaration:!0},o);if(!n||!r||2!==r.length)return r;const s=yield e.provideReferences(t,i,{includeDeclaration:!1},o);return s&&1===s.length?s:r}))))}function m(e){return l(this,void 0,void 0,(function*(){const t=yield e(),i=new d.oQ(t,""),n=i.references.map((e=>e.link));return i.dispose(),n}))}(0,s.sb)("_executeDefinitionProvider",((e,t,i)=>{const n=h(e.get(a.p).definitionProvider,t,i,o.T.None);return m((()=>n))})),(0,s.sb)("_executeTypeDefinitionProvider",((e,t,i)=>{const n=p(e.get(a.p).typeDefinitionProvider,t,i,o.T.None);return m((()=>n))})),(0,s.sb)("_executeDeclarationProvider",((e,t,i)=>{const n=u(e.get(a.p).declarationProvider,t,i,o.T.None);return m((()=>n))})),(0,s.sb)("_executeReferenceProvider",((e,t,i)=>{const n=f(e.get(a.p).referenceProvider,t,i,!1,o.T.None);return m((()=>n))})),(0,s.sb)("_executeImplementationProvider",((e,t,i)=>{const n=g(e.get(a.p).implementationProvider,t,i,o.T.None);return m((()=>n))}))},77112:(e,t,i)=>{i.d(t,{yN:()=>h});var n=i(68515),o=i(59652),r=i(44352);function s(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=s(e.event,t.triggerModifier),this.hasSideBySideModifier=s(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class d{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=s(e,t.triggerModifier)}}class l{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function c(e){return"altKey"===e?r.dz?new l(57,"metaKey",6,"altKey"):new l(5,"ctrlKey",6,"altKey"):r.dz?new l(6,"altKey",57,"metaKey"):new l(6,"altKey",5,"ctrlKey")}class h extends o.JT{constructor(e,t){var i;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new n.Q5),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new n.Q5),this.onExecute=this._onExecute.event,this._onCancel=this._register(new n.Q5),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=null!==(i=null===t||void 0===t?void 0:t.extractLineNumberFromMouseEvent)&&void 0!==i?i:e=>e.target.position?e.target.position.lineNumber:0,this._opts=c(this._editor.getOption(77)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((e=>{if(e.hasChanged(77)){const e=c(this._editor.getOption(77));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((e=>this._onEditorMouseMove(new a(e,this._opts))))),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(new a(e,this._opts))))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(new a(e,this._opts))))),this._register(this._editor.onKeyDown((e=>this._onEditorKeyDown(new d(e,this._opts))))),this._register(this._editor.onKeyUp((e=>this._onEditorKeyUp(new d(e,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((e=>this._onDidChangeCursorSelection(e)))),this._register(this._editor.onDidChangeModel((e=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()})))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},31301:(e,t,i)=>{i.r(t),i.d(t,{GotoDefinitionAtPositionEditorContribution:()=>N});var n,o=i(37368),r=i(33309),s=i(41045),a=i(59652),d=i(67113),l=i(33344),c=i(55597),h=i(62281),u=i(60065),g=i(77112),p=i(71823),f=i(26511),m=i(10071),_=i(68546),v=i(38013),C=i(90024),b=i(13101),y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},L=function(e,t){return function(i,n){t(i,n,e)}},w=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let N=n=class{constructor(e,t,i,n){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=n,this.toUnhook=new a.SL,this.toUnhookForKeyboard=new a.SL,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const o=new g.yN(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown((e=>{let[t,i]=e;this.startFindDefinitionFromMouse(t,null!==i&&void 0!==i?i:void 0)}))),this.toUnhook.add(o.onExecute((e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).catch((e=>{(0,r.dL)(e)})).finally((()=>{this.removeLinkDecorations()}))}))),this.toUnhook.add(o.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}static get(e){return e.getContribution(n.ID)}startFindDefinitionFromCursor(e){return w(this,void 0,void 0,(function*(){yield this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}))}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;return w(this,void 0,void 0,(function*(){this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,void this.removeLinkDecorations();if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return;this.currentWordAtPosition=i;const n=new d.yy(this.editor,15);let a;this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,o.PG)((t=>this.findDefinition(e,t)));try{a=yield this.previousPromise}catch(h){return void(0,r.dL)(h)}if(!a||!a.length||!n.validate(this.editor))return void this.removeLinkDecorations();const l=a[0].originSelectionRange?c.e.lift(a[0].originSelectionRange):new c.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);if(a.length>1){let e=l;for(const{originSelectionRange:t}of a)t&&(e=c.e.plusRange(e,t));this.addDecoration(e,(new s.W5).appendText(f.NC("multipleResults","Click to show {0} definitions.",a.length)))}else{const e=a[0];if(!e.uri)return;this.textModelResolverService.createModelReference(e.uri).then((t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:i}}=t,{startLineNumber:n}=e.range;if(n<1||n>i.getLineCount())return void t.dispose();const o=this.getPreviewValue(i,n,e),r=this.languageService.guessLanguageIdByFilepathOrFirstLine(i.uri);this.addDecoration(l,o?(new s.W5).appendCodeblock(r||"",o):void 0),t.dispose()}))}}))}getPreviewValue(e,t,i){let o=i.range;o.endLineNumber-o.startLineNumber>=n.MAX_SOURCE_PREVIEW_LINES&&(o=this.getPreviewRangeBasedOnIndentation(e,t));return this.stripIndentationFromPreviewRange(e,t,o)}stripIndentationFromPreviewRange(e,t,i){let n=e.getLineFirstNonWhitespaceColumn(t);for(let o=t+1;o<i.endLineNumber;o++){const t=e.getLineFirstNonWhitespaceColumn(o);n=Math.min(n,t)}return e.getValueInRange(i).replace(new RegExp("^\\s{".concat(n-1,"}"),"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),o=Math.min(e.getLineCount(),t+n.MAX_SOURCE_PREVIEW_LINES);let r=t+1;for(;r<o;r++){if(i===e.getLineFirstNonWhitespaceColumn(r))break}return new c.e(t,1,r+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&6===e.target.type&&!((null===(i=e.target.detail.injectedText)||void 0===i?void 0:i.options)instanceof b.HS)&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?(0,v.nD)(this.languageFeaturesService.definitionProvider,i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext((e=>{const i=!t&&this.editor.getOption(87)&&!this.isInPeekEditor(e);return new _.DefinitionAction({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e)}))}isInPeekEditor(e){const t=e.get(m.i6);return p.Jy.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};N.ID="editor.contrib.gotodefinitionatposition",N.MAX_SOURCE_PREVIEW_LINES=8,N=n=y([L(1,u.S),L(2,h.O),L(3,C.p)],N),(0,l._K)(N.ID,N,2)},64935:(e,t,i)=>{i.d(t,{J:()=>ue});var n,o=i(37368),r=i(33309),s=i(99553),a=i(59652),d=i(3527),l=i(99924),c=i(55597),h=i(71823),u=i(26511),g=i(39049),p=i(53435),f=i(10071),m=i(22046),_=i(16482),v=i(21629),C=i(37709),b=i(53733),y=i(11788),L=i(20494),w=i(28649),N=i(57612),R=i(68515),k=i(46946),M=i(63670),D=i(84017),S=i(13101),x=i(41598),I=i(75414),P=i(62281),E=i(60065),A=i(41429),T=i(2664),F=i(3801),O=i(23897),W=i(85149),U=i(93915),H=i(27795),G=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},B=function(e,t){return function(i,n){t(i,n,e)}};let K=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof y.oQ||e instanceof y.F2}getChildren(e){if(e instanceof y.oQ)return e.groups;if(e instanceof y.F2)return e.resolve(this._resolverService).then((e=>e.children));throw new Error("bad tree")}};K=G([B(0,E.S)],K);class V{getHeight(){return 23}getTemplateId(e){return e instanceof y.F2?j.id:z.id}}let Z=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof y.WX){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return(0,M.EZ)(e.uri)}};Z=G([B(0,W.d)],Z);class X{getId(e){return e instanceof y.WX?e.id:e.uri}}let Q=class extends a.JT{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new F.g(i,{supportHighlights:!0})),this.badge=new A.Z(L.R3(i,L.$(".count")),{},H.ku),e.appendChild(i)}set(e,t){const i=(0,M.XX)(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat((0,u.NC)("referencesCount","{0} references",n)):this.badge.setTitleFormat((0,u.NC)("referenceCount","{0} reference",n))}};Q=G([B(1,U.e)],Q);let j=n=class{constructor(e){this._instantiationService=e,this.templateId=n.id}renderTemplate(e){return this._instantiationService.createInstance(Q,e)}renderElement(e,t,i){i.set(e.element,(0,O.mB)(e.filterData))}disposeTemplate(e){e.dispose()}};j.id="FileReferencesRenderer",j=n=G([B(0,m.TG)],j);class q{constructor(e){this.label=new T.q(e)}set(e,t){var i;const n=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(n&&n.value){const{value:e,highlight:i}=n;t&&!O.CL.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,(0,O.mB)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set("".concat((0,M.EZ)(e.uri),":").concat(e.range.startLineNumber+1,":").concat(e.range.startColumn+1))}}class z{constructor(){this.templateId=z.id}renderTemplate(e){return new q(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}z.id="OneReferenceRenderer";class ${getWidgetAriaLabel(){return(0,u.NC)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var J=i(58023),Y=i(2018),ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},te=function(e,t){return function(i,n){t(i,n,e)}},ie=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class ne{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new a.SL,this._callOnModelChange=new a.SL,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(const t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const t=[],i=[];for(let n=0,o=e.children.length;n<o;n++){const o=e.children[n];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:ne.DecorationOptions}),i.push(n))}this._editor.changeDecorations((n=>{const o=n.deltaDecorations([],t);for(let t=0;t<o.length;t++)this._decorations.set(o[t],e.children[i[t]])}))}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,n]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!c.e.equalsRange(o,n.range)){if(c.e.spansMultipleLines(o))r=!0;else{n.range.endColumn-n.range.startColumn!==o.endColumn-o.startColumn&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}ne.DecorationOptions=S.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class oe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch(n){}return{ratio:t||.7,heightInLines:i||18}}}class re extends v.ls{}let se=class extends h.vk{constructor(e,t,i,n,o,r,s,d,l,c,h,u){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=s,this._uriLabel=d,this._undoRedoService=l,this._keybindingService=c,this._languageService=h,this._languageConfigurationService=u,this._disposeOnNewModel=new a.SL,this._callOnDispose=new a.SL,this._onDidSelectReference=new R.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new L.Ro(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,a.B9)(this._preview),(0,a.B9)(this._previewNotAvailableMessage),(0,a.B9)(this._tree),(0,a.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(h.SC)||N.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(h.KY)||N.Il.transparent,primaryHeadingColor:e.getColor(h.IH),secondaryHeadingColor:e.getColor(h.R7)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=L.R3(e,L.$("div.messages")),L.Cp(this._messageContainer),this._splitView=new w.z(e,{orientation:1}),this._previewContainer=L.R3(e,L.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(D.H,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),L.Cp(this._previewContainer),this._previewNotAvailableMessage=new S.yO(u.NC("missingPreviewMessage","no preview available"),I.bd,S.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=L.R3(e,L.$("div.ref-tree.inline"));const t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new $,keyboardNavigationLabelProvider:this._instantiationService.createInstance(Z),identityProvider:new X,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:h.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(L.mu(this._treeContainer,"keydown",(e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(re,"ReferencesWidget",this._treeContainer,new V,[this._instantiationService.createInstance(j),this._instantiationService.createInstance(z)],this._instantiationService.createInstance(K),t),this._splitView.addView({onDidChange:R.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},w.M.Distribute),this._splitView.addView({onDidChange:R.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height="".concat(this._dim.height,"px"),this._treeContainer.style.width="".concat(e,"px"),this._tree.layout(this._dim.height,e)}},w.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));const i=(e,t)=>{e instanceof y.WX&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),L.Cp(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new L.Ro(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then((()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))}))}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=u.NC("noResults","No results"),L.$Z(this._messageContainer),Promise.resolve(void 0)):(L.Cp(this._messageContainer),this._decorationsManager=new ne(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((e=>this._tree.rerender(e)))),this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),L.$Z(this._treeContainer),L.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof y.WX?e:e instanceof y.F2&&e.children.length>0?e.children[0]:void 0}revealReference(e){return ie(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return ie(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==k.lg.inMemory?this.setTitle((0,M.Hx)(e.uri),this._uriLabel.getUriLabel((0,M.XX)(e.uri))):this.setTitle(u.NC("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const n=yield i;if(!this._model)return void n.dispose();(0,a.B9)(this._previewModelReference);const o=n.object;if(o){const t=this._preview.getModel()===o.textEditorModel?0:1,i=c.e.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}))}};se=ee([te(3,J.XE),te(4,E.S),te(5,m.TG),te(6,h.Fw),te(7,U.e),te(8,Y.tJ),te(9,W.d),te(10,P.O),te(11,x.c_)],se);var ae,de=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},le=function(e,t){return function(i,n){t(i,n,e)}},ce=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};const he=new f.uy("referenceSearchVisible",!1,u.NC("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let ue=ae=class{static get(e){return e.getContribution(ae.ID)}constructor(e,t,i,n,o,r,s,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=r,this._storageService=s,this._configurationService=d,this._disposables=new a.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=he.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const o="peekViewLayout",r=oe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(se,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(u.NC("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((e=>{const{element:t,kind:n}=e;if(t)switch(n){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t,!0):this.openReference(t,!1,!0)}})));const s=++this._requestIdPool;t.then((t=>{var i;if(s===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(u.NC("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const t=this._editor.getModel().uri,i=new l.L(e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then((()=>{this._widget&&"editor"===this._editor.getOption(86)&&this._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(e=>{this._notificationService.error(e)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return ce(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(n),yield this._gotoReference(n,!1),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return ce(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var i;null===(i=this._widget)||void 0===i||i.hide(),this._ignoreModelChangeEvent=!0;const n=c.e.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:n,selectionSource:"code.jump",pinned:t}},this._editor).then((e=>{var t;if(this._ignoreModelChangeEvent=!1,e&&this._widget)if(this._editor===e)this._widget.show(n),this._widget.focusOnReferenceTree();else{const i=ae.get(e),r=this._model.clone();this.closeWidget(),e.focus(),null===i||void 0===i||i.toggleWidget(n,(0,o.PG)((e=>Promise.resolve(r))),null!==(t=this._peekMode)&&void 0!==t&&t)}else this.closeWidget()}),(e=>{this._ignoreModelChangeEvent=!1,(0,r.dL)(e)}))}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,selectionSource:"code.jump",pinned:i}},this._editor,t)}};function ge(e,t){const i=(0,h.rc)(e);if(!i)return;const n=ue.get(i);n&&t(n)}ue.ID="editor.contrib.referencesController",ue=ae=de([le(2,f.i6),le(3,d.$),le(4,C.lT),le(5,m.TG),le(6,b.Uy),le(7,p.Ui)],ue),_.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,s.gx)(2089,60),when:f.Ao.or(he,h.Jy.inPeekEditor),handler(e){ge(e,(e=>{e.changeFocusBetweenPreviewAndReferences()}))}}),_.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:f.Ao.or(he,h.Jy.inPeekEditor),handler(e){ge(e,(e=>{e.goToNextOrPreviousReference(!0)}))}}),_.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:f.Ao.or(he,h.Jy.inPeekEditor),handler(e){ge(e,(e=>{e.goToNextOrPreviousReference(!1)}))}}),g.P.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),g.P.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),g.P.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),g.P.registerCommand("closeReferenceSearch",(e=>ge(e,(e=>e.closeWidget())))),_.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:f.Ao.and(h.Jy.inPeekEditor,f.Ao.not("config.editor.stablePeek"))}),_.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:f.Ao.and(he,f.Ao.not("config.editor.stablePeek"))}),_.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:f.Ao.and(he,v.CQ,v.PS.negate(),v.uJ.negate()),handler(e){var t;const i=null===(t=e.get(v.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof y.WX&&ge(e,(e=>e.revealReference(i[0])))}}),_.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:f.Ao.and(he,v.CQ,v.PS.negate(),v.uJ.negate()),handler(e){var t;const i=null===(t=e.get(v.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof y.WX&&ge(e,(e=>e.openReference(i[0],!0,!0)))}}),g.P.registerCommand("openReference",(e=>{var t;const i=null===(t=e.get(v.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof y.WX&&ge(e,(e=>e.openReference(i[0],!1,!0)))}))},11788:(e,t,i)=>{i.d(t,{F2:()=>f,WX:()=>g,oQ:()=>m});var n=i(33309),o=i(68515),r=i(74427),s=i(59652),a=i(72741),d=i(63670),l=i(17224),c=i(55597),h=i(26511),u=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=r.a.nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,h.NC)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,(0,d.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn):(0,h.NC)("aria.oneReference","in {0} on line {1} at column {2}",(0,d.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class p{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:o,endLineNumber:r,endColumn:s}=e,a=i.getWordUntilPosition({lineNumber:n,column:o-t}),d=new c.e(n,a.startColumn,n,o),l=new c.e(r,s,r,1073741824),h=i.getValueInRange(d).replace(/^\s+/,""),u=i.getValueInRange(e);return{value:h+u+i.getValueInRange(l).replace(/\s+$/,""),highlight:{start:h.length,end:h.length+u.length}}}}class f{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new a.Y9}dispose(){(0,s.B9)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?(0,h.NC)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,d.EZ)(this.uri),this.uri.fsPath):(0,h.NC)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,d.EZ)(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(const i of this.children)if(!this._previews.has(i.uri))try{const t=yield e.createModelReference(i.uri);this._previews.set(i.uri,new p(t))}catch(t){(0,n.dL)(t)}return this}))}}class m{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new o.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let n;e.sort(m._compareReferences);for(const o of e)if(n&&d.SF.isEqual(n.uri,o.uri,!0)||(n=new f(this,o.uri),this.groups.push(n)),0===n.children.length||0!==m._compareReferences(o,n.children[n.children.length-1])){const e=new g(i===o,n,o,(e=>this._onDidChangeReferenceRange.fire(e)));this.references.push(e),n.children.push(e)}}dispose(){(0,s.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new m(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,h.NC)("aria.result.0","No results found"):1===this.references.length?(0,h.NC)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,h.NC)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,h.NC)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let n=i.children.indexOf(e);const o=i.children.length,r=i.parent.groups.length;return 1===r||t&&n+1<o||!t&&n>0?(n=t?(n+1)%o:(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map(((i,n)=>({idx:n,prefixLen:l.Mh(i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)}))).sort(((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0))[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&c.e.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return d.SF.compare(e.uri,t.uri)||c.e.compareRangesUsingStarts(e.range,t.range)}}}}]);
//# sourceMappingURL=monaco-editor-vendor.1b18e904.992e9787.js.map