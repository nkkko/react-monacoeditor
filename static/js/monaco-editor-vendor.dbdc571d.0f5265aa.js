"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[658],{13605:(e,t,i)=>{i.d(t,{Hb:()=>I,hT:()=>S,mR:()=>N});var n=i(20494),o=i(94591),s=i(88648),r=i(59652),a=i(99924),l=i(55597),c=i(13101),d=i(76958),u=i(79562),h=i(26404),g=i(10071),p=i(22046),m=i(85149),v=i(64008),f=i(37368),_=i(90567),b=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},C=function(e,t){return function(i,n){t(i,n,e)}};const w=n.$;let S=class e extends r.JT{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._widget=this._register(this._instantiationService.createInstance(I,this._editor)),this._currentResult=null,this._participants=[];for(const n of h.Ae.getAll())this._participants.push(this._instantiationService.createInstance(n,this._editor));this._participants.sort(((e,t)=>e.hoverOrdinal-t.hoverOrdinal)),this._computer=new D(this._editor,this._participants),this._hoverOperation=this._register(new u.H(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{if(!this._computer.anchor)return;const t=e.hasLoadingMessage?this._addLoadingMessage(e.value):e.value;this._withResult(new y(this._computer.anchor,t,e.isComplete))}))),this._register(n.mu(this._widget.getDomNode(),"keydown",(e=>{e.equals(9)&&this.hide()}))),this._register(d.RW.onDidChange((()=>{this._widget.position&&this._currentResult&&(this._widget.clear(),this._setCurrentResult(this._currentResult))})))}maybeShowAt(e){const t=[];for(const n of this._participants)if(n.suggestHoverAnchor){const i=n.suggestHoverAnchor(e);i&&t.push(i)}const i=e.target;if(6===i.type&&t.push(new h.Qj(0,i.range,e.event.posx,e.event.posy)),7===i.type){const n=this._editor.getOption(48).typicalHalfwidthCharacterWidth/2;!i.detail.isAfterLines&&"number"===typeof i.detail.horizontalDistanceToText&&i.detail.horizontalDistanceToText<n&&t.push(new h.Qj(0,i.range,e.event.posx,e.event.posy))}return 0===t.length?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort(((e,t)=>t.priority-e.priority)),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,i,n){this._startShowingOrUpdateHover(new h.Qj(0,e,void 0,void 0),t,i,n,null)}_startShowingOrUpdateHover(e,t,i,n,o){if(!this._widget.position||!this._currentResult)return!!e&&(this._startHoverOperationIfNecessary(e,t,i,n,!1),!0);return this._editor.getOption(58).sticky&&o&&this._widget.isMouseGettingCloser(o.event.posx,o.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,i,n,!0),!0):e?!(!e||!this._currentResult.anchor.equals(e))||(e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,n,!1),!0)):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,n,o){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=n,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=o,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&0===e.messages.length&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}isColorPickerVisible(){return this._widget.isColorPickerVisible}isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}isVisible(){return this._widget.isVisible}containsNode(e){return!!e&&this._widget.getDomNode().contains(e)}_addLoadingMessage(e){if(this._computer.anchor)for(const t of this._participants)if(t.createLoadingMessage){const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._widget.position&&this._currentResult&&this._currentResult.isComplete){if(!e.isComplete)return;if(this._computer.insistOnKeepingHoverVisible&&0===e.messages.length)return}this._setCurrentResult(e)}_renderMessages(t,i){const{showAtPosition:n,showAtSecondaryPosition:o,highlightRange:s}=e.computeHoverRanges(this._editor,t.range,i),a=new r.SL,l=a.add(new N(this._keybindingService)),c=document.createDocumentFragment();let d=null;const u={fragment:c,statusBar:l,setColorPicker:e=>d=e,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const e of this._participants){const t=i.filter((t=>t.owner===e));t.length>0&&a.add(e.renderHoverParts(u,t))}const h=i.some((e=>e.isBeforeContent));if(l.hasContent&&c.appendChild(l.hoverElement),c.hasChildNodes()){if(s){const t=this._editor.createDecorationsCollection();t.set([{range:s,options:e._DECORATION_OPTIONS}]),a.add((0,r.OF)((()=>{t.clear()})))}this._widget.showAt(c,new x(d,n,o,this._editor.getOption(58).above,this._computer.shouldFocus,this._computer.source,h,t.initialMousePosX,t.initialMousePosY,a))}else a.dispose()}static computeHoverRanges(e,t,i){let n=1;if(e.hasModel()){const i=e._getViewModel(),o=i.coordinatesConverter,s=o.convertModelRangeToViewRange(t),r=new a.L(s.startLineNumber,i.getLineMinColumn(s.startLineNumber));n=o.convertViewPositionToModelPosition(r).column}const o=t.startLineNumber;let s=t.startColumn,r=i[0].range,c=null;for(const a of i)r=l.e.plusRange(r,a.range),a.range.startLineNumber===o&&a.range.endLineNumber===o&&(s=Math.max(Math.min(s,a.range.startColumn),n)),a.forceShowAtRange&&(c=a.range);return{showAtPosition:c?c.getStartPosition():new a.L(o,t.startColumn),showAtSecondaryPosition:c?c.getStartPosition():new a.L(o,s),highlightRange:r}}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}escape(){this._widget.escape()}};S._DECORATION_OPTIONS=c.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),S=b([C(1,p.TG),C(2,m.d)],S);class y{constructor(e,t,i){this.anchor=e,this.messages=t,this.isComplete=i}filter(e){const t=this.messages.filter((t=>t.isValidForHoverAnchor(e)));return t.length===this.messages.length?this:new L(this,this.anchor,t,this.isComplete)}}class L extends y{constructor(e,t,i,n){super(t,i,n),this.original=e}filter(e){return this.original.filter(e)}}class x{constructor(e,t,i,n,o,s,r,a,l,c){this.colorPicker=e,this.showAtPosition=t,this.showAtSecondaryPosition=i,this.preferAbove=n,this.stoleFocus=o,this.source=s,this.isBeforeContent=r,this.initialMousePosX=a,this.initialMousePosY=l,this.disposables=c,this.closestMouseDistance=void 0}}let I=class e extends r.JT{get position(){var e,t;return null!==(t=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition)&&void 0!==t?t:null}get isColorPickerVisible(){var e;return Boolean(null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)}get isVisibleFromKeyboard(){var e;return 1===(null===(e=this._visibleData)||void 0===e?void 0:e.source)}get isVisible(){var e;return null!==(e=this._hoverVisibleKey.get())&&void 0!==e&&e}constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=_.u.hoverVisible.bindTo(this._contextKeyService),this._hoverFocusedKey=_.u.hoverFocused.bindTo(this._contextKeyService),this._hover=this._register(new o.c),this._focusTracker=this._register(n.go(this.getDomNode())),this._horizontalScrollingBy=30,this._visibleData=null,this._register(this._editor.onDidLayoutChange((()=>this._layout()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(48)&&this._updateFont()}))),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this),this._register(this._focusTracker.onDidFocus((()=>{this._hoverFocusedKey.set(!0)}))),this._register(this._focusTracker.onDidBlur((()=>{this._hoverFocusedKey.set(!1)})))}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return e.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;!e&&this._contextKeyService.getContextKeyValue(v._y.Visible.key)&&(e=!0);const t=this._visibleData.isBeforeContent?3:void 0;return{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,preference:e?[1,2]:[2,1],positionAffinity:t}}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if("undefined"===typeof this._visibleData.initialMousePosX||"undefined"===typeof this._visibleData.initialMousePosY)return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;const i=n.i(this.getDomNode());"undefined"===typeof this._visibleData.closestMouseDistance&&(this._visibleData.closestMouseDistance=T(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,i.left,i.top,i.width,i.height));const o=T(e,t,i.left,i.top,i.width,i.height);return!(o>this._visibleData.closestMouseDistance+4)&&(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,o),!0)}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(48);this._hover.contentsDomNode.style.fontSize="".concat(t,"px"),this._hover.contentsDomNode.style.lineHeight="".concat(i/t),this._hover.contentsDomNode.style.maxHeight="".concat(e,"px"),this._hover.contentsDomNode.style.maxWidth="".concat(Math.max(.66*this._editor.getLayoutInfo().width,500),"px")}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}showAt(e,t){var i;this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),null===(i=t.colorPicker)||void 0===i||i.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){const e="".concat(this._hover.scrollbar.options.horizontalScrollbarSize,"px");this._hover.contentsDomNode.style.paddingBottom!==e&&(this._hover.contentsDomNode.style.paddingBottom=e,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(48);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(48);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-this._horizontalScrollingBy})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+this._horizontalScrollingBy})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}escape(){this._editor.focus()}};I.ID="editor.contrib.contentHoverWidget",I=b([C(1,g.i6)],I);let N=class extends r.JT{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=w("div.hover-row.status-bar"),this.actionsElement=n.R3(this.hoverElement,w("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(o.S.render(this.actionsElement,e,i))}append(e){const t=n.R3(this.actionsElement,e);return this._hasContent=!0,t}};N=b([C(0,m.d)],N);class D{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(1!==t.type&&!t.supportsMarkerHover)return[];const i=e.getModel(),n=t.range.startLineNumber;if(n>i.getLineCount())return[];const o=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter((e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===n?e.range.startColumn:1,s=e.range.endLineNumber===n?e.range.endColumn:o;if(e.options.showIfCollapsed){if(i>t.range.startColumn+1||t.range.endColumn-1>s)return!1}else if(i>t.range.startColumn||t.range.endColumn>s)return!1;return!0}))}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return f.Aq.EMPTY;const i=D._getLineDecorations(this._editor,t);return f.Aq.merge(this._participants.map((n=>n.computeAsync?n.computeAsync(t,i,e):f.Aq.EMPTY)))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=D._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return(0,s.kX)(t)}}function T(e,t,i,n,o,s){const r=i+o/2,a=n+s/2,l=Math.max(Math.abs(e-r)-o/2,0),c=Math.max(Math.abs(t-a)-s/2,0);return Math.sqrt(l*l+c*c)}},69545:(e,t,i)=>{i.d(t,{R8:()=>d});var n=i(37368),o=i(21706),s=i(33309),r=i(33344),a=i(90024),l=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class c{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}function d(e,t,i,o){const r=e.ordered(t).map(((e,n)=>function(e,t,i,n,o){return l(this,void 0,void 0,(function*(){try{const s=yield Promise.resolve(e.provideHover(i,n,o));if(s&&function(e){const t="undefined"!==typeof e.range,i="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&i}(s))return new c(e,s,t)}catch(r){(0,s.Cp)(r)}}))}(e,n,t,i,o)));return n.Aq.fromPromises(r).coalesce()}(0,r.sb)("_executeHoverProvider",((e,t,i)=>function(e,t,i,n){return d(e,t,i,n).map((e=>e.hover)).toPromise()}(e.get(a.p).hoverProvider,t,i,o.T.None)))},43967:(e,t,i)=>{i.r(t),i.d(t,{ModesHoverController:()=>Y});var n=i(99553),o=i(59652),s=i(33344),r=i(55597),a=i(90567),l=i(62281),c=i(31301),d=i(13605),u=i(20494),h=i(88648),g=i(41045),p=i(90239),m=i(79562),v=i(94591);const f=u.$;class _ extends o.JT{constructor(e,t,i){super(),this._renderDisposeables=this._register(new o.SL),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new v.c),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new p.$({editor:this._editor},t,i)),this._computer=new b(this._editor),this._hoverOperation=this._register(new m.H(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{this._withResult(e.value)}))),this._register(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(48)&&this._updateFont()}))),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return _.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const n of t){const e=f("div.hover-row.markdown-hover"),t=u.R3(e,f("div.hover-contents")),o=this._renderDisposeables.add(this._markdownRenderer.render(n.value));t.appendChild(o.element),i.appendChild(e)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),o=this._editor.getOption(64),s=i-n-(this._hover.containerDomNode.clientHeight-o)/2;this._hover.containerDomNode.style.left="".concat(t.glyphMarginLeft+t.glyphMarginWidth,"px"),this._hover.containerDomNode.style.top="".concat(Math.max(Math.round(s),0),"px")}}_.ID="editor.contrib.modesGlyphHoverWidget";class b{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}constructor(e){this._editor=e,this._lineNumber=-1}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const n of t){if(!n.options.glyphMarginClassName)continue;const t=n.options.glyphMarginHoverMessage;t&&!(0,g.CP)(t)&&i.push(...(0,h._2)(t).map(e))}return i}}var C=i(26511),w=i(22046),S=i(66495),y=i(24999),L=i(58023),x=i(26404),I=i(51118),N=i(37368),D=i(33309),T=i(63670),k=i(90024),R=i(98837),M=i(19381),P=i(3817),O=i(10829),A=i(12303),E=i(2115),H=i(94247),V=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t){return function(i,n){t(i,n,e)}};const W=u.$;class F{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const K={type:1,filter:{include:O.yN.QuickFix},triggerAction:O.aQ.QuickFixHover};let B=class{constructor(e,t,i,n){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=n,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),s=[];for(const a of t){const t=a.range.startLineNumber===n?a.range.startColumn:1,l=a.range.endLineNumber===n?a.range.endColumn:o,c=this._markerDecorationsService.getMarker(i.uri,a);if(!c)continue;const d=new r.e(e.range.startLineNumber,t,e.range.startLineNumber,l);s.push(new F(this,d,c))}return s}renderHoverParts(e,t){if(!t.length)return o.JT.None;const i=new o.SL;t.forEach((t=>e.fragment.appendChild(this.renderMarkerHover(t,i))));const n=1===t.length?t[0]:t.sort(((e,t)=>E.ZL.compare(e.marker.severity,t.marker.severity)))[0];return this.renderMarkerStatusbar(e,n,i),i}renderMarkerHover(e,t){const i=W("div.hover-row"),n=u.R3(i,W("div.marker.hover-contents")),{source:o,message:s,code:r,relatedInformation:a}=e.marker;this._editor.applyFontInfo(n);const l=u.R3(n,W("span"));if(l.style.whiteSpace="pre-wrap",l.innerText=s,o||r)if(r&&"string"!==typeof r){const e=W("span");if(o){u.R3(e,W("span")).innerText=o}const i=u.R3(e,W("a.code-link"));i.setAttribute("href",r.target.toString()),t.add(u.nm(i,"click",(e=>{this._openerService.open(r.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));u.R3(i,W("span")).innerText=r.value;const s=u.R3(n,e);s.style.opacity="0.6",s.style.paddingLeft="6px"}else{const e=u.R3(n,W("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=o&&r?"".concat(o,"(").concat(r,")"):o||"(".concat(r,")")}if((0,h.Of)(a))for(const{message:c,resource:d,startLineNumber:h,startColumn:g}of a){const e=u.R3(n,W("div"));e.style.marginTop="8px";const i=u.R3(e,W("a"));i.innerText="".concat((0,T.EZ)(d),"(").concat(h,", ").concat(g,"): "),i.style.cursor="pointer",t.add(u.nm(i,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(d,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:h,startColumn:g}}}).catch(D.dL)})));const o=u.R3(e,W("span"));o.innerText=c,this._editor.applyFontInfo(o)}return i}renderMarkerStatusbar(e,t,i){if(t.marker.severity!==E.ZL.Error&&t.marker.severity!==E.ZL.Warning&&t.marker.severity!==E.ZL.Info||e.statusBar.addAction({label:C.NC("view problem","View Problem"),commandId:A.NextMarkerAction.ID,run:()=>{var i;e.hide(),null===(i=A.MarkerController.get(this._editor))||void 0===i||i.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(88)){const n=e.statusBar.append(W("div"));this.recentMarkerCodeActionsInfo&&(E.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===E.H0.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=C.NC("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?o.JT.None:i.add((0,N.Vg)((()=>n.textContent=C.NC("checkingForQuickFixes","Checking for quick fixes...")),200));n.textContent||(n.textContent=String.fromCharCode(160));const r=this.getCodeActions(t.marker);i.add((0,o.OF)((()=>r.cancel()))),r.then((r=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:r.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return r.dispose(),void(n.textContent=C.NC("noQuickFixes","No quick fixes available"));n.style.display="none";let a=!1;i.add((0,o.OF)((()=>{a||r.dispose()}))),e.statusBar.addAction({label:C.NC("quick fixes","Quick Fix..."),commandId:M.cz,run:t=>{a=!0;const i=P.G.get(this._editor),n=u.i(t);e.hide(),null===i||void 0===i||i.showCodeActions(K,r,{x:n.left,y:n.top,width:n.width,height:n.height})}})}),D.dL)}}getCodeActions(e){return(0,N.PG)((t=>(0,M.aI)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new r.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),K,H.Ex.None,t)))}};B=V([U(1,R.i),U(2,S.v4),U(3,k.p)],B);var z=i(91900),j=i(85149),q=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Q=function(e,t){return function(i,n){t(i,n,e)}};let Y=class e{static get(t){return t.getContribution(e.ID)}constructor(e,t,i,n,s){this._editor=e,this._instantiationService=t,this._openerService=i,this._languageService=n,this._keybindingService=s,this._toUnhook=new o.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((e=>{e.hasChanged(58)&&(this._unhookEvents(),this._hookEvents())}))}_hookEvents(){const e=this._editor.getOption(58);this._isHoverEnabled=e.enabled,this._isHoverSticky=e.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._toUnhook.add(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))):(this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._toUnhook.add(this._editor.onMouseLeave((e=>this._onEditorMouseLeave(e)))),this._toUnhook.add(this._editor.onDidChangeModel((()=>this._hideWidgets()))),this._toUnhook.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target;9!==t.type||t.detail!==d.Hb.ID?12===t.type&&t.detail===_.ID||(12!==t.type&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t;const i=e.event.browserEvent.relatedTarget;(null===(t=this._contentWidget)||void 0===t?void 0:t.containsNode(i))||this._hideWidgets()}_onEditorMouseMove(e){var t,i,n,o,s,r,a,l;const c=e.target;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===c.type&&c.detail===d.Hb.ID)return;if(this._isHoverSticky&&(null===(t=this._contentWidget)||void 0===t?void 0:t.containsNode(null===(i=e.event.browserEvent.view)||void 0===i?void 0:i.document.activeElement))&&!(null===(o=null===(n=e.event.browserEvent.view)||void 0===n?void 0:n.getSelection())||void 0===o?void 0:o.isCollapsed))return;if(!this._isHoverSticky&&9===c.type&&c.detail===d.Hb.ID&&(null===(s=this._contentWidget)||void 0===s?void 0:s.isColorPickerVisible()))return;if(this._isHoverSticky&&12===c.type&&c.detail===_.ID)return;if(this._isHoverSticky&&(null===(r=this._contentWidget)||void 0===r?void 0:r.isVisibleFromKeyboard()))return;if(!this._isHoverEnabled)return void this._hideWidgets();if(!this._getOrCreateContentWidget().maybeShowAt(e))return 2===c.type&&c.position?(null===(l=this._contentWidget)||void 0===l||l.hide(),this._glyphWidget||(this._glyphWidget=new _(this._editor,this._languageService,this._openerService)),void this._glyphWidget.startShowingAt(c.position.lineNumber)):void this._hideWidgets();null===(a=this._glyphWidget)||void 0===a||a.hide()}_onKeyDown(e){var t;if(!this._editor.hasModel())return;const i=this._keybindingService.softDispatch(e,this._editor.getDomNode()),n=1===i.kind||2===i.kind&&"editor.action.showHover"===i.commandId&&(null===(t=this._contentWidget)||void 0===t?void 0:t.isVisible());5===e.keyCode||6===e.keyCode||57===e.keyCode||4===e.keyCode||n||this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||z.QG.dropDownVisible||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(d.hT,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,i,n)}focus(){var e;null===(e=this._contentWidget)||void 0===e||e.focus()}scrollUp(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollUp()}scrollDown(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollDown()}scrollLeft(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollLeft()}scrollRight(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollRight()}pageUp(){var e;null===(e=this._contentWidget)||void 0===e||e.pageUp()}pageDown(){var e;null===(e=this._contentWidget)||void 0===e||e.pageDown()}goToTop(){var e;null===(e=this._contentWidget)||void 0===e||e.goToTop()}goToBottom(){var e;null===(e=this._contentWidget)||void 0===e||e.goToBottom()}escape(){var e;null===(e=this._contentWidget)||void 0===e||e.escape()}isHoverVisible(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isVisible()}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};Y.ID="editor.contrib.hover",Y=q([Q(1,w.TG),Q(2,S.v4),Q(3,l.O),Q(4,j.d)],Y);class G extends s.R6{constructor(){super({id:"editor.action.showHover",label:C.NC({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse.","If the hover is already visible, it will take focus."]},"Show or Focus Hover"),description:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if when triggered with the keyboard, the hover should take focus immediately.",type:"boolean",default:!1}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:a.u.editorTextFocus,primary:(0,n.gx)(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const n=Y.get(t);if(!n)return;const o=t.getPosition(),s=new r.e(o.lineNumber,o.column,o.lineNumber,o.column),a=2===t.getOption(2)||!!(null===i||void 0===i?void 0:i.focus);n.isHoverVisible()?n.focus():n.showContentHover(s,1,1,a)}}class J extends s.R6{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:C.NC({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const i=Y.get(t);if(!i)return;const n=t.getPosition();if(!n)return;const o=new r.e(n.lineNumber,n.column,n.lineNumber,n.column),s=c.GotoDefinitionAtPositionEditorContribution.get(t);if(!s)return;s.startFindDefinitionFromCursor(n).then((()=>{i.showContentHover(o,1,1,!0)}))}}class Z extends s.R6{constructor(){super({id:"editor.action.scrollUpHover",label:C.NC({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:16,weight:100}})}run(e,t){const i=Y.get(t);i&&i.scrollUp()}}class $ extends s.R6{constructor(){super({id:"editor.action.scrollDownHover",label:C.NC({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:18,weight:100}})}run(e,t){const i=Y.get(t);i&&i.scrollDown()}}class X extends s.R6{constructor(){super({id:"editor.action.scrollLeftHover",label:C.NC({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:15,weight:100}})}run(e,t){const i=Y.get(t);i&&i.scrollLeft()}}class ee extends s.R6{constructor(){super({id:"editor.action.scrollRightHover",label:C.NC({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:17,weight:100}})}run(e,t){const i=Y.get(t);i&&i.scrollRight()}}class te extends s.R6{constructor(){super({id:"editor.action.pageUpHover",label:C.NC({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:11,secondary:[528],weight:100}})}run(e,t){const i=Y.get(t);i&&i.pageUp()}}class ie extends s.R6{constructor(){super({id:"editor.action.pageDownHover",label:C.NC({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:12,secondary:[530],weight:100}})}run(e,t){const i=Y.get(t);i&&i.pageDown()}}class ne extends s.R6{constructor(){super({id:"editor.action.goToTopHover",label:C.NC({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(e,t){const i=Y.get(t);i&&i.goToTop()}}class oe extends s.R6{constructor(){super({id:"editor.action.goToBottomHover",label:C.NC({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(e,t){const i=Y.get(t);i&&i.goToBottom()}}class se extends s.R6{constructor(){super({id:"editor.action.escapeFocusHover",label:C.NC({key:"escapeFocusHover",comment:["Action that allows to escape from the hover widget with the escape command when the hover widget is focused."]},"Escape Focus Hover"),alias:"Escape Focus Hover",precondition:a.u.hoverFocused,kbOpts:{kbExpr:a.u.hoverFocused,primary:9,weight:100}})}run(e,t){const i=Y.get(t);i&&i.escape()}}(0,s._K)(Y.ID,Y,2),(0,s.Qr)(G),(0,s.Qr)(J),(0,s.Qr)(Z),(0,s.Qr)($),(0,s.Qr)(X),(0,s.Qr)(ee),(0,s.Qr)(te),(0,s.Qr)(ie),(0,s.Qr)(ne),(0,s.Qr)(oe),(0,s.Qr)(se),x.Ae.register(I.D5),x.Ae.register(B),(0,L.Ic)(((e,t)=>{const i=e.getColor(y.CNo);i&&(t.addRule(".monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(i.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-top: 1px solid ".concat(i.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-bottom: 0px solid ".concat(i.transparent(.5),"; }")))}))},79562:(e,t,i)=>{i.d(t,{H:()=>d});var n=i(37368),o=i(33309),s=i(68515),r=i(59652),a=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))},l=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,o){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,o,(t=e[i](t)).done,t.value)}))}}};class c{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}}class d extends r.JT{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new s.Q5),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new n.pY((()=>this._triggerAsyncComputation()),0)),this._secondWaitScheduler=this._register(new n.pY((()=>this._triggerSyncComputation()),0)),this._loadingMessageScheduler=this._register(new n.pY((()=>this._triggerLoadingMessage()),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(58).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,n.zS)((e=>this._computer.computeAsync(e))),(()=>{a(this,void 0,void 0,(function*(){var e,t,i,n;try{try{for(var s,r=!0,a=l(this._asyncIterable);!(e=(s=yield a.next()).done);r=!0){n=s.value,r=!1;const e=n;e&&(this._result.push(e),this._fireResult())}}catch(c){t={error:c}}finally{try{r||e||!(i=a.return)||(yield i.call(a))}finally{if(t)throw t.error}}this._asyncIterableDone=!0,3!==this._state&&4!==this._state||this._setState(0)}catch(d){(0,o.dL)(d)}}))})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){3===this._state&&this._setState(4)}_fireResult(){if(1===this._state||2===this._state)return;const e=0===this._state,t=4===this._state;this._onResult.fire(new c(this._result.slice(0),e,t))}start(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}},26404:(e,t,i)=>{i.d(t,{Ae:()=>s,Qj:()=>n,YM:()=>o});class n{constructor(e,t,i,n){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=n,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class o{constructor(e,t,i,n,o,s){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=n,this.initialMousePosY=o,this.supportsMarkerHover=s,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}const s=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}}},51118:(e,t,i)=>{i.d(t,{D5:()=>w,c:()=>S,hU:()=>C});var n=i(20494),o=i(88648),s=i(37368),r=i(41045),a=i(59652),l=i(90239),c=i(99924),d=i(55597),u=i(62281),h=i(69545),g=i(26511),p=i(53435),m=i(66495),v=i(90024),f=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,n){t(i,n,e)}};const b=n.$;class C{constructor(e,t,i,n,o){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=n,this.ordinal=o}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let w=class{constructor(e,t,i,n,o){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=n,this._languageFeaturesService=o,this.hoverOrdinal=3}createLoadingMessage(e){return new C(this,e.range,[(new r.W5).appendText(g.NC("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,s=i.getLineMaxColumn(n),a=[];let l=1e3;const c=i.getLineLength(n),u=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),h=this._editor.getOption(113),p=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:u});let m=!1;h>=0&&c>h&&e.range.startColumn>=h&&(m=!0,a.push(new C(this,e.range,[{value:g.NC("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,l++))),!m&&"number"===typeof p&&c>=p&&a.push(new C(this,e.range,[{value:g.NC("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,l++));let v=!1;for(const g of t){const t=g.range.startLineNumber===n?g.range.startColumn:1,i=g.range.endLineNumber===n?g.range.endColumn:s,c=g.options.hoverMessage;if(!c||(0,r.CP)(c))continue;g.options.beforeContentClassName&&(v=!0);const u=new d.e(e.range.startLineNumber,t,e.range.startLineNumber,i);a.push(new C(this,u,(0,o._2)(c),v,l++))}return a}computeAsync(e,t,i){if(!this._editor.hasModel()||1!==e.type)return s.Aq.EMPTY;const n=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(n))return s.Aq.EMPTY;const o=new c.L(e.range.startLineNumber,e.range.startColumn);return(0,h.R8)(this._languageFeaturesService.hoverProvider,n,o,i).filter((e=>!(0,r.CP)(e.hover.contents))).map((t=>{const i=t.hover.range?d.e.lift(t.hover.range):e.range;return new C(this,i,t.hover.contents,!1,t.ordinal)}))}renderHoverParts(e,t){return S(e,t,this._editor,this._languageService,this._openerService)}};function S(e,t,i,o,s){t.sort(((e,t)=>e.ordinal-t.ordinal));const c=new a.SL;for(const a of t)for(const t of a.contents){if((0,r.CP)(t))continue;const a=b("div.hover-row.markdown-hover"),d=n.R3(a,b("div.hover-contents")),u=c.add(new l.$({editor:i},o,s));c.add(u.onDidRenderAsync((()=>{d.className="hover-contents code-hover-contents",e.onContentsChanged()})));const h=c.add(u.render(t));d.appendChild(h.element),e.fragment.appendChild(a)}return c}w=f([_(1,u.O),_(2,m.v4),_(3,p.Ui),_(4,v.p)],w)},35925:(e,t,i)=>{i.r(t);var n=i(37368),o=i(33309),s=i(67113),r=i(33344),a=i(55597),l=i(80253),c=i(90567),d=i(13101),u=i(41776),h=i(26511);class g{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new l.Y(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new l.Y(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var p=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,n){t(i,n,e)}};let v=class e{static get(t){return t.getContribution(e.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(t,i){var r;null===(r=this.currentRequest)||void 0===r||r.cancel();const c=this.editor.getSelection(),d=this.editor.getModel();if(!d||!c)return;let u=c;if(u.startLineNumber!==u.endLineNumber)return;const h=new s.yy(this.editor,5),p=d.uri;return this.editorWorkerService.canNavigateValueSet(p)?(this.currentRequest=(0,n.PG)((e=>this.editorWorkerService.navigateValueSet(p,u,i))),this.currentRequest.then((i=>{var s;if(!i||!i.range||!i.value)return;if(!h.validate(this.editor))return;const r=a.e.lift(i.range);let c=i.range;const d=i.value.length-(u.endColumn-u.startColumn);c={startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.startColumn+i.value.length},d>1&&(u=new l.Y(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn+d-1));const p=new g(r,u,i.value);this.editor.pushUndoStop(),this.editor.executeCommand(t,p),this.editor.pushUndoStop(),this.decorations.set([{range:c,options:e.DECORATION}]),null===(s=this.decorationRemover)||void 0===s||s.cancel(),this.decorationRemover=(0,n.Vs)(350),this.decorationRemover.then((()=>this.decorations.clear())).catch(o.dL)})).catch(o.dL)):Promise.resolve(void 0)}};v.ID="editor.contrib.inPlaceReplaceController",v.DECORATION=d.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),v=p([m(1,u.p)],v);class f extends r.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:h.NC("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:c.u.writable,kbOpts:{kbExpr:c.u.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=v.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class _ extends r.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:h.NC("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:c.u.writable,kbOpts:{kbExpr:c.u.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=v.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}(0,r._K)(v.ID,v,4),(0,r.Qr)(f),(0,r.Qr)(_)},63174:(e,t,i)=>{function n(e,t){let i=0;for(let n=0;n<e.length;n++)"\t"===e.charAt(n)?i+=t:i++;return i}function o(e,t,i){e=e<0?0:e;let n="";if(!i){const i=Math.floor(e/t);e%=t;for(let e=0;e<i;e++)n+="\t"}for(let o=0;o<e;o++)n+=" ";return n}i.d(t,{J:()=>o,Y:()=>n})},93519:(e,t,i)=>{i.r(t),i.d(t,{AutoIndentOnPaste:()=>R,AutoIndentOnPasteCommand:()=>k,ChangeIndentationSizeAction:()=>y,ChangeTabDisplaySize:()=>I,DetectIndentation:()=>N,IndentUsingSpaces:()=>x,IndentUsingTabs:()=>L,IndentationToSpacesAction:()=>w,IndentationToSpacesCommand:()=>P,IndentationToTabsAction:()=>S,IndentationToTabsCommand:()=>O,ReindentLinesAction:()=>D,ReindentSelectedLinesAction:()=>T,getReindentEditOperations:()=>C});var n=i(59652),o=i(17224),s=i(33344),r=i(97195),a=i(95354),l=i(55597),c=i(80253),d=i(90567),u=i(41598),h=i(79412),g=i(63174),p=i(26511),m=i(56641),v=i(18491),f=i(31647),_=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},b=function(e,t){return function(i,n){t(i,n,e)}};function C(e,t,i,n,s){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];const l=t.getLanguageConfiguration(e.getLanguageId()).indentationRules;if(!l)return[];for(n=Math.min(n,e.getLineCount());i<=n&&l.unIndentedLinePattern;){const t=e.getLineContent(i);if(!l.unIndentedLinePattern.test(t))break;i++}if(i>n-1)return[];const{tabSize:d,indentSize:u,insertSpaces:h}=e.getOptions(),g=(e,t)=>(t=t||1,r.U.shiftIndent(e,e.length+t,d,u,h)),p=(e,t)=>(t=t||1,r.U.unshiftIndent(e,e.length+t,d,u,h)),m=[];let f;const _=e.getLineContent(i);let b=_;if(void 0!==s&&null!==s){f=s;const e=o.V8(_);b=f+_.substring(e.length),l.decreaseIndentPattern&&l.decreaseIndentPattern.test(b)&&(f=p(f),b=f+_.substring(e.length)),_!==b&&m.push(a.h.replaceMove(new c.Y(i,1,i,e.length+1),(0,v.x)(f,u,h)))}else f=o.V8(_);let C=f;l.increaseIndentPattern&&l.increaseIndentPattern.test(b)?(C=g(C),f=g(f)):l.indentNextLinePattern&&l.indentNextLinePattern.test(b)&&(C=g(C));for(let r=++i;r<=n;r++){const t=e.getLineContent(r),i=o.V8(t),n=C+t.substring(i.length);l.decreaseIndentPattern&&l.decreaseIndentPattern.test(n)&&(C=p(C),f=p(f)),i!==C&&m.push(a.h.replaceMove(new c.Y(r,1,r,i.length+1),(0,v.x)(C,u,h))),l.unIndentedLinePattern&&l.unIndentedLinePattern.test(t)||(l.increaseIndentPattern&&l.increaseIndentPattern.test(n)?(f=g(f),C=f):C=l.indentNextLinePattern&&l.indentNextLinePattern.test(n)?g(C):f)}return m}class w extends s.R6{constructor(){super({id:w.ID,label:p.NC("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:d.u.writable})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),o=t.getSelection();if(!o)return;const s=new P(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}w.ID="editor.action.indentationToSpaces";class S extends s.R6{constructor(){super({id:S.ID,label:p.NC("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:d.u.writable})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),o=t.getSelection();if(!o)return;const s=new O(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}S.ID="editor.action.indentationToTabs";class y extends s.R6{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(m.eJ),n=e.get(h.q),o=t.getModel();if(!o)return;const s=n.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),r=o.getOptions(),a=[1,2,3,4,5,6,7,8].map((e=>({id:e.toString(),label:e.toString(),description:e===s.tabSize&&e===r.tabSize?p.NC("configuredTabSize","Configured Tab Size"):e===s.tabSize?p.NC("defaultTabSize","Default Tab Size"):e===r.tabSize?p.NC("currentTabSize","Current Tab Size"):void 0}))),l=Math.min(o.getOptions().tabSize-1,7);setTimeout((()=>{i.pick(a,{placeHolder:p.NC({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then((e=>{if(e&&o&&!o.isDisposed()){const t=parseInt(e.label,10);this.displaySizeOnly?o.updateOptions({tabSize:t}):o.updateOptions({tabSize:t,indentSize:t,insertSpaces:this.insertSpaces})}}))}),50)}}class L extends y{constructor(){super(!1,!1,{id:L.ID,label:p.NC("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}L.ID="editor.action.indentUsingTabs";class x extends y{constructor(){super(!0,!1,{id:x.ID,label:p.NC("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}x.ID="editor.action.indentUsingSpaces";class I extends y{constructor(){super(!0,!0,{id:I.ID,label:p.NC("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}}I.ID="editor.action.changeTabDisplaySize";class N extends s.R6{constructor(){super({id:N.ID,label:p.NC("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const i=e.get(h.q),n=t.getModel();if(!n)return;const o=i.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(o.insertSpaces,o.tabSize)}}N.ID="editor.action.detectIndentation";class D extends s.R6{constructor(){super({id:"editor.action.reindentlines",label:p.NC("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:d.u.writable})}run(e,t){const i=e.get(u.c_),n=t.getModel();if(!n)return;const o=C(n,i,1,n.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class T extends s.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:p.NC("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:d.u.writable})}run(e,t){const i=e.get(u.c_),n=t.getModel();if(!n)return;const o=t.getSelections();if(null===o)return;const s=[];for(const r of o){let e=r.startLineNumber,t=r.endLineNumber;if(e!==t&&1===r.endColumn&&t--,1===e){if(e===t)continue}else e--;const o=C(n,i,e,t);s.push(...o)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class k{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&"string"===typeof i.text&&this._edits.push(i)}getEditOperations(e,t){for(const n of this._edits)t.addEditOperation(l.e.lift(n.range),n.text);let i=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let R=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new n.SL,this.callOnModel=new n.SL,this.callOnDispose.add(e.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModelLanguage((()=>this.update())))}update(){this.callOnModel.clear(),this.editor.getOption(10)<4||this.editor.getOption(53)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((e=>{let{range:t}=e;this.trigger(t)})))}trigger(e){const t=this.editor.getSelections();if(null===t||t.length>1)return;const i=this.editor.getModel();if(!i)return;if(!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const n=this.editor.getOption(10),{tabSize:s,indentSize:a,insertSpaces:c}=i.getOptions(),d=[],u={shiftIndent:e=>r.U.shiftIndent(e,e.length+1,s,a,c),unshiftIndent:e=>r.U.unshiftIndent(e,e.length+1,s,a,c)};let h=e.startLineNumber;for(;h<=e.endLineNumber&&this.shouldIgnoreLine(i,h);)h++;if(h>e.endLineNumber)return;let p=i.getLineContent(h);if(!/\S/.test(p.substring(0,e.startColumn-1))){const e=(0,f.n8)(n,i,i.getLanguageId(),h,u,this._languageConfigurationService);if(null!==e){const t=o.V8(p),n=g.Y(e,s);if(n!==g.Y(t,s)){const e=g.J(n,s,c);d.push({range:new l.e(h,1,h,t.length+1),text:e}),p=e+p.substr(t.length)}else{const e=(0,f.tI)(i,h,this._languageConfigurationService);if(0===e||8===e)return}}}const m=h;for(;h<e.endLineNumber&&!/\S/.test(i.getLineContent(h+1));)h++;if(h!==e.endLineNumber){const t={tokenization:{getLineTokens:e=>i.tokenization.getLineTokens(e),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(e,t)=>i.getLanguageIdAtPosition(e,t)},getLineContent:e=>e===m?p:i.getLineContent(e)},r=(0,f.n8)(n,t,i.getLanguageId(),h+1,u,this._languageConfigurationService);if(null!==r){const t=g.Y(r,s),n=g.Y(o.V8(i.getLineContent(h+1)),s);if(t!==n){const r=t-n;for(let t=h+1;t<=e.endLineNumber;t++){const e=i.getLineContent(t),n=o.V8(e),a=g.Y(n,s)+r,u=g.J(a,s,c);u!==n&&d.push({range:new l.e(t,1,t,n.length+1),text:u})}}}}if(d.length>0){this.editor.pushUndoStop();const e=new k(d,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(0===i)return!0;const n=e.tokenization.getLineTokens(t);if(n.getCount()>0){const e=n.findTokenIndexAtOffset(i);if(e>=0&&1===n.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};function M(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let o="";for(let r=0;r<i;r++)o+=" ";const s=new RegExp(o,"gi");for(let r=1,a=e.getLineCount();r<=a;r++){let i=e.getLineFirstNonWhitespaceColumn(r);if(0===i&&(i=e.getLineMaxColumn(r)),1===i)continue;const a=new l.e(r,1,r,i),c=e.getValueInRange(a),d=n?c.replace(/\t/gi,o):c.replace(s,"\t");t.addEditOperation(a,d)}}R.ID="editor.contrib.autoIndentOnPaste",R=_([b(1,u.c_)],R);class P{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),M(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class O{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),M(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}(0,s._K)(R.ID,R,2),(0,s.Qr)(w),(0,s.Qr)(S),(0,s.Qr)(L),(0,s.Qr)(x),(0,s.Qr)(I),(0,s.Qr)(N),(0,s.Qr)(D),(0,s.Qr)(T)},12446:(e,t,i)=>{i.r(t);var n=i(33344),o=i(26404),s=i(20494),r=i(88648),a=i(37368),l=i(21706),c=i(33309),d=i(59652),u=i(72741),h=i(71923),g=i(71308),p=i(19550),m=i(80134),v=i(77116),f=i(95354),_=i(55597),b=i(76958),C=i(43232),w=i(13101),S=i(606),y=i(90024),L=i(60065),x=i(77112),I=i(99924),N=i(46946),D=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class T{constructor(e,t){this.range=e,this.direction=t}}class k{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new k(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return D(this,void 0,void 0,(function*(){if("function"===typeof this.provider.resolveInlayHint){if(this._currentResolve){if(yield this._currentResolve,e.isCancellationRequested)return;return this.resolve(e)}this._isResolved||(this._currentResolve=this._doResolve(e).finally((()=>this._currentResolve=void 0))),yield this._currentResolve}}))}_doResolve(e){var t,i;return D(this,void 0,void 0,(function*(){try{const n=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=null!==(t=null===n||void 0===n?void 0:n.tooltip)&&void 0!==t?t:this.hint.tooltip,this.hint.label=null!==(i=null===n||void 0===n?void 0:n.label)&&void 0!==i?i:this.hint.label,this._isResolved=!0}catch(n){(0,c.Cp)(n),this._isResolved=!1}}))}}class R{static create(e,t,i,n){return D(this,void 0,void 0,(function*(){const o=[],s=e.ordered(t).reverse().map((e=>i.map((i=>D(this,void 0,void 0,(function*(){try{const s=yield e.provideInlayHints(t,i,n);(null===s||void 0===s?void 0:s.hints.length)&&o.push([s,e])}catch(s){(0,c.Cp)(s)}}))))));if(yield Promise.all(s.flat()),n.isCancellationRequested||t.isDisposed())throw new c.FU;return new R(i,o,t)}))}constructor(e,t,i){this._disposables=new d.SL,this.ranges=e,this.provider=new Set;const n=[];for(const[o,s]of t){this._disposables.add(o),this.provider.add(s);for(const e of o.hints){const t=i.validatePosition(e.position);let o="before";const r=R._getRangeAtPosition(i,t);let a;r.getStartPosition().isBefore(t)?(a=_.e.fromPositions(r.getStartPosition(),t),o="after"):(a=_.e.fromPositions(t,r.getEndPosition()),o="before"),n.push(new k(e,new T(a,o),s))}}this.items=n.sort(((e,t)=>I.L.compare(e.hint.position,t.hint.position)))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,n=e.getWordAtPosition(t);if(n)return new _.e(i,n.startColumn,i,n.endColumn);e.tokenization.tokenizeIfCheap(i);const o=e.tokenization.getLineTokens(i),s=t.column-1,r=o.findTokenIndexAtOffset(s);let a=o.getStartOffset(r),l=o.getEndOffset(r);return l-a===1&&(a===s&&r>1?(a=o.getStartOffset(r-1),l=o.getEndOffset(r-1)):l===s&&r<o.getCount()-1&&(a=o.getStartOffset(r+1),l=o.getEndOffset(r+1))),new _.e(i,a+1,i,l+1)}}var M=i(34805),P=i(39049),O=i(73198),A=i(22046),E=i(37709),H=i(24999),V=i(58023),U=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},W=function(e,t){return function(i,n){t(i,n,e)}},F=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class K{constructor(){this._entries=new u.z6(50)}get(e){const t=K._key(e);return this._entries.get(t)}set(e,t){const i=K._key(e);this._entries.set(i,t)}static _key(e){return"".concat(e.uri.toString(),"/").concat(e.getVersionId())}}const B=(0,A.yh)("IInlayHintsCache");(0,O.z)(B,K,1);class z{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return"string"===typeof e?{label:e}:e[this.index]}}class j{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let q=class e{static get(t){var i;return null!==(i=t.getContribution(e.ID))&&void 0!==i?i:void 0}constructor(e,t,i,n,o,s,r){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=n,this._commandService=o,this._notificationService=s,this._instaService=r,this._disposables=new d.SL,this._sessionDisposables=new d.SL,this._decorationsMetadata=new Map,this._ruleFactory=new p.t7(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange((()=>this._update()))),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(136)&&this._update()}))),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(136);if("off"===e.enabled)return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const i=this._inlayHintsCache.get(t);let n;i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add((0,d.OF)((()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)})));const o=new Set,r=new a.pY((()=>F(this,void 0,void 0,(function*(){const e=Date.now();null===n||void 0===n||n.dispose(!0),n=new l.A;const i=t.onWillDispose((()=>null===n||void 0===n?void 0:n.cancel()));try{const i=n.token,s=yield R.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),i);if(r.delay=this._debounceInfo.update(t,Date.now()-e),i.isCancellationRequested)return void s.dispose();for(const e of s.provider)"function"!==typeof e.onDidChangeInlayHints||o.has(e)||(o.add(e),this._sessionDisposables.add(e.onDidChangeInlayHints((()=>{r.isScheduled()||r.schedule()}))));this._sessionDisposables.add(s),this._updateHintsDecorators(s.ranges,s.items),this._cacheHintsForFastRestore(t)}catch(s){(0,c.dL)(s)}finally{n.dispose(),i.dispose()}}))),this._debounceInfo.get(t));if(this._sessionDisposables.add(r),this._sessionDisposables.add((0,d.OF)((()=>null===n||void 0===n?void 0:n.dispose(!0)))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((e=>{!e.scrollTopChanged&&r.isScheduled()||r.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((e=>{const t=Math.max(r.delay,1250);r.schedule(t)}))),"on"===e.enabled)this._activeRenderMode=0;else{let t,i;"onUnlessPressed"===e.enabled?(t=0,i=1):(t=1,i=0),this._activeRenderMode=t,this._sessionDisposables.add(s._q.getInstance().event((e=>{if(!this._editor.hasModel())return;const n=e.altKey&&e.ctrlKey&&!e.shiftKey&&!e.metaKey?i:t;if(n!==this._activeRenderMode){this._activeRenderMode=n;const e=this._editor.getModel(),t=this._copyInlayHintsWithCurrentAnchor(e);this._updateHintsDecorators([e.getFullModelRange()],t),r.schedule(0)}})))}this._sessionDisposables.add(this._installDblClickGesture((()=>r.schedule(0)))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new d.SL,t=e.add(new x.yN(this._editor)),i=new d.SL;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown((e=>{const[t]=e,n=this._getInlayHintLabelPart(t),o=this._editor.getModel();if(!n||!o)return void i.clear();const s=new l.A;i.add((0,d.OF)((()=>s.dispose(!0)))),n.item.resolve(s.token),this._activeInlayHintPart=n.part.command||n.part.location?new j(n,t.hasTriggerModifier):void 0;const r=o.validatePosition(n.item.hint.position).lineNumber,a=new _.e(r,1,r,o.getLineMaxColumn(r)),c=this._getInlineHintsForRange(a);this._updateHintsDecorators([a],c),i.add((0,d.OF)((()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([a],c)})))}))),e.add(t.onCancel((()=>i.clear()))),e.add(t.onExecute((e=>F(this,void 0,void 0,(function*(){const t=this._getInlayHintLabelPart(e);if(t){const i=t.part;i.location?this._instaService.invokeFunction(M.K,e,this._editor,i.location):b.mY.is(i.command)&&(yield this._invokeCommand(i.command,t.item))}}))))),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp((t=>F(this,void 0,void 0,(function*(){if(2!==t.event.detail)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),yield i.item.resolve(l.T.None),(0,r.Of)(i.item.hint.textEdits))){const t=i.item.hint.textEdits.map((e=>f.h.replace(_.e.lift(e.range),e.text)));this._editor.executeEdits("inlayHint.default",t),e()}}))))}_installContextMenu(){return this._editor.onContextMenu((e=>F(this,void 0,void 0,(function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(M.u,this._editor,e.event.target,t))}))))}_getInlayHintLabelPart(e){var t;if(6!==e.target.type)return;const i=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return i instanceof w.HS&&(null===i||void 0===i?void 0:i.attachedData)instanceof z?i.attachedData:void 0}_invokeCommand(e,t){var i;return F(this,void 0,void 0,(function*(){try{yield this._commandService.executeCommand(e.id,...null!==(i=e.arguments)&&void 0!==i?i:[])}catch(n){this._notificationService.notify({severity:E.zb.Error,source:t.provider.displayName,message:n})}}))}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,n]of this._decorationsMetadata){if(t.has(n.item))continue;const o=e.getDecorationRange(i);if(o){const e=new T(o,n.item.anchor.direction),i=n.item.with({anchor:e});t.set(n.item,i)}}return Array.from(t.values())}_getHintsRanges(){const e=this._editor.getModel(),t=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const n of t.sort(_.e.compareRangesUsingStarts)){const t=e.validateRange(new _.e(n.startLineNumber-30,n.startColumn,n.endLineNumber+30,n.endColumn));0!==i.length&&_.e.areIntersectingOrTouching(i[i.length-1],t)?i[i.length-1]=_.e.plusRange(i[i.length-1],t):i.push(t)}return i}_updateHintsDecorators(t,i){var n,o;const s=[],a=(e,t,i,n,o)=>{const r={content:i,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:n,attachedData:o};s.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:{description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0,[e.anchor.direction]:0===this._activeRenderMode?r:void 0}}})},l=(e,t)=>{const i=this._ruleFactory.createClassNameRef({width:"".concat(c/3|0,"px"),display:"inline-block"});a(e,i,"\u200a",t?C.RM.Right:C.RM.None)},{fontSize:c,fontFamily:d,padding:u,isUniform:h}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,d);for(const m of i){m.hint.paddingLeft&&l(m,!1);const t="string"===typeof m.hint.label?[{label:m.hint.label}]:m.hint.label;for(let e=0;e<t.length;e++){const i=t[e],o=0===e,s=e===t.length-1,l={fontSize:"".concat(c,"px"),fontFamily:"var(".concat(g,"), ").concat(v.hL.fontFamily),verticalAlign:h?"baseline":"middle",unicodeBidi:"isolate"};(0,r.Of)(m.hint.textEdits)&&(l.cursor="default"),this._fillInColors(l,m.hint),(i.command||i.location)&&(null===(n=this._activeInlayHintPart)||void 0===n?void 0:n.part.item)===m&&this._activeInlayHintPart.part.index===e&&(l.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(l.color=(0,V.EN)(H._Yy),l.cursor="pointer")),u&&(o&&s?(l.padding="1px ".concat(0|Math.max(1,c/4),"px"),l.borderRadius="".concat(c/4|0,"px")):o?(l.padding="1px 0 1px ".concat(0|Math.max(1,c/4),"px"),l.borderRadius="".concat(c/4|0,"px 0 0 ").concat(c/4|0,"px")):s?(l.padding="1px ".concat(0|Math.max(1,c/4),"px 1px 0"),l.borderRadius="0 ".concat(c/4|0,"px ").concat(c/4|0,"px 0")):l.padding="1px 0 1px 0"),a(m,this._ruleFactory.createClassNameRef(l),Q(i.label),s&&!m.hint.paddingRight?C.RM.Right:C.RM.None,new z(m,e))}if(m.hint.paddingRight&&l(m,!0),s.length>e._MAX_DECORATORS)break}const p=[];for(const e of t)for(const{id:t}of null!==(o=this._editor.getDecorationsInRange(e))&&void 0!==o?o:[]){const e=this._decorationsMetadata.get(t);e&&(p.push(t),e.classNameRef.dispose(),this._decorationsMetadata.delete(t))}const f=m.Z.capture(this._editor);this._editor.changeDecorations((e=>{const t=e.deltaDecorations(p,s.map((e=>e.decoration)));for(let i=0;i<t.length;i++){const e=s[i];this._decorationsMetadata.set(t[i],e)}})),f.restore(this._editor)}_fillInColors(e,t){t.kind===b.gl.Parameter?(e.backgroundColor=(0,V.EN)(H.phM),e.color=(0,V.EN)(H.HCL)):t.kind===b.gl.Type?(e.backgroundColor=(0,V.EN)(H.bKB),e.color=(0,V.EN)(H.hX8)):(e.backgroundColor=(0,V.EN)(H.PpC),e.color=(0,V.EN)(H.VVv))}_getLayoutInfo(){const e=this._editor.getOption(136),t=e.padding,i=this._editor.getOption(50),n=this._editor.getOption(47);let o=e.fontSize;(!o||o<5||o>i)&&(o=i);const s=e.fontFamily||n;return{fontSize:o,fontFamily:s,padding:t,isUniform:!t&&s===n&&o===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};function Q(e){return e.replace(/[ \t]/g,"\xa0")}q.ID="editor.contrib.InlayHints",q._MAX_DECORATORS=1500,q=U([W(1,y.p),W(2,S.A),W(3,B),W(4,P.H),W(5,E.lT),W(6,A.TG)],q),P.P.registerCommand("_executeInlayHintProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return F(void 0,void 0,void 0,(function*(){const[t,n]=i;(0,h.p_)(g.o.isUri(t)),(0,h.p_)(_.e.isIRange(n));const{inlayHintsProvider:o}=e.get(y.p),s=yield e.get(L.S).createModelReference(t);try{const e=yield R.create(o,s.object.textEditorModel,[_.e.lift(n)],l.T.None),t=e.items.map((e=>e.hint));return setTimeout((()=>e.dispose()),0),t}finally{s.dispose()}}))}));var Y=i(41045),G=i(62281),J=i(69545),Z=i(51118),$=i(53435),X=i(66495),ee=i(26511),te=i(44352),ie=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ne=function(e,t){return function(i,n){t(i,n,e)}},oe=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))},se=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,o){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,o,(t=e[i](t)).done,t.value)}))}}};class re extends o.YM{constructor(e,t,i,n){super(10,t,e.item.anchor.range,i,n,!0),this.part=e}}let ae=class extends Z.D5{constructor(e,t,i,n,o,s){super(e,t,i,n,s),this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!q.get(this._editor))return null;if(6!==e.target.type)return null;const i=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return i instanceof w.HS&&i.attachedData instanceof z?new re(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof re?new a.Aq((t=>oe(this,void 0,void 0,(function*(){var n,o,s,a;const{part:l}=e;if(yield l.item.resolve(i),i.isCancellationRequested)return;let c,d;if("string"===typeof l.item.hint.tooltip?c=(new Y.W5).appendText(l.item.hint.tooltip):l.item.hint.tooltip&&(c=l.item.hint.tooltip),c&&t.emitOne(new Z.hU(this,e.range,[c],!1,0)),(0,r.Of)(l.item.hint.textEdits)&&t.emitOne(new Z.hU(this,e.range,[(new Y.W5).appendText((0,ee.NC)("hint.dbl","Double-click to insert"))],!1,10001)),"string"===typeof l.part.tooltip?d=(new Y.W5).appendText(l.part.tooltip):l.part.tooltip&&(d=l.part.tooltip),d&&t.emitOne(new Z.hU(this,e.range,[d],!1,1)),l.part.location||l.part.command){let i;const n="altKey"===this._editor.getOption(75)?te.dz?(0,ee.NC)("links.navigate.kb.meta.mac","cmd + click"):(0,ee.NC)("links.navigate.kb.meta","ctrl + click"):te.dz?(0,ee.NC)("links.navigate.kb.alt.mac","option + click"):(0,ee.NC)("links.navigate.kb.alt","alt + click");l.part.location&&l.part.command?i=(new Y.W5).appendText((0,ee.NC)("hint.defAndCommand","Go to Definition ({0}), right click for more",n)):l.part.location?i=(new Y.W5).appendText((0,ee.NC)("hint.def","Go to Definition ({0})",n)):l.part.command&&(i=new Y.W5("[".concat((0,ee.NC)("hint.cmd","Execute Command"),"](").concat((u=l.part.command,g.o.from({scheme:N.lg.command,path:u.id,query:u.arguments&&encodeURIComponent(JSON.stringify(u.arguments))}).toString()),' "').concat(l.part.command.title,'") (').concat(n,")"),{isTrusted:!0})),i&&t.emitOne(new Z.hU(this,e.range,[i],!1,1e4))}var u;const h=yield this._resolveInlayHintLabelPartHover(l,i);try{for(var p,m=!0,v=se(h);!(n=(p=yield v.next()).done);m=!0){a=p.value,m=!1;const e=a;t.emitOne(e)}}catch(f){o={error:f}}finally{try{m||n||!(s=v.return)||(yield s.call(v))}finally{if(o)throw o.error}}})))):a.Aq.EMPTY}_resolveInlayHintLabelPartHover(e,t){return oe(this,void 0,void 0,(function*(){if(!e.part.location)return a.Aq.EMPTY;const{uri:i,range:n}=e.part.location,o=yield this._resolverService.createModelReference(i);try{const i=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(i)?(0,J.R8)(this._languageFeaturesService.hoverProvider,i,new I.L(n.startLineNumber,n.startColumn),t).filter((e=>!(0,Y.CP)(e.hover.contents))).map((t=>new Z.hU(this,e.item.anchor.range,t.hover.contents,!1,2+t.ordinal))):a.Aq.EMPTY}finally{o.dispose()}}))}};ae=ie([ne(1,G.O),ne(2,X.v4),ne(3,$.Ui),ne(4,L.S),ne(5,y.p)],ae),(0,n._K)(q.ID,q,1),o.Ae.register(ae)},34805:(e,t,i)=>{i.d(t,{K:()=>b,u:()=>_});var n=i(20494),o=i(98110),s=i(21706),r=i(95873),a=i(55597),l=i(60065),c=i(68546),d=i(71823),u=i(41377),h=i(39049),g=i(10071),p=i(23417),m=i(22046),v=i(37709),f=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function _(e,t,i,d){var g;return f(this,void 0,void 0,(function*(){const _=e.get(l.S),b=e.get(p.i),C=e.get(h.H),w=e.get(m.TG),S=e.get(v.lT);if(yield d.item.resolve(s.T.None),!d.part.location)return;const y=d.part.location,L=[],x=new Set(u.BH.getMenuItems(u.eH.EditorContext).map((e=>(0,u.vr)(e)?e.command.id:(0,r.R)())));for(const e of c.SymbolNavigationAction.all())x.has(e.desc.id)&&L.push(new o.aU(e.desc.id,u.U8.label(e.desc,{renderShortTitle:!0}),void 0,!0,(()=>f(this,void 0,void 0,(function*(){const i=yield _.createModelReference(y.uri);try{const n=new c.SymbolNavigationAnchor(i.object.textEditorModel,a.e.getStartPosition(y.range)),o=d.item.anchor.range;yield w.invokeFunction(e.runEditorCommand.bind(e),t,n,o)}finally{i.dispose()}})))));if(d.part.command){const{command:e}=d.part;L.push(new o.Z0),L.push(new o.aU(e.id,e.title,void 0,!0,(()=>f(this,void 0,void 0,(function*(){var t;try{yield C.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}catch(i){S.notify({severity:v.zb.Error,source:d.item.provider.displayName,message:i})}})))))}const I=t.getOption(123);b.showContextMenu({domForShadowRoot:I&&null!==(g=t.getDomNode())&&void 0!==g?g:void 0,getAnchor:()=>{const e=n.i(i);return{x:e.left,y:e.top+e.height+8}},getActions:()=>L,onHide:()=>{t.focus()},autoSelectFirstItem:!0})}))}function b(e,t,i,n){return f(this,void 0,void 0,(function*(){const o=e.get(l.S),s=yield o.createModelReference(n.uri);yield i.invokeWithinContext((e=>f(this,void 0,void 0,(function*(){const o=t.hasSideBySideModifier,r=e.get(g.i6),l=d.Jy.inPeekEditor.getValue(r),u=!o&&i.getOption(85)&&!l;return new c.DefinitionAction({openToSide:o,openInPeek:u,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e,new c.SymbolNavigationAnchor(s.object.textEditorModel,a.e.getStartPosition(n.range)),a.e.lift(n.range))})))),s.dispose()}))}},49726:(e,t,i)=>{i.d(t,{Np:()=>o,OW:()=>s,Ou:()=>n});const n="editor.action.inlineSuggest.commit",o="editor.action.inlineSuggest.showPrevious",s="editor.action.inlineSuggest.showNext"},17804:(e,t,i)=>{i.d(t,{f:()=>c});var n=i(95331),o=i(17224),s=i(20596),r=i(10071),a=i(59652),l=i(26511);class c extends a.JT{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=c.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=c.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=c.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=c.suppressSuggestions.bindTo(this.contextKeyService),this._register((0,n.EH)("update context key: inlineCompletionVisible, suppressSuggestions",(e=>{const t=this.model.read(e),i=null===t||void 0===t?void 0:t.selectedInlineCompletion.read(e),n=null===t||void 0===t?void 0:t.ghostText.read(e),o=null===t||void 0===t?void 0:t.selectedSuggestItem.read(e);this.inlineCompletionVisible.set(void 0===o&&void 0!==n&&!n.isEmpty()),n&&i&&this.suppressSuggestions.set(i.inlineCompletion.source.inlineCompletions.suppressSuggestions)}))),this._register((0,n.EH)("update context key: inlineCompletionSuggestsIndentation, inlineCompletionSuggestsIndentationLessThanTabSize",(e=>{const t=this.model.read(e);let i=!1,n=!0;const r=null===t||void 0===t?void 0:t.ghostText.read(e);if((null===t||void 0===t?void 0:t.selectedSuggestItem)&&r&&r.parts.length>0){const{column:e,lines:a}=r.parts[0],l=a[0];if(e<=t.textModel.getLineIndentColumn(r.lineNumber)){let e=(0,o.LC)(l);-1===e&&(e=l.length-1),i=e>0;const r=t.textModel.getOptions().tabSize;n=s.i.visibleColumnFromColumn(l,e+1,r)<r}}this.inlineCompletionSuggestsIndentation.set(i),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)})))}}c.inlineSuggestionVisible=new r.uy("inlineSuggestionVisible",!1,(0,l.NC)("inlineSuggestionVisible","Whether an inline suggestion is visible")),c.inlineSuggestionHasIndentation=new r.uy("inlineSuggestionHasIndentation",!1,(0,l.NC)("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),c.inlineSuggestionHasIndentationLessThanTabSize=new r.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,l.NC)("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),c.suppressSuggestions=new r.uy("inlineSuggestionSuppressSuggestions",void 0,(0,l.NC)("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"))},41170:(e,t,i)=>{i.r(t);var n=i(33344),o=i(26404),s=i(95331),r=i(90567),a=i(49726),l=i(17804),c=i(15011),d=i(68515),u=i(59652),h=i(53950),g=i(73731),p=i(99924),m=i(606),v=i(90024),f=i(8071),_=i(17224),b=i(58314),C=i(77116),w=i(55597),S=i(21531),y=i(62281),L=i(43232),x=i(21605),I=i(14133),N=i(68523),D=i(33309);class T{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}const k=[];class R{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new D.he("startColumn ".concat(e," cannot be after endColumnExclusive ").concat(t))}toRange(e){return new w.e(e,this.startColumn,e,this.endColumnExclusive)}}function M(e,t){return new p.L(e.lineNumber+t.lineNumber-1,1===t.lineNumber?e.column+t.column-1:t.column)}function P(e){let t=1,i=1;for(const n of e)"\n"===n?(t++,i=1):i++;return new p.L(t,i)}class O{constructor(e,t){this.lineNumber=e,this.parts=t}renderForScreenReader(e){if(0===this.parts.length)return"";const t=this.parts[this.parts.length-1];return function(e,t){const i=new T(e),n=t.map((e=>{const t=w.e.lift(e.range);return{startOffset:i.getOffset(t.getStartPosition()),endOffset:i.getOffset(t.getEndPosition()),text:e.text}}));n.sort(((e,t)=>t.startOffset-e.startOffset));for(const o of n)e=e.substring(0,o.startOffset)+o.text+e.substring(o.endOffset);return e}(e.substr(0,t.column-1),this.parts.map((e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")})))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every((e=>0===e.lines.length))}get lineCount(){return 1+this.parts.reduce(((e,t)=>e+t.lines.length-1),0)}}class A{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}}class E{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.lineNumber=e,this.columnRange=t,this.newLines=i,this.additionalReservedLineCount=n,this.parts=[new A(this.columnRange.endColumnExclusive,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join("\n")}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every((e=>0===e.lines.length))}}var H=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},V=function(e,t){return function(i,n){t(i,n,e)}};let U=class extends u.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,s.uh)("isDisposed",!1),this.currentTextModel=(0,s.rD)(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this.uiState=(0,s.nK)("uiState",(e=>{if(this.isDisposed.read(e))return;const t=this.currentTextModel.read(e);if(t!==this.model.targetTextModel.read(e))return;const i=this.model.ghostText.read(e);if(!i)return;const n=i instanceof E?i.columnRange:void 0,o=[],s=[];function r(e,t){if(s.length>0){const i=s[s.length-1];t&&i.decorations.push(new I.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)s.push({content:i,decorations:t?[new I.Kp(1,i.length+1,t,0)]:[]})}const a=t.getLineContent(i.lineNumber);let l,c=0;for(const u of i.parts){let e=u.lines;void 0===l?(o.push({column:u.column,text:e[0],preview:u.preview}),e=e.slice(1)):r([a.substring(c,u.column-1)],void 0),e.length>0&&(r(e,"ghost-text"),void 0===l&&u.column<=a.length&&(l=u.column)),c=u.column-1}void 0!==l&&r([a.substring(c)],void 0);const d=void 0!==l?new R(l,a.length+1):void 0;return{replacedRange:n,inlineTexts:o,additionalLines:s,hiddenRange:d,lineNumber:i.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(e),targetTextModel:t}})),this.decorations=(0,s.nK)("decorations",(e=>{const t=this.uiState.read(e);if(!t)return[];const i=[];t.replacedRange&&i.push({range:t.replacedRange.toRange(t.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),t.hiddenRange&&i.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const n of t.inlineTexts)i.push({range:w.e.fromPositions(new p.L(t.lineNumber,n.column)),options:{description:"ghost-text",after:{content:n.text,inlineClassName:n.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:L.RM.Left},showIfCollapsed:!0}});return i})),this.additionalLinesWidget=this._register(new W(this.editor,this.languageService.languageIdCodec,(0,s.nK)("lines",(e=>{const t=this.uiState.read(e);return t?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0})))),this._register((0,u.OF)((()=>{this.isDisposed.set(!0,void 0)}))),this._register(function(e,t){const i=new u.SL,n=e.createDecorationsCollection();return i.add((0,s.EH)("Apply decorations from ".concat(t.debugName),(e=>{const i=t.read(e);n.set(i)}))),i.add({dispose:()=>{n.clear()}}),i}(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};U=H([V(2,y.O)],U);class W extends u.JT{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=(0,s.aq)("editorOptionChanged",d.ju.filter(this.editor.onDidChangeConfiguration,(e=>e.hasChanged(31)||e.hasChanged(113)||e.hasChanged(95)||e.hasChanged(90)||e.hasChanged(49)||e.hasChanged(48)||e.hasChanged(64)))),this._register((0,s.EH)("update view zone",(e=>{const t=this.lines.read(e);this.editorOptionsChanged.read(e),t?this.updateLines(t.lineNumber,t.additionalLines,t.minReservedLineCount):this.clear()})))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones((e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:o}=n.getOptions();this.editor.changeViewZones((n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);const s=Math.max(t.length,i);if(s>0){const i=document.createElement("div");!function(e,t,i,n,o){const s=n.get(31),r=n.get(113),a="none",l=n.get(90),c=n.get(49),d=n.get(48),u=n.get(64),h=new S.HT(1e4);h.appendString('<div class="suggest-preview-text">');for(let m=0,v=i.length;m<v;m++){const e=i[m],n=e.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(m*u)),h.appendString('px;width:1000000px;">');const g=_.$i(n),p=_.Ut(n),v=x.A.createEmpty(n,o);(0,N.d1)(new N.IJ(d.isMonospace&&!s,d.canUseHalfwidthRightwardsArrow,n,!1,g,p,0,v,e.decorations,t,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,r,a,l,c!==C.n0.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),(0,b.N)(e,d);const g=h.build(),p=F?F.createHTML(g):g;e.innerHTML=p}(i,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:s,domNode:i,afterColumnAffinity:1})}}))}}const F=(0,f.Z)("editorGhostText",{createHTML:e=>e});var K=i(91900),B=i(88648),z=i(25636),j=i(71923),q=i(95354),Q=i(76958),Y=i(41598),G=i(21706),J=i(23897),Z=i(97654);class ${constructor(e,t){this.range=e,this.text=t}removeCommonPrefix(e,t){const i=t?this.range.intersectRanges(t):this.range;if(!i)return this;const n=e.getValueInRange(i,1),o=(0,_.Mh)(n,this.text),s=M(this.range.getStartPosition(),P(n.substring(0,o))),r=this.text.substring(o),a=w.e.fromPositions(s,this.range.getEndPosition());return new $(a,r)}augments(e){return this.text.startsWith(e.text)&&(t=this.range,(i=e.range).getStartPosition().equals(t.getStartPosition())&&i.getEndPosition().isBeforeOrEqual(t.getEndPosition()));var t,i}computeGhostText(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this.removeCommonPrefix(e);if(o.range.endLineNumber!==o.range.startLineNumber)return;const s=e.getLineContent(o.range.startLineNumber),r=(0,_.V8)(s).length;if(o.range.startColumn-1<=r){const e=(0,_.V8)(o.text).length,t=s.substring(o.range.startColumn-1,r),i=w.e.fromPositions(o.range.getStartPosition().delta(0,t.length),o.range.getEndPosition()),n=o.text.startsWith(t)?o.text.substring(t.length):o.text.substring(e);o=new $(i,n)}const a=e.getValueInRange(o.range),l=function(e,t){if((null===X||void 0===X?void 0:X.originalValue)===e&&(null===X||void 0===X?void 0:X.newValue)===t)return null===X||void 0===X?void 0:X.changes;{let i=te(e,t,!0);if(i){const n=ee(i);if(n>0){const o=te(e,t,!1);o&&ee(o)<n&&(i=o)}}return X={originalValue:e,newValue:t,changes:i},i}}(a,o.text);if(!l)return;const c=o.range.startLineNumber,d=new Array;if("prefix"===t){const e=l.filter((e=>0===e.originalLength));if(e.length>1||1===e.length&&e[0].originalStart!==a.length)return}const u=o.text.length-n;for(const h of l){const e=o.range.startColumn+h.originalStart+h.originalLength;if("subwordSmart"===t&&i&&i.lineNumber===o.range.startLineNumber&&e<i.column)return;if(h.originalLength>0)return;if(0===h.modifiedLength)continue;const n=h.modifiedStart+h.modifiedLength,s=Math.max(h.modifiedStart,Math.min(n,u)),r=o.text.substring(h.modifiedStart,s),a=o.text.substring(s,Math.max(h.modifiedStart,n));if(r.length>0){const t=(0,_.uq)(r);d.push(new A(e,t,!1))}if(a.length>0){const t=(0,_.uq)(a);d.push(new A(e,t,!0))}}return new O(c,d)}}let X;function ee(e){let t=0;for(const i of e)t+=i.originalLength;return t}function te(e,t,i){if(e.length>5e3||t.length>5e3)return;function n(e){let t=0;for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);n>t&&(t=n)}return t}const o=Math.max(n(e),n(t));function s(e){if(e<0)throw new Error("unexpected");return o+e+1}function r(e){let t=0,n=0;const o=new Int32Array(e.length);for(let r=0,a=e.length;r<a;r++)if(i&&"("===e[r]){const e=100*n+t;o[r]=s(2*e),t++}else if(i&&")"===e[r]){t=Math.max(t-1,0);const e=100*n+t;o[r]=s(2*e+1),0===t&&n++}else o[r]=e.charCodeAt(r);return o}const a=r(e),l=r(t);return new Z.Hs({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var ie=i(26728),ne=i(38751),oe=i(45033),se=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function re(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:G.T.None,s=arguments.length>5?arguments[5]:void 0;return se(this,void 0,void 0,(function*(){const r=function(e,t){const i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new w.e(e.lineNumber,i.startColumn,e.lineNumber,n):w.e.fromPositions(e,e.with(void 0,n))}(t,i),a=e.all(i),l=yield Promise.all(a.map((e=>se(this,void 0,void 0,(function*(){try{const s=yield e.provideInlineCompletions(i,t,n,o);return{provider:e,completions:s}}catch(s){(0,D.Cp)(s)}return{provider:e,completions:void 0}}))))),c=new Map,d=[];for(const e of l){const t=e.completions;if(!t)continue;const n=new le(t,e.provider);d.push(n);for(const e of t.items){const t=ce.from(e,n,r,i,s);c.set(t.hash(),t)}}return new ae(Array.from(c.values()),new Set(c.keys()),d)}))}class ae{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class le{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,0===this.refCount&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class ce{static from(e,t,i,n,o){let s,r,a=e.range?w.e.lift(e.range):i;if("string"===typeof e.insertText){if(s=e.insertText,o&&e.completeBracketPairs){s=de(s,a.getStartPosition(),n,o);const t=s.length-e.insertText.length;0!==t&&(a=new w.e(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+t))}r=void 0}else if("snippet"in e.insertText){const t=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=de(e.insertText.snippet,a.getStartPosition(),n,o);const i=e.insertText.snippet.length-t;0!==i&&(a=new w.e(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+i))}const i=(new oe.Yj).parse(e.insertText.snippet);1===i.children.length&&i.children[0]instanceof oe.xv?(s=i.children[0].value,r=void 0):(s=i.toString(),r={snippet:e.insertText.snippet,range:a})}else(0,ie.vE)(e.insertText);return new ce(s,e.command,a,s,r,e.additionalTextEdits||k,e,t)}constructor(e,t,i,n,o,s,r,a){this.filterText=e,this.command=t,this.range=i,this.insertText=n,this.snippetInfo=o,this.additionalTextEdits=s,this.sourceInlineCompletion=r,this.source=a,n=(e=e.replace(/\r\n|\r/g,"\n")).replace(/\r\n|\r/g,"\n")}withRange(e){return new ce(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}function de(e,t,i,n){const o=i.getLineContent(t.lineNumber).substring(0,t.column-1)+e,s=i.tokenization.tokenizeLineWithEdit(t,o.length-(t.column-1),e),r=null===s||void 0===s?void 0:s.sliceAndInflate(t.column-1,o.length,0);if(!r)return e;return(0,ne.r)(r,n)}var ue=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},he=function(e,t){return function(i,n){t(i,n,e)}},ge=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let pe=class extends u.JT{constructor(e,t,i,n,o){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=n,this.languageConfigurationService=o,this._updateOperation=this._register(new u.XK),this.inlineCompletions=(0,h.DN)("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=(0,h.DN)("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent((()=>{this._updateOperation.clear()})))}fetch(e,t,i){var n,o;const s=new me(e,t,this.textModel.getVersionId()),r=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(null===(n=this._updateOperation.value)||void 0===n?void 0:n.request.satisfies(s))return this._updateOperation.value.promise;if(null===(o=r.get())||void 0===o?void 0:o.request.satisfies(s))return Promise.resolve(!0);const a=!!this._updateOperation.value;this._updateOperation.clear();const l=new G.A,c=(()=>ge(this,void 0,void 0,(function*(){var n,o;if((a||t.triggerKind===Q.bw.Automatic)&&(yield(n=this._debounceValue.get(this.textModel),new Promise((e=>{let t;const i=setTimeout((()=>{t&&t.dispose(),e()}),n);o&&(t=o.onCancellationRequested((()=>{clearTimeout(i),t&&t.dispose(),e()})))})))),l.token.isCancellationRequested||this.textModel.getVersionId()!==s.versionId)return!1;const c=new Date,d=yield re(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,l.token,this.languageConfigurationService);if(l.token.isCancellationRequested||this.textModel.getVersionId()!==s.versionId)return!1;const u=new Date;this._debounceValue.update(this.textModel,u.getTime()-c.getTime());const g=new fe(d,s,this.textModel,this.versionId);if(i){const t=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!d.has(t)&&g.prepend(i.inlineCompletion,t.range,!0)}return this._updateOperation.clear(),(0,h.PS)((e=>{r.set(g,e)})),!0})))(),d=new ve(s,l,c);return this._updateOperation.value=d,c}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(null===(t=this._updateOperation.value)||void 0===t?void 0:t.request.context.selectedSuggestionInfo)&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};pe=ue([he(3,v.p),he(4,Y.c_)],pe);class me{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&function(e,t,i){if(!e||!t)return e===t;return i(e,t)}(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,((e,t)=>e.equals(t)))&&(e.context.triggerKind===Q.bw.Automatic||this.context.triggerKind===Q.bw.Explicit)&&this.versionId===e.versionId}}class ve{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class fe{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,n){this.inlineCompletionProviderResult=e,this.request=t,this.textModel=i,this.versionId=n,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=(0,s.nK)("ranges",(e=>{this.versionId.read(e);let t=!1;for(const i of this._inlineCompletions)t=t||i._updateRange(this.textModel);return t&&this._rangeVersionIdValue++,this._rangeVersionIdValue}));const o=i.deltaDecorations([],e.completions.map((e=>({range:e.range,options:{description:"inline-completion-tracking-range"}}))));this._inlineCompletions=e.completions.map(((e,t)=>new _e(e,o[t],this._rangeVersionId)))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,0===this._refCount){this.textModel.deltaDecorations(this._inlineCompletions.map((e=>e.decorationId)),[]),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const n=this.textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new _e(e,n,this._rangeVersionId,t)),this._prependedInlineCompletionItems.push(e)}}class _e{get forwardStable(){var e;return null!==(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)&&void 0!==e&&e}constructor(e,t,i,n){this.inlineCompletion=e,this.decorationId=t,this.rangeVersion=i,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=null!==n&&void 0!==n?n:e.range}toInlineCompletion(e){return this.inlineCompletion.withRange(this._getUpdatedRange(e))}toSingleTextEdit(e){return new $(this._getUpdatedRange(e),this.inlineCompletion.insertText)}isVisible(e,t,i){const n=this._toFilterTextReplacement(i).removeCommonPrefix(e);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(i).getStartPosition())||t.lineNumber!==n.range.startLineNumber)return!1;const o=e.getValueInRange(n.range,1).toLowerCase(),s=n.text.toLowerCase(),r=Math.max(0,t.column-n.range.startColumn);let a=s.substring(0,r),l=s.substring(r),c=o.substring(0,r),d=o.substring(r);const u=e.getLineIndentColumn(n.range.startLineNumber);return n.range.startColumn<=u&&(c=c.trimStart(),0===c.length&&(d=d.trimStart()),a=a.trimStart(),0===a.length&&(l=l.trimStart())),a.startsWith(c)&&!!(0,J.Sy)(d,l)}canBeReused(e,t){return this._isValid&&this._getUpdatedRange(void 0).containsPosition(t)&&this.isVisible(e,t,void 0)&&!this._isSmallerThanOriginal(void 0)}_toFilterTextReplacement(e){return new $(this._getUpdatedRange(e),this.inlineCompletion.filterText)}_isSmallerThanOriginal(e){return be(this._getUpdatedRange(e)).isBefore(be(this.inlineCompletion.range))}_getUpdatedRange(e){return this.rangeVersion.read(e),this._updatedRange}_updateRange(e){const t=e.getDecorationRange(this.decorationId);return t?!this._updatedRange.equalsRange(t)&&(this._updatedRange=t,!0):(this._isValid=!1,!0)}}function be(e){return e.startLineNumber===e.endLineNumber?new p.L(1,1+e.endColumn-e.startColumn):new p.L(1+e.endLineNumber-e.startLineNumber,e.endColumn)}var Ce,we=i(55309),Se=i(39049),ye=i(22046),Le=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},xe=function(e,t){return function(i,n){t(i,n,e)}},Ie=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};!function(e){e[e.Undo=0]="Undo",e[e.Redo=1]="Redo",e[e.AcceptWord=2]="AcceptWord",e[e.Other=3]="Other"}(Ce||(Ce={}));let Ne=class extends u.JT{get isAcceptingPartially(){return this._isAcceptingPartially}get isNavigatingCurrentInlineCompletion(){return this._isNavigatingCurrentInlineCompletion}constructor(e,t,i,n,o,r,a,l,c,d,u,h){let g;super(),this.textModel=e,this.selectedSuggestItem=t,this.cursorPosition=i,this.textModelVersionId=n,this._debounceValue=o,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=d,this._commandService=u,this._languageConfigurationService=h,this._source=this._register(this._instantiationService.createInstance(pe,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=(0,s.uh)("isActive",!1),this._forceUpdate=(0,s.GN)("forceUpdate"),this._selectedInlineCompletionId=(0,s.uh)("selectedInlineCompletionId",void 0),this._isAcceptingPartially=!1,this._isNavigatingCurrentInlineCompletion=!1,this._preserveCurrentCompletionReasons=new Set([Ce.Redo,Ce.Undo,Ce.AcceptWord]),this._fetchInlineCompletions=(0,z.aK)("fetch inline completions",{createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Q.bw.Automatic}),handleChange:(e,t)=>(e.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(e.change)?t.preserveCurrentCompletion=!0:e.didChange(this._forceUpdate)&&(t.inlineCompletionTriggerKind=e.change),!0)},((e,t)=>{this._forceUpdate.read(e);if(!(this._enabled.read(e)&&this.selectedSuggestItem.read(e)||this._isActive.read(e)))return void this._source.cancelUpdate();this.textModelVersionId.read(e);const i=this.selectedInlineCompletion.get(),n=t.preserveCurrentCompletion||(null===i||void 0===i?void 0:i.forwardStable)?i:void 0,o=this._source.suggestWidgetInlineCompletions.get(),r=this.selectedSuggestItem.read(e);if(o&&!r){const e=this._source.inlineCompletions.get();(0,s.PS)((t=>{e&&o.request.versionId>e.request.versionId&&this._source.inlineCompletions.set(o.clone(),t),this._source.clearSuggestWidgetInlineCompletions(t)}))}const a=this.cursorPosition.read(e),l={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:null===r||void 0===r?void 0:r.toSelectedSuggestionInfo()};return this._source.fetch(a,l,n)})),this._filteredInlineCompletionItems=(0,s.nK)("filteredInlineCompletionItems",(e=>{const t=this._source.inlineCompletions.read(e);if(!t)return[];const i=this.cursorPosition.read(e),n=t.inlineCompletions.filter((t=>t.isVisible(this.textModel,i,e)));return n})),this.selectedInlineCompletionIndex=(0,s.nK)("selectedCachedCompletionIndex",(e=>{const t=this._selectedInlineCompletionId.read(e),i=this._filteredInlineCompletionItems.read(e),n=void 0===this._selectedInlineCompletionId?-1:i.findIndex((e=>e.semanticId===t));return-1===n?(this._selectedInlineCompletionId.set(void 0,void 0),0):n})),this.selectedInlineCompletion=(0,s.nK)("selectedCachedCompletion",(e=>this._filteredInlineCompletionItems.read(e)[this.selectedInlineCompletionIndex.read(e)])),this.lastTriggerKind=this._source.inlineCompletions.map((e=>null===e||void 0===e?void 0:e.request.context.triggerKind)),this.inlineCompletionsCount=(0,s.nK)("selectedInlineCompletionsCount",(e=>this.lastTriggerKind.read(e)===Q.bw.Explicit?this._filteredInlineCompletionItems.read(e).length:void 0)),this.state=(0,s.nK)("ghostTextAndCompletion",(e=>{var t;const i=this.textModel,n=this.selectedSuggestItem.read(e);if(n){const o=this._source.suggestWidgetInlineCompletions.read(e),s=o?o.inlineCompletions:[this.selectedInlineCompletion.read(e)].filter(j.$K),r=n.toSingleTextEdit().removeCommonPrefix(i),a=(0,B.bX)(s,(t=>{let o=t.toSingleTextEdit(e);return o=o.removeCommonPrefix(i,w.e.fromPositions(o.range.getStartPosition(),n.range.getEndPosition())),o.augments(r)?{edit:o,completion:t}:void 0}));if(!this._suggestPreviewEnabled.read(e)&&!a)return;const l=null!==(t=null===a||void 0===a?void 0:a.edit)&&void 0!==t?t:r,c=a?a.edit.text.length-r.text.length:0,d=this._suggestPreviewMode.read(e),u=this.cursorPosition.read(e),h=l.computeGhostText(i,d,u,c);return{ghostText:null!==h&&void 0!==h?h:new O(l.range.endLineNumber,[]),completion:null===a||void 0===a?void 0:a.completion,suggestItem:n}}{if(!this._isActive.read(e))return;const t=this.selectedInlineCompletion.read(e);if(!t)return;const n=t.toSingleTextEdit(e),o=this._inlineSuggestMode.read(e),s=this.cursorPosition.read(e),r=n.computeGhostText(i,o,s);return r?{ghostText:r,completion:t,suggestItem:void 0}:void 0}})),this.ghostText=(0,s.nK)("ghostText",(e=>{const t=this.state.read(e);if(t)return t.ghostText})),this._register((0,s.$g)(this._fetchInlineCompletions,!0)),this._register((0,s.EH)("call handleItemDidShow",(e=>{var t,i;const n=this.state.read(e),o=null===n||void 0===n?void 0:n.completion;if((null===o||void 0===o?void 0:o.semanticId)!==(null===g||void 0===g?void 0:g.semanticId)&&(g=o,o)){const e=o.inlineCompletion,n=e.source;null===(i=(t=n.provider).handleItemDidShow)||void 0===i||i.call(t,n.inlineCompletions,e.sourceInlineCompletion,e.insertText)}})))}trigger(e){return Ie(this,void 0,void 0,(function*(){this._isActive.set(!0,e),yield this._fetchInlineCompletions.get()}))}triggerExplicitly(e){return Ie(this,void 0,void 0,(function*(){(0,h.c8)(e,(e=>{this._isActive.set(!0,e),this._forceUpdate.trigger(e,Q.bw.Explicit)})),yield this._fetchInlineCompletions.get()}))}stop(e){(0,h.c8)(e,(e=>{this._isActive.set(!1,e),this._source.clear(e)}))}_deltaSelectedInlineCompletionIndex(e){return Ie(this,void 0,void 0,(function*(){yield this.triggerExplicitly(),this._isNavigatingCurrentInlineCompletion=!0;try{const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}finally{this._isNavigatingCurrentInlineCompletion=!1}}))}next(){return Ie(this,void 0,void 0,(function*(){yield this._deltaSelectedInlineCompletionIndex(1)}))}previous(){return Ie(this,void 0,void 0,(function*(){yield this._deltaSelectedInlineCompletionIndex(-1)}))}accept(e){var t,i;return Ie(this,void 0,void 0,(function*(){if(e.getModel()!==this.textModel)throw new D.he;const n=this.ghostText.get(),o=null===(t=this.selectedInlineCompletion.get())||void 0===t?void 0:t.toInlineCompletion(void 0);n&&o&&(e.pushUndoStop(),o.snippetInfo?(e.executeEdits("inlineSuggestion.accept",[q.h.replaceMove(o.range,""),...o.additionalTextEdits]),e.setPosition(o.snippetInfo.range.getStartPosition()),null===(i=we.SnippetController2.get(e))||void 0===i||i.insert(o.snippetInfo.snippet,{undoStopBefore:!1})):e.executeEdits("inlineSuggestion.accept",[q.h.replaceMove(o.range,o.insertText),...o.additionalTextEdits]),o.command&&(yield this._commandService.executeCommand(o.command.id,...o.command.arguments||[]).then(void 0,D.Cp)),(0,s.PS)((e=>{this._source.clear(e),this._isActive.set(!1,e)})))}))}acceptNextWord(e){this._acceptNext(e,((e,t)=>{const i=this.textModel.getLanguageIdAtPosition(e.lineNumber,e.column),n=this._languageConfigurationService.getLanguageConfiguration(i),o=new RegExp(n.wordDefinition.source,n.wordDefinition.flags.replace("g","")),s=t.match(o);let r=0;r=s&&void 0!==s.index?0===s.index?s[0].length:s.index:t.length;const a=/\s+/g.exec(t);return a&&void 0!==a.index&&a.index+a[0].length<r&&(r=a.index+a[0].length),r}))}acceptNextLine(e){this._acceptNext(e,((e,t)=>{const i=t.match(/\n/);return i&&void 0!==i.index?i.index+1:t.length}))}_acceptNext(e,t){var i;if(e.getModel()!==this.textModel)throw new D.he;const n=this.ghostText.get(),o=null===(i=this.selectedInlineCompletion.get())||void 0===i?void 0:i.toInlineCompletion(void 0);if(!n||!o)return;if(o.snippetInfo||o.filterText!==o.insertText)return void this.accept(e);if(0===n.parts.length)return;const s=n.parts[0],r=new p.L(n.lineNumber,s.column),a=s.lines.join("\n"),l=t(r,a);if(l===a.length&&1===n.parts.length)return void this.accept(e);const c=a.substring(0,l);this._isAcceptingPartially=!0;try{e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[q.h.replace(w.e.fromPositions(r),c)]);const t=P(c);e.setPosition(M(r,t))}finally{this._isAcceptingPartially=!1}if(o.source.provider.handlePartialAccept){const t=w.e.fromPositions(o.range.getStartPosition(),M(r,P(c))),i=e.getModel().getValueInRange(t,1);o.source.provider.handlePartialAccept(o.source.inlineCompletions,o.sourceInlineCompletion,i.length)}}};Ne=Le([xe(9,ye.TG),xe(10,Se.H),xe(11,Y.c_)],Ne);var De=i(66515),Te=i(8472);class ke extends u.JT{get selectedItem(){return this._selectedItem}constructor(e,t,i){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=i,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=(0,s.uh)("suggestWidgetInlineCompletionProvider.selectedItem",void 0),this._register(e.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(e.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const n=Te.SuggestController.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(e,t,i)=>{var o;(0,s.PS)((e=>this.checkModelVersion(e)));const r=this.editor.getModel();if(!r)return-1;const a=null===(o=this.suggestControllerPreselector())||void 0===o?void 0:o.removeCommonPrefix(r);if(!a)return-1;const l=p.L.lift(t),c=i.map(((e,t)=>{const i=Re.fromSuggestion(n,r,l,e,this.isShiftKeyPressed).toSingleTextEdit().removeCommonPrefix(r);return{index:t,valid:a.augments(i),prefixLength:i.text.length,suggestItem:e}})).filter((e=>e&&e.valid&&e.prefixLength>0)),d=(0,B.Dc)(c,(0,B.tT)((e=>e.prefixLength),B.fv));return d?d.index:-1}}));let e=!1;const t=()=>{e||(e=!0,this._register(n.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(n.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.update(!1)}))),this._register(n.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(d.ju.once(n.model.onDidTrigger)((e=>{t()})))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();this._isActive===e&&function(e,t){if(e===t)return!0;if(!e||!t)return!1;return e.equals(t)}(this._currentSuggestItemInfo,t)||(this._isActive=e,this._currentSuggestItemInfo=t,(0,s.PS)((e=>{this.checkModelVersion(e),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,e)})))}getSuggestItemInfo(){const e=Te.SuggestController.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),n=this.editor.getModel();return t&&i&&n?Re.fromSuggestion(e,n,i,t.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const e=Te.SuggestController.get(this.editor);null===e||void 0===e||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Te.SuggestController.get(this.editor);null===e||void 0===e||e.forceRenderingAbove()}}class Re{static fromSuggestion(e,t,i,n,o){let{insertText:s}=n.completion,r=!1;if(4&n.completion.insertTextRules){const e=(new oe.Yj).parse(s);e.children.length<100&&De.l.adjustWhitespace(t,i,!0,e),s=e.toString(),r=!0}const a=e.getOverwriteInfo(n,o);return new Re(w.e.fromPositions(i.delta(0,-a.overwriteBefore),i.delta(0,Math.max(a.overwriteAfter,0))),s,n.completion.kind,r)}constructor(e,t,i,n){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=n}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new Q.ln(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new $(this.range,this.insertText)}}var Me=i(49396),Pe=i(53435),Oe=i(10071),Ae=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Ee=function(e,t){return function(i,n){t(i,n,e)}};let He=class e extends u.JT{static get(t){return t.getContribution(e.ID)}constructor(e,t,i,n,o,r,m,v){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.configurationService=n,this.commandService=o,this.debounceService=r,this.languageFeaturesService=m,this.audioCueService=v,this.model=(0,h.DN)("inlineCompletionModel",void 0),this.textModelVersionId=(0,s.uh)("textModelVersionId",-1),this.cursorPosition=(0,s.uh)("cursorPosition",new p.L(1,1)),this.suggestWidgetAdaptor=this._register(new ke(this.editor,(()=>{var e,t;return null===(t=null===(e=this.model.get())||void 0===e?void 0:e.selectedInlineCompletion.get())||void 0===t?void 0:t.toSingleTextEdit(void 0)}),(e=>this.updateObservables(e,Ce.Other)))),this._enabled=(0,s.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(60).enabled)),this.ghostTextWidget=this._register(this.instantiationService.createInstance(U,this.editor,{ghostText:this.model.map(((e,t)=>null===e||void 0===e?void 0:e.ghostText.read(t))),minReservedLineCount:(0,s.Dz)(0),targetTextModel:this.model.map((e=>null===e||void 0===e?void 0:e.textModel))})),this._debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(new l.f(this.contextKeyService,this.model)),this._register(d.ju.runAndSubscribe(e.onDidChangeModel,(()=>(0,h.PS)((i=>{this.model.set(void 0,i),this.updateObservables(i,Ce.Other);const n=e.getModel();if(n){const o=t.createInstance(Ne,n,this.suggestWidgetAdaptor.selectedItem,this.cursorPosition,this.textModelVersionId,this._debounceValue,(0,s.rD)(e.onDidChangeConfiguration,(()=>e.getOption(114).preview)),(0,s.rD)(e.onDidChangeConfiguration,(()=>e.getOption(114).previewMode)),(0,s.rD)(e.onDidChangeConfiguration,(()=>e.getOption(60).mode)),this._enabled);this.model.set(o,i)}})))));const f=e=>{var t;return e.isUndoing?Ce.Undo:e.isRedoing?Ce.Redo:(null===(t=this.model.get())||void 0===t?void 0:t.isAcceptingPartially)?Ce.AcceptWord:Ce.Other};let _;this._register(e.onDidChangeModelContent((e=>(0,h.PS)((t=>this.updateObservables(t,f(e))))))),this._register(e.onDidChangeCursorPosition((e=>(0,h.PS)((t=>{var i;this.updateObservables(t,Ce.Other),3===e.reason&&(null===(i=this.model.get())||void 0===i||i.stop(t))}))))),this._register(e.onDidType((()=>(0,h.PS)((e=>{var t;this.updateObservables(e,Ce.Other),this._enabled.get()&&(null===(t=this.model.get())||void 0===t||t.trigger(e))}))))),this._register(this.commandService.onDidExecuteCommand((t=>{new Set([g.CoreEditingCommands.Tab.id,g.CoreEditingCommands.DeleteLeft.id,g.CoreEditingCommands.DeleteRight.id,a.Ou,"acceptSelectedSuggestion"]).has(t.commandId)&&e.hasTextFocus()&&this._enabled.get()&&(0,h.PS)((e=>{var t;null===(t=this.model.get())||void 0===t||t.trigger(e)}))}))),this._register(this.editor.onDidBlurEditorWidget((()=>{this.configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(60).keepOnBlur||K.QG.dropDownVisible||(0,h.PS)((e=>{var t;null===(t=this.model.get())||void 0===t||t.stop(e)}))}))),this._register((0,s.EH)("forceRenderingAbove",(e=>{var t;const i=null===(t=this.model.read(e))||void 0===t?void 0:t.state.read(e);(null===i||void 0===i?void 0:i.suggestItem)?i.ghostText.lineCount>=2&&this.suggestWidgetAdaptor.forceRenderingAbove():this.suggestWidgetAdaptor.stopForceRenderingAbove()}))),this._register((0,u.OF)((()=>{this.suggestWidgetAdaptor.stopForceRenderingAbove()}))),this._register((0,s.EH)("play audio cue & read suggestion",(e=>{const t=this.model.read(e),i=null===t||void 0===t?void 0:t.state.read(e);if(t&&i&&i.completion){if(i.completion.semanticId!==_){if(_=i.completion.semanticId,t.isNavigatingCurrentInlineCompletion)return;this.audioCueService.playAudioCue(Me.y$.inlineSuggestion).then((()=>{if(this.editor.getOption(6)){const e=t.textModel.getLineContent(i.ghostText.lineNumber);(0,c.Z9)(i.ghostText.renderForScreenReader(e))}}))}}else _=void 0}))),this._register(new K.oU(this.editor,this.model,this.instantiationService))}updateObservables(e,t){var i,n;const o=this.editor.getModel();this.textModelVersionId.set(null!==(i=null===o||void 0===o?void 0:o.getVersionId())&&void 0!==i?i:-1,e,t),this.cursorPosition.set(null!==(n=this.editor.getPosition())&&void 0!==n?n:new p.L(1,1),e)}shouldShowHoverAt(e){var t;const i=null===(t=this.model.get())||void 0===t?void 0:t.ghostText.get();return!!i&&i.parts.some((t=>e.containsPosition(new p.L(i.lineNumber,t.column))))}shouldShowHoverAtViewZone(e){return this.ghostTextWidget.ownsViewZone(e)}};He.ID="editor.contrib.inlineCompletionsController",He=Ae([Ee(1,ye.TG),Ee(2,Oe.i6),Ee(3,Pe.Ui),Ee(4,Se.H),Ee(5,m.A),Ee(6,v.p),Ee(7,Me.e7)],He);var Ve=i(26511),Ue=i(41377),We=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class Fe extends n.R6{constructor(){super({id:Fe.ID,label:Ve.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Oe.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}run(e,t){var i;return We(this,void 0,void 0,(function*(){const e=He.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.next()}))}}Fe.ID=a.OW;class Ke extends n.R6{constructor(){super({id:Ke.ID,label:Ve.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Oe.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}run(e,t){var i;return We(this,void 0,void 0,(function*(){const e=He.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.previous()}))}}Ke.ID=a.Np;class Be extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:Ve.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:r.u.writable})}run(e,t){var i;return We(this,void 0,void 0,(function*(){const e=He.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.triggerExplicitly()}))}}class ze extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:Ve.NC("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:Oe.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065},menuOpts:[{menuId:Ue.eH.InlineSuggestionToolbar,title:Ve.NC("acceptWord","Accept Word"),group:"primary",order:2}]})}run(e,t){var i;return We(this,void 0,void 0,(function*(){const e=He.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.acceptNextWord(e.editor)}))}}class je extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:Ve.NC("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:Oe.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:Ue.eH.InlineSuggestionToolbar,title:Ve.NC("acceptLine","Accept Line"),group:"secondary",order:2}]})}run(e,t){var i;return We(this,void 0,void 0,(function*(){const e=He.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.acceptNextLine(e.editor)}))}}class qe extends n.R6{constructor(){super({id:a.Ou,label:Ve.NC("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:l.f.inlineSuggestionVisible,menuOpts:[{menuId:Ue.eH.InlineSuggestionToolbar,title:Ve.NC("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:Oe.Ao.and(l.f.inlineSuggestionVisible,r.u.tabMovesFocus.toNegated(),l.f.inlineSuggestionHasIndentationLessThanTabSize)}})}run(e,t){var i;return We(this,void 0,void 0,(function*(){const e=He.get(t);e&&(null===(i=e.model.get())||void 0===i||i.accept(e.editor),e.editor.focus())}))}}class Qe extends n.R6{constructor(){super({id:Qe.ID,label:Ve.NC("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:l.f.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}run(e,t){return We(this,void 0,void 0,(function*(){const e=He.get(t);(0,s.PS)((t=>{var i;null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.stop(t)}))}))}}Qe.ID="editor.action.inlineSuggest.hide";class Ye extends Ue.Ke{constructor(){super({id:Ye.ID,title:Ve.NC("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:Ue.eH.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:Oe.Ao.equals("config.editor.inlineSuggest.showToolbar","always")})}run(e,t){return We(this,void 0,void 0,(function*(){const t=e.get(Pe.Ui),i="always"===t.getValue("editor.inlineSuggest.showToolbar")?"onHover":"always";t.updateValue("editor.inlineSuggest.showToolbar",i)}))}}Ye.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var Ge=i(20494),Je=i(41045),Ze=i(90239),$e=i(65429),Xe=i(66495),et=i(57732),tt=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},it=function(e,t){return function(i,n){t(i,n,e)}};class nt{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let ot=class{constructor(e,t,i,n,o,s){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=n,this._instantiationService=o,this._telemetryService=s,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=He.get(this._editor);if(!t)return null;const i=e.target;if(8===i.type){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new o.YM(1e3,this,w.e.fromPositions(this._editor.getModel().validatePosition(n.positionBefore||n.position)),e.event.posx,e.event.posy,!1)}if(7===i.type&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1);if(6===i.type){if(i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if("always"===this._editor.getOption(60).showToolbar)return[];const i=He.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new nt(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new u.SL,n=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,n,i);const o=n.controller.model.get(),r=this._instantiationService.createInstance(K.QG,this._editor,!1,(0,s.Dz)(null),o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.selectedInlineCompletion.map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]})));return e.fragment.appendChild(r.getDomNode()),o.triggerExplicitly(),i.add(r),i}renderScreenReaderText(e,t,i){const n=Ge.$,o=n("div.hover-row.markdown-hover"),r=Ge.R3(o,n("div.hover-contents",{"aria-live":"assertive"})),a=i.add(new Ze.$({editor:this._editor},this._languageService,this._openerService));i.add((0,s.EH)("update hover",(n=>{var o;const s=null===(o=t.controller.model.read(n))||void 0===o?void 0:o.ghostText.read(n);if(s){const t=this._editor.getModel().getLineContent(s.lineNumber);(t=>{i.add(a.onDidRenderAsync((()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()})));const n=Ve.NC("inlineSuggestionFollows","Suggestion:"),o=i.add(a.render((new Je.W5).appendText(n).appendCodeblock("text",t)));r.replaceChildren(o.element)})(s.renderForScreenReader(t))}else Ge.mc(r)}))),e.fragment.appendChild(o)}};ot=tt([it(1,y.O),it(2,Xe.v4),it(3,$e.F),it(4,ye.TG),it(5,et.b)],ot),(0,n._K)(He.ID,He,3),(0,n.Qr)(Be),(0,n.Qr)(Fe),(0,n.Qr)(Ke),(0,n.Qr)(ze),(0,n.Qr)(je),(0,n.Qr)(qe),(0,n.Qr)(Qe),(0,Ue.r1)(Ye),o.Ae.register(ot)},91900:(e,t,i)=>{i.d(t,{oU:()=>R,QG:()=>O});var n=i(20494),o=i(74623),s=i(81485),r=i(98110),a=i(88648),l=i(37368),c=i(87159),d=i(59652),u=i(95331),h=i(22205),g=i(44352),p=i(75246),m=i(99924),v=i(76958),f=i(49726),_=i(26511),b=i(80007),C=i(49226),w=i(41377),S=i(39049),y=i(10071),L=i(23417),x=i(22046),I=i(85149),N=i(57732),D=i(31708),T=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},k=function(e,t){return function(i,n){t(i,n,e)}};let R=class extends d.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,u.rD)(this.editor.onDidChangeConfiguration,(()=>"always"===this.editor.getOption(60).showToolbar)),this.sessionPosition=void 0,this.position=(0,u.nK)("position",(e=>{var t,i,n;const o=null===(t=this.model.read(e))||void 0===t?void 0:t.ghostText.read(e);if(!this.alwaysShowToolbar.read(e)||!o||0===o.parts.length)return this.sessionPosition=void 0,null;const s=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const r=new m.L(o.lineNumber,Math.min(s,null!==(n=null===(i=this.sessionPosition)||void 0===i?void 0:i.column)&&void 0!==n?n:Number.MAX_SAFE_INTEGER));return this.sessionPosition=r,r})),this._register((0,h.b2)("setup content widget",((t,i)=>{const n=this.model.read(t);if(!n||!this.alwaysShowToolbar.read(t))return;const o=i.add(this.instantiationService.createInstance(O,this.editor,!0,this.position,n.selectedInlineCompletionIndex,n.inlineCompletionsCount,n.selectedInlineCompletion.map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]}))));e.addContentWidget(o),i.add((0,d.OF)((()=>e.removeContentWidget(o)))),i.add((0,u.EH)("request explicit",(e=>{this.position.read(e)&&n.lastTriggerKind.read(e)!==v.bw.Explicit&&n.triggerExplicitly()})))})))}};R=T([k(2,x.TG)],R);const M=(0,D.q5)("inline-suggestion-hints-next",c.l.chevronRight,(0,_.NC)("parameterHintsNextIcon","Icon for show next parameter hint.")),P=(0,D.q5)("inline-suggestion-hints-previous",c.l.chevronLeft,(0,_.NC)("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let O=class e extends d.JT{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const n=new r.aU(e,t,i,!0,(()=>this._commandService.executeCommand(e))),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let s=t;return o&&(s=(0,_.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),n.tooltip=s,n}constructor(t,i,s,c,d,h,g,m,v,b,C){super(),this.editor=t,this.withBorder=i,this._position=s,this._currentSuggestionIdx=c,this._suggestionCount=d,this._extraCommands=h,this._commandService=g,this.keybindingService=v,this._contextKeyService=b,this._menuService=C,this.id="InlineSuggestionHintsContentWidget".concat(e.id++),this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,n.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,n.h)("div",{style:{display:"flex"}},[(0,n.h)("div@actionBar",{className:"custom-actions"}),(0,n.h)("div@toolBar")])]),this.previousAction=this.createCommandAction(f.Np,(0,_.NC)("previous","Previous"),p.k.asClassName(P)),this.availableSuggestionCountAction=new r.aU("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(f.OW,(0,_.NC)("next","Next"),p.k.asClassName(M)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(w.eH.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new l.pY((()=>{this.availableSuggestionCountAction.label=""}),100)),this.disableButtonsDebounced=this._register(new l.pY((()=>{this.previousAction.enabled=this.nextAction.enabled=!1}),100)),this.lastCommands=[];const S=this._register(new o.o(this.nodes.actionBar));S.push(this.previousAction,{icon:!0,label:!1}),S.push(this.availableSuggestionCountAction),S.push(this.nextAction,{icon:!0,label:!1}),this.toolBar=this._register(m.createInstance(E,this.nodes.toolBar,w.eH.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},actionViewItemProvider:(e,t)=>e instanceof w.U8?m.createInstance(A,e,void 0):void 0,telemetrySource:"InlineSuggestionToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility((t=>{e._dropDownVisible=t}))),this._register((0,u.EH)("update position",(e=>{this._position.read(e),this.editor.layoutContentWidget(this)}))),this._register((0,u.EH)("counts",(e=>{const t=this._suggestionCount.read(e),i=this._currentSuggestionIdx.read(e);void 0!==t?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label="".concat(i+1,"/").concat(t)):this.clearAvailableSuggestionCountLabelDebounced.schedule(),void 0!==t&&t>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()}))),this._register((0,u.EH)("extra commands",(e=>{const t=this._extraCommands.read(e);if((0,a.fS)(this.lastCommands,t))return;this.lastCommands=t;const i=t.map((e=>({class:void 0,id:e.id,enabled:!0,tooltip:e.tooltip||"",label:e.title,run:t=>this._commandService.executeCommand(e.id)})));for(const[n,o]of this.inlineCompletionsActionsMenus.getActions())for(const e of o)e instanceof w.U8&&i.push(e);i.length>0&&i.unshift(new r.Z0),this.toolBar.setAdditionalSecondaryActions(i)})))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};O._dropDownVisible=!1,O.id=0,O=T([k(6,S.H),k(7,x.TG),k(8,I.d),k(9,y.i6),k(10,w.co)],O);class A extends b.Mm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=(0,n.h)("div.keybinding").root;new s.e(t,g.OS,Object.assign({disableTitle:!0},s.F)).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}}let E=class extends C.T{constructor(e,t,i,n,o,s,r,a){super(e,Object.assign({resetMenu:t},i),n,o,s,r,a),this.menuId=t,this.options2=i,this.menuService=n,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this._store.add(this.menu.onDidChange((()=>this.updateToolbar()))),this.updateToolbar()}updateToolbar(){var e,t,i,n,o,s,r;const a=[],l=[];(0,b.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:a,secondary:l},null===(i=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(o=null===(n=this.options2)||void 0===n?void 0:n.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(r=null===(s=this.options2)||void 0===s?void 0:s.toolbarOptions)||void 0===r?void 0:r.useSeparatorsInPrimaryActions),l.push(...this.additionalActions),this.setActions(a,l)}setAdditionalSecondaryActions(e){(0,a.fS)(this.additionalActions,e,((e,t)=>e===t))||(this.additionalActions=e,this.updateToolbar())}};E=T([k(3,w.co),k(4,y.i6),k(5,L.i),k(6,I.d),k(7,N.b)],E)},80039:(e,t,i)=>{i.r(t),i.d(t,{InlineProgressManager:()=>f});var n=i(20494),o=i(37368),s=i(87159),r=i(59652),a=i(17224),l=i(75246),c=i(55597),d=i(13101),u=i(22046),h=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t){return function(i,n){t(i,n,e)}},p=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const m=d.qx.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:a.B4,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class v extends r.JT{constructor(e,t,i,n,o){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(n),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=n.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=n.$("span.icon");this.domNode.append(t),t.classList.add(...l.k.asClassNameArray(s.l.loading),"codicon-modifier-spin");const i=()=>{const e=this.editor.getOption(64);this.domNode.style.height="".concat(e,"px"),this.domNode.style.width="".concat(Math.ceil(.8*e),"px")};i(),this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(50)||e.hasChanged(64))&&i()}))),this._register(n.nm(this.domNode,n.tw.CLICK,(e=>{this.delegate.cancel()})))}getId(){return v.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}v.baseId="editor.widget.inlineProgressWidget";let f=class extends r.JT{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new r.XK),this._currentWidget=new r.XK,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}showWhile(e,t,i){return p(this,void 0,void 0,(function*(){const n=this._operationIdPool++;this._currentOperation=n,this.clear(),this._showPromise.value=(0,o.Vg)((()=>{const n=c.e.fromPositions(e);this._currentDecorations.set([{range:n,options:m}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(v,this.id,this._editor,n,t,i))}),this._showDelay);try{return yield i}finally{this._currentOperation===n&&(this.clear(),this._currentOperation=void 0)}}))}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};f=h([g(2,u.TG)],f)},57910:(e,t,i)=>{i.r(t),i.d(t,{ExpandLineSelectionAction:()=>a});var n=i(33344),o=i(57994),s=i(90567),r=i(26511);class a extends n.R6{constructor(){super({id:"expandLineSelection",label:r.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:s.u.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,o.P.expandLineSelection(n,n.getCursorStates())),n.revealPrimaryCursor(i.source,!0)}}(0,n.Qr)(a)},20880:(e,t,i)=>{i.r(t),i.d(t,{AbstractCaseAction:()=>Q,AbstractDeleteAllToBoundaryAction:()=>K,AbstractSortLinesAction:()=>M,CamelCaseAction:()=>X,DeleteAllLeftAction:()=>B,DeleteAllRightAction:()=>z,DeleteDuplicateLinesAction:()=>A,DeleteLinesAction:()=>H,DuplicateSelectionAction:()=>k,IndentLinesAction:()=>V,InsertLineAfterAction:()=>F,InsertLineBeforeAction:()=>W,JoinLinesAction:()=>j,KebabCaseAction:()=>ee,LowerCaseAction:()=>G,SnakeCaseAction:()=>$,SortLinesAscendingAction:()=>P,SortLinesDescendingAction:()=>O,TitleCaseAction:()=>Z,TransposeAction:()=>q,TrimTrailingWhitespaceAction:()=>E,UpperCaseAction:()=>Y});var n=i(99553),o=i(73731),s=i(33344),r=i(45596),a=i(5155),l=i(91748),c=i(95354),d=i(99924),u=i(55597),h=i(80253),g=i(90567);class p{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=[];for(let s=i.startLineNumber;s<=i.endLineNumber;s++)n.push(e.getLineContent(s));const o=n.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new u.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new u.e(i.startLineNumber,1,i.startLineNumber,1),o+"\n"):t.addEditOperation(new u.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=i.startLineNumber,t=i.startColumn,n=i.endLineNumber,o=i.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(n+=this._endLineNumberDelta,o=1),i=h.Y.createWithDirection(e,t,n,o,this._selectionDirection)}return i}}var m=i(17224),v=i(97195),f=i(70860),_=i(41598),b=i(63174),C=i(31647),w=i(1391),S=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,n){t(i,n,e)}};let L=class{constructor(e,t,i,n){this._languageConfigurationService=n,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:o,indentSize:s,insertSpaces:r}=e.getOptions(),a=this.buildIndentConverter(o,s,r),l={tokenization:{getLineTokens:t=>e.tokenization.getLineTokens(t),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i)},getLineContent:null};if(n.startLineNumber===n.endLineNumber&&1===e.getLineMaxColumn(n.startLineNumber)){const i=n.startLineNumber,o=this._isMovingDown?i+1:i-1;1===e.getLineMaxColumn(o)?t.addEditOperation(new u.e(1,1,1,1),null):(t.addEditOperation(new u.e(i,1,i,1),e.getLineContent(o)),t.addEditOperation(new u.e(o,1,o,e.getLineMaxColumn(o)),null)),n=new h.Y(o,1,o,1)}else{let i,s;if(this._isMovingDown){i=n.endLineNumber+1,s=e.getLineContent(i),t.addEditOperation(new u.e(i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let c=s;if(this.shouldAutoIndent(e,n)){const d=this.matchEnterRule(e,a,o,i,n.startLineNumber-1);if(null!==d){const t=m.V8(e.getLineContent(i)),n=d+b.Y(t,o),a=b.J(n,o,r);c=a+this.trimLeft(s)}else{l.getLineContent=t=>t===n.startLineNumber?e.getLineContent(i):e.getLineContent(t);const t=(0,C.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber,a,this._languageConfigurationService);if(null!==t){const n=m.V8(e.getLineContent(i)),a=b.Y(t,o);if(a!==b.Y(n,o)){const e=b.J(a,o,r);c=e+this.trimLeft(s)}}}t.addEditOperation(new u.e(n.startLineNumber,1,n.startLineNumber,1),c+"\n");const h=this.matchEnterRuleMovingDown(e,a,o,n.startLineNumber,i,c);if(null!==h)0!==h&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,h);else{l.getLineContent=t=>t===n.startLineNumber?c:t>=n.startLineNumber+1&&t<=n.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);const s=(0,C.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber+1,a,this._languageConfigurationService);if(null!==s){const i=m.V8(e.getLineContent(n.startLineNumber)),a=b.Y(s,o),l=b.Y(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}else t.addEditOperation(new u.e(n.startLineNumber,1,n.startLineNumber,1),c+"\n")}else if(i=n.startLineNumber-1,s=e.getLineContent(i),t.addEditOperation(new u.e(i,1,i+1,1),null),t.addEditOperation(new u.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+s),this.shouldAutoIndent(e,n)){l.getLineContent=t=>t===i?e.getLineContent(n.startLineNumber):e.getLineContent(t);const s=this.matchEnterRule(e,a,o,n.startLineNumber,n.startLineNumber-2);if(null!==s)0!==s&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,s);else{const s=(0,C.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(n.startLineNumber,1),i,a,this._languageConfigurationService);if(null!==s){const i=m.V8(e.getLineContent(n.startLineNumber)),a=b.Y(s,o),l=b.Y(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>v.U.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>v.U.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let s=o.indentation;o.indentAction===f.wU.None||o.indentAction===f.wU.Indent?s=o.indentation+o.appendText:o.indentAction===f.wU.IndentOutdent?s=o.indentation:o.indentAction===f.wU.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);const r=e.getLineContent(n);if(this.trimLeft(r).indexOf(this.trimLeft(s))>=0){const o=m.V8(e.getLineContent(n));let r=m.V8(s);const a=(0,C.tI)(e,n,this._languageConfigurationService);null!==a&&2&a&&(r=t.unshiftIndent(r));return b.Y(r,i)-b.Y(o,i)}}return null}matchEnterRuleMovingDown(e,t,i,n,o,s){if(m.ow(s)>=0){const s=e.getLineMaxColumn(o),r=(0,w.A)(this._autoIndent,e,new u.e(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,r)}{let o=n-1;for(;o>=1;){const t=e.getLineContent(o);if(m.ow(t)>=0)break;o--}if(o<1||n>e.getLineCount())return null;const s=e.getLineMaxColumn(o),r=(0,w.A)(this._autoIndent,e,new u.e(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,r)}}matchEnterRule(e,t,i,n,o,s){let r=o;for(;r>=1;){let t;t=r===o&&void 0!==s?s:e.getLineContent(r);if(m.ow(t)>=0)break;r--}if(r<1||n>e.getLineCount())return null;const a=e.getLineMaxColumn(r),l=(0,w.A)(this._autoIndent,e,new u.e(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,l)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1);return i===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport}getIndentEditsOfMovingBlock(e,t,i,n,o,s){for(let r=i.startLineNumber;r<=i.endLineNumber;r++){const a=e.getLineContent(r),l=m.V8(a),c=b.Y(l,n)+s,d=b.J(c,n,o);d!==l&&(t.addEditOperation(new u.e(r,1,r,l.length+1),d),r===i.endLineNumber&&i.endColumn<=l.length+1&&""===d&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};L=S([y(3,_.c_)],L);class x{static getCollator(){return x._COLLATOR||(x._COLLATOR=new Intl.Collator),x._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=function(e,t,i){const n=I(e,t,i);if(!n)return null;return c.h.replace(new u.e(n.startLineNumber,1,n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),n.after.join("\n"))}(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(null===e)return!1;const n=I(e,t,i);if(!n)return!1;for(let o=0,s=n.before.length;o<s;o++)if(n.before[o]!==n.after[o])return!0;return!1}}function I(e,t,i){const n=t.startLineNumber;let o=t.endLineNumber;if(1===t.endColumn&&o--,n>=o)return null;const s=[];for(let a=n;a<=o;a++)s.push(e.getLineContent(a));let r=s.slice(0);return r.sort(x.getCollator().compare),!0===i&&(r=r.reverse()),{startLineNumber:n,endLineNumber:o,before:s,after:r}}x._COLLATOR=null;var N=i(26511),D=i(41377);class T extends s.R6{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map(((e,t)=>({selection:e,index:t,ignore:!1})));i.sort(((e,t)=>u.e.compareRangesUsingStarts(e.selection,t.selection)));let n=i[0];for(let s=1;s<i.length;s++){const e=i[s];n.selection.endLineNumber===e.selection.startLineNumber&&(n.index<e.index?e.ignore=!0:(n.ignore=!0,n=e))}const o=[];for(const s of i)o.push(new p(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class k extends s.R6{constructor(){super({id:"editor.action.duplicateSelection",label:N.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:g.u.writable,menuOpts:{menuId:D.eH.MenubarSelectionMenu,group:"2_line",title:N.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],o=t.getSelections(),s=t.getModel();for(const a of o)if(a.isEmpty())n.push(new p(a,!0));else{const e=new h.Y(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new r.OY(e,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class R extends s.R6{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(_.c_),n=[],o=t.getSelections()||[],s=t.getOption(10);for(const r of o)n.push(new L(r,this.down,s,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class M extends s.R6{constructor(e,t){super(t),this.descending=e}run(e,t){const i=t.getSelections()||[];for(const o of i)if(!x.canRun(t.getModel(),o,this.descending))return;const n=[];for(let o=0,s=i.length;o<s;o++)n[o]=new x(i[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class P extends M{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:N.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:g.u.writable})}}class O extends M{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:N.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:g.u.writable})}}class A extends s.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:N.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:g.u.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(1===i.getLineCount()&&1===i.getLineMaxColumn(1))return;const n=[],o=[];let s=0;for(const r of t.getSelections()){const e=new Set,t=[];for(let n=r.startLineNumber;n<=r.endLineNumber;n++){const o=i.getLineContent(n);e.has(o)||(t.push(o),e.add(o))}const a=new h.Y(r.startLineNumber,1,r.endLineNumber,i.getLineMaxColumn(r.endLineNumber)),l=r.startLineNumber-s,d=new h.Y(l,1,l+t.length-1,t[t.length-1].length);n.push(c.h.replace(a,t.join("\n"))),o.push(d),s+=r.endLineNumber-r.startLineNumber+1-t.length}t.pushUndoStop(),t.executeEdits(this.id,n,o),t.pushUndoStop()}}class E extends s.R6{constructor(){super({id:E.ID,label:N.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:(0,n.gx)(2089,2102),weight:100}})}run(e,t,i){let n=[];"auto-save"===i.reason&&(n=(t.getSelections()||[]).map((e=>new d.L(e.positionLineNumber,e.positionColumn))));const o=t.getSelection();if(null===o)return;const s=new a.V(o,n);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}}E.ID="editor.action.trimTrailingWhitespace";class H extends s.R6{constructor(){super({id:"editor.action.deleteLines",label:N.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;let o=0;const s=[],r=[];for(let a=0,l=i.length;a<l;a++){const e=i[a];let t=e.startLineNumber,l=e.endLineNumber,d=1,u=n.getLineMaxColumn(l);l<n.getLineCount()?(l+=1,u=1):t>1&&(t-=1,d=n.getLineMaxColumn(t)),s.push(c.h.replace(new h.Y(t,d,l,u),"")),r.push(new h.Y(t-o,e.positionColumn,t-o,e.positionColumn)),o+=e.endLineNumber-e.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,r),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map((e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort(((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber));const i=[];let n=t[0];for(let o=1;o<t.length;o++)n.endLineNumber+1>=t[o].startLineNumber?n.endLineNumber=t[o].endLineNumber:(i.push(n),n=t[o]);return i.push(n),i}}class V extends s.R6{constructor(){super({id:"editor.action.indentLines",label:N.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class U extends s.R6{constructor(){super({id:"editor.action.outdentLines",label:N.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2140,weight:100}})}run(e,t){o.CoreEditingCommands.Outdent.runEditorCommand(e,t,null)}}class W extends s.R6{constructor(){super({id:"editor.action.insertLineBefore",label:N.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class F extends s.R6{constructor(){super({id:"editor.action.insertLineAfter",label:N.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class K extends s.R6{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),n=this._getRangesToDelete(t),o=[];for(let a=0,l=n.length-1;a<l;a++){const e=n[a],t=n[a+1];null===u.e.intersectRanges(e,t)?o.push(e):n[a+1]=u.e.plusRange(e,t)}o.push(n[n.length-1]);const s=this._getEndCursorState(i,o),r=o.map((e=>c.h.replace(e,"")));t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}}class B extends K{constructor(){super({id:"deleteAllLeft",label:N.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];let o=0;return t.forEach((t=>{let s;if(1===t.endColumn&&o>0){const e=t.startLineNumber-o;s=new h.Y(e,t.startColumn,e,t.startColumn)}else s=new h.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?i=s:n.push(s)})),i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getSelections();if(null===t)return[];let i=t;const n=e.getModel();return null===n?[]:(i.sort(u.e.compareRangesUsingStarts),i=i.map((e=>{if(e.isEmpty()){if(1===e.startColumn){const t=Math.max(1,e.startLineNumber-1),i=1===e.startLineNumber?1:n.getLineContent(t).length+1;return new u.e(t,i,e.startLineNumber,1)}return new u.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new u.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),i)}}class z extends K{constructor(){super({id:"deleteAllRight",label:N.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];for(let o=0,s=t.length,r=0;o<s;o++){const s=t[o],a=new h.Y(s.startLineNumber-r,s.startColumn,s.startLineNumber-r,s.startColumn);s.intersectRanges(e)?i=a:n.push(a)}return i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getModel();if(null===t)return[];const i=e.getSelections();if(null===i)return[];const n=i.map((e=>{if(e.isEmpty()){const i=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===i?new u.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new u.e(e.startLineNumber,e.startColumn,e.startLineNumber,i)}return e}));return n.sort(u.e.compareRangesUsingStarts),n}}class j extends s.R6{constructor(){super({id:"editor.action.joinLines",label:N.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(null===i)return;let n=t.getSelection();if(null===n)return;i.sort(u.e.compareRangesUsingStarts);const o=[],s=i.reduce(((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(n.equalsSelection(e)&&(n=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new h.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new h.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)));o.push(s);const r=t.getModel();if(null===r)return;const a=[],l=[];let d=n,g=0;for(let p=0,m=o.length;p<m;p++){const e=o[p],t=e.startLineNumber,i=1;let s,m,v=0;const f=r.getLineContent(e.endLineNumber).length-e.endColumn;if(e.isEmpty()||e.startLineNumber===e.endLineNumber){const i=e.getStartPosition();i.lineNumber<r.getLineCount()?(s=t+1,m=r.getLineMaxColumn(s)):(s=i.lineNumber,m=r.getLineMaxColumn(i.lineNumber))}else s=e.endLineNumber,m=r.getLineMaxColumn(s);let _=r.getLineContent(t);for(let n=t+1;n<=s;n++){const e=r.getLineContent(n),t=r.getLineFirstNonWhitespaceColumn(n);if(t>=1){let i=!0;""===_&&(i=!1),!i||" "!==_.charAt(_.length-1)&&"\t"!==_.charAt(_.length-1)||(i=!1,_=_.replace(/[\s\uFEFF\xA0]+$/g," "));const n=e.substr(t-1);_+=(i?" ":"")+n,v=i?n.length+1:n.length}else v=0}const b=new u.e(t,i,s,m);if(!b.isEmpty()){let i;e.isEmpty()?(a.push(c.h.replace(b,_)),i=new h.Y(b.startLineNumber-g,_.length-v+1,t-g,_.length-v+1)):e.startLineNumber===e.endLineNumber?(a.push(c.h.replace(b,_)),i=new h.Y(e.startLineNumber-g,e.startColumn,e.endLineNumber-g,e.endColumn)):(a.push(c.h.replace(b,_)),i=new h.Y(e.startLineNumber-g,e.startColumn,e.startLineNumber-g,_.length-f)),null!==u.e.intersectRanges(b,n)?d=i:l.push(i)}g+=b.endLineNumber-b.startLineNumber}l.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,a,l),t.pushUndoStop()}}class q extends s.R6{constructor(){super({id:"editor.action.transpose",label:N.NC("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:g.u.writable})}run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=[];for(let s=0,a=i.length;s<a;s++){const e=i[s];if(!e.isEmpty())continue;const t=e.getStartPosition(),a=n.getLineMaxColumn(t.lineNumber);if(t.column>=a){if(t.lineNumber===n.getLineCount())continue;const e=new u.e(t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new r.T4(new h.Y(t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i))}else{const e=new u.e(t.lineNumber,Math.max(1,t.column-1),t.lineNumber,t.column+1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new r.hP(e,i,new h.Y(t.lineNumber,t.column+1,t.lineNumber,t.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class Q extends s.R6{run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=t.getOption(126),s=[];for(const r of i)if(r.isEmpty()){const e=r.getStartPosition(),i=t.getConfiguredWordAtPosition(e);if(!i)continue;const a=new u.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),l=n.getValueInRange(a);s.push(c.h.replace(a,this._modifyText(l,o)))}else{const e=n.getValueInRange(r);s.push(c.h.replace(r,this._modifyText(e,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}class Y extends Q{constructor(){super({id:"editor.action.transformToUppercase",label:N.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:g.u.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class G extends Q{constructor(){super({id:"editor.action.transformToLowercase",label:N.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:g.u.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class J{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}}class Z extends Q{constructor(){super({id:"editor.action.transformToTitlecase",label:N.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:g.u.writable})}_modifyText(e,t){const i=Z.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,(e=>e.toLocaleUpperCase())):e}}Z.titleBoundary=new J("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class $ extends Q{constructor(){super({id:"editor.action.transformToSnakecase",label:N.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:g.u.writable})}_modifyText(e,t){const i=$.caseBoundary.get(),n=$.singleLetters.get();return i&&n?e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase():e}}$.caseBoundary=new J("(\\p{Ll})(\\p{Lu})","gmu"),$.singleLetters=new J("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class X extends Q{constructor(){super({id:"editor.action.transformToCamelcase",label:N.NC("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:g.u.writable})}_modifyText(e,t){const i=X.wordBoundary.get();if(!i)return e;const n=e.split(i);return n.shift()+n.map((e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1))).join("")}}X.wordBoundary=new J("[_\\s-]","gm");class ee extends Q{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((e=>e.isSupported()))}constructor(){super({id:"editor.action.transformToKebabcase",label:N.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:g.u.writable})}_modifyText(e,t){const i=ee.caseBoundary.get(),n=ee.singleLetters.get(),o=ee.underscoreBoundary.get();return i&&n&&o?e.replace(o,"$1-$3").replace(i,"$1-$2").replace(n,"$1-$2").toLocaleLowerCase():e}}ee.caseBoundary=new J("(\\p{Ll})(\\p{Lu})","gmu"),ee.singleLetters=new J("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),ee.underscoreBoundary=new J("(\\S)(_)(\\S)","gm"),(0,s.Qr)(class extends T{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:N.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:D.eH.MenubarSelectionMenu,group:"2_line",title:N.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}),(0,s.Qr)(class extends T{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:N.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:D.eH.MenubarSelectionMenu,group:"2_line",title:N.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}),(0,s.Qr)(k),(0,s.Qr)(class extends R{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:N.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:D.eH.MenubarSelectionMenu,group:"2_line",title:N.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}),(0,s.Qr)(class extends R{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:N.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:D.eH.MenubarSelectionMenu,group:"2_line",title:N.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}),(0,s.Qr)(P),(0,s.Qr)(O),(0,s.Qr)(A),(0,s.Qr)(E),(0,s.Qr)(H),(0,s.Qr)(V),(0,s.Qr)(U),(0,s.Qr)(W),(0,s.Qr)(F),(0,s.Qr)(B),(0,s.Qr)(z),(0,s.Qr)(j),(0,s.Qr)(q),(0,s.Qr)(Y),(0,s.Qr)(G),$.caseBoundary.isSupported()&&$.singleLetters.isSupported()&&(0,s.Qr)($),X.wordBoundary.isSupported()&&(0,s.Qr)(X),Z.titleBoundary.isSupported()&&(0,s.Qr)(Z),ee.isSupported()&&(0,s.Qr)(ee)},95591:(e,t,i)=>{i.r(t),i.d(t,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:()=>D,LinkedEditingAction:()=>k,LinkedEditingContribution:()=>T,editorLinkedEditingBackground:()=>P});var n=i(88648),o=i(37368),s=i(21706),r=i(57612),a=i(33309),l=i(68515),c=i(59652),d=i(17224),u=i(71308),h=i(33344),g=i(3527),p=i(99924),m=i(55597),v=i(90567),f=i(13101),_=i(41598),b=i(26511),C=i(10071),w=i(90024),S=i(24999),y=i(606),L=i(87794),x=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,n){t(i,n,e)}},N=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const D=new C.uy("LinkedEditingInputVisible",!1);let T=class e extends c.JT{static get(t){return t.getContribution(e.ID)}constructor(e,t,i,n,o){super(),this.languageConfigurationService=n,this._syncRangesToken=0,this._localToDispose=this._register(new c.SL),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=D.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new c.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(67)||e.hasChanged(89))&&this.reinitialize(!1)}))),this._register(this._providers.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=null!==t&&(this._editor.getOption(67)||this._editor.getOption(89))&&this._providers.has(t);if(i===this._enabled&&!e)return;if(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||null===t)return;this._localToDispose.add(l.ju.runAndSubscribe(t.onDidChangeLanguageConfiguration,(()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()})));const n=new o.vp(this._debounceInformation.get(t)),s=()=>{var e;this._rangeUpdateTriggerPromise=n.trigger((()=>this.updateRanges()),null!==(e=this._debounceDuration)&&void 0!==e?e:this._debounceInformation.get(t))},r=new o.vp(0),a=e=>{this._rangeSyncTriggerPromise=r.trigger((()=>this._syncRanges(e)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{s()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const t=this._currentDecorations.getRange(0);if(t&&e.changes.every((e=>t.intersectRanges(e.range))))return void a(this._syncRangesToken)}s()}))),this._localToDispose.add({dispose:()=>{n.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||0===this._currentDecorations.length)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const e=n.match(this._currentWordPattern);if((e?e[0].length:0)!==n.length)return this.clearRanges()}const o=[];for(let s=1,r=this._currentDecorations.length;s<r;s++){const e=this._currentDecorations.getRange(s);if(e)if(e.startLineNumber!==e.endLineNumber)o.push({range:e,text:n});else{let i=t.getValueInRange(e),s=n,r=e.startColumn,a=e.endColumn;const l=d.Mh(i,s);r+=l,i=i.substr(l),s=s.substr(l);const c=d.P1(i,s);a-=c,i=i.substr(0,i.length-c),s=s.substr(0,s.length-c),r===a&&0===s.length||o.push({range:new m.e(e.startLineNumber,r,e.endLineNumber,a),text:s})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const i=this._editor.getPosition();if(!this._enabled&&!t||this._editor.getSelections().length>1)return void this.clearRanges();const n=this._editor.getModel(),s=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===s){if(i.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const e=this._currentDecorations.getRange(0);if(e&&e.containsPosition(i))return}}this.clearRanges(),this._currentRequestPosition=i,this._currentRequestModelVersion=s;const r=(0,o.PG)((t=>N(this,void 0,void 0,(function*(){try{const o=new L.G(!1),a=yield M(this._providers,n,i,t);if(this._debounceInformation.update(n,o.elapsed()),r!==this._currentRequest)return;if(this._currentRequest=null,s!==n.getVersionId())return;let l=[];(null===a||void 0===a?void 0:a.ranges)&&(l=a.ranges),this._currentWordPattern=(null===a||void 0===a?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let e=0,t=l.length;e<t;e++)if(m.e.containsPosition(l[e],i)){if(c=!0,0!==e){const t=l[e];l.splice(e,1),l.unshift(t)}break}if(!c)return void this.clearRanges();const d=l.map((t=>({range:t,options:e.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations.set(d),this._syncRangesToken++}catch(o){(0,a.n2)(o)||(0,a.dL)(o),this._currentRequest!==r&&this._currentRequest||this.clearRanges()}}))));return this._currentRequest=r,r}))}};T.ID="editor.contrib.linkedEditing",T.DECORATION=f.qx.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),T=x([I(1,C.i6),I(2,w.p),I(3,_.c_),I(4,y.A)],T);class k extends h.R6{constructor(){super({id:"editor.action.linkedEditing",label:b.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:C.Ao.and(v.u.writable,v.u.hasRenameProvider),kbOpts:{kbExpr:v.u.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(g.$),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return u.o.isUri(n)&&p.L.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),a.dL):super.runCommand(e,t)}run(e,t){const i=T.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const R=h._l.bindToContribution(T.get);function M(e,t,i,s){const r=e.ordered(t);return(0,o.Ps)(r.map((e=>()=>N(this,void 0,void 0,(function*(){try{return yield e.provideLinkedEditingRanges(t,i,s)}catch(n){return void(0,a.Cp)(n)}})))),(e=>!!e&&n.Of(null===e||void 0===e?void 0:e.ranges)))}(0,h.fK)(new R({id:"cancelLinkedEditingInput",precondition:D,handler:e=>e.clearRanges(),kbOpts:{kbExpr:v.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));const P=(0,S.P6G)("editor.linkedEditingBackground",{dark:r.Il.fromHex("#f00").transparent(.3),light:r.Il.fromHex("#f00").transparent(.3),hcDark:r.Il.fromHex("#f00").transparent(.3),hcLight:r.Il.white},b.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,h.sb)("_executeLinkedEditingProvider",((e,t,i)=>{const{linkedEditingRangeProvider:n}=e.get(w.p);return M(n,t,i,s.T.None)})),(0,h._K)(T.ID,T,1),(0,h.Qr)(k)},3012:(e,t,i)=>{i.r(t),i.d(t,{LinkDetector:()=>P});var n=i(37368),o=i(21706),s=i(33309),r=i(41045),a=i(59652),l=i(46946),c=i(44352),d=i(63670),u=i(87794),h=i(71308),g=i(33344),p=i(13101),m=i(606),v=i(90024),f=i(77112),_=i(88648),b=i(71923),C=i(55597),w=i(79412),S=i(39049),y=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class L{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return y(this,void 0,void 0,(function*(){return this._link.url?this._link.url:"function"===typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then((t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing"))))):Promise.reject(new Error("missing"))}))}}class x{constructor(e){this._disposables=new a.SL;let t=[];for(const[i,n]of e){const e=i.links.map((e=>new L(e,n)));t=x._union(t,e),(0,a.Wf)(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let n,o,s,r;for(n=0,s=0,o=e.length,r=t.length;n<o&&s<r;){const o=e[n],r=t[s];if(C.e.areIntersectingOrTouching(o.range,r.range)){n++;continue}C.e.compareRangesUsingStarts(o.range,r.range)<0?(i.push(o),n++):(i.push(r),s++)}for(;n<o;n++)i.push(e[n]);for(;s<r;s++)i.push(t[s]);return i}}function I(e,t,i){const n=[],o=e.ordered(t).reverse().map(((e,o)=>Promise.resolve(e.provideLinks(t,i)).then((t=>{t&&(n[o]=[t,e])}),s.Cp)));return Promise.all(o).then((()=>{const e=new x((0,_.kX)(n));return i.isCancellationRequested?(e.dispose(),new x([])):e}))}S.P.registerCommand("_executeLinkProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return y(void 0,void 0,void 0,(function*(){let[t,n]=i;(0,b.p_)(t instanceof h.o),"number"!==typeof n&&(n=0);const{linkProvider:s}=e.get(v.p),r=e.get(w.q).getModel(t);if(!r)return[];const a=yield I(s,r,o.T.None);if(!a)return[];for(let e=0;e<Math.min(n,a.links.length);e++)yield a.links[e].resolve(o.T.None);const l=a.links.slice(0);return a.dispose(),l}))}));var N=i(26511),D=i(37709),T=i(66495),k=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},R=function(e,t){return function(i,n){t(i,n,e)}},M=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let P=class e extends a.JT{static get(t){return t.getContribution(e.ID)}constructor(e,t,i,o,s){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=o,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new n.pY((()=>this.computeLinksNow()),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new f.yN(e));this._register(r.onMouseMoveOrRelevantKeyDown((e=>{let[t,i]=e;this._onEditorMouseMove(t,i)}))),this._register(r.onExecute((e=>{this.onEditorMouseUp(e)}))),this._register(r.onCancel((e=>{this.cleanUpActiveLinkDecoration()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(68)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))}))),this._register(e.onDidChangeModelContent((e=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))}))),this._register(e.onDidChangeModel((e=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)}))),this._register(e.onDidChangeModelLanguage((e=>{this.stop(),this.computeLinks.schedule(0)}))),this._register(this.providers.onDidChange((e=>{this.stop(),this.computeLinks.schedule(0)}))),this.computeLinks.schedule(0)}computeLinksNow(){return M(this,void 0,void 0,(function*(){if(!this.editor.hasModel()||!this.editor.getOption(68))return;const e=this.editor.getModel();if(this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,n.PG)((t=>I(this.providers,e,t)));try{const t=new u.G(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){(0,s.dL)(t)}finally{this.computePromise=null}}}))}updateDecorations(e){const t="altKey"===this.editor.getOption(75),i=[],n=Object.keys(this.currentOccurrences);for(const s of n){const e=this.currentOccurrences[s];i.push(e.decorationId)}const o=[];if(e)for(const s of e)o.push(A.decoration(s,t));this.editor.changeDecorations((t=>{const n=t.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let i=0,o=n.length;i<o;i++){const t=new A(e[i],n[i]);this.currentOccurrences[t.decorationId]=t}}))}_onEditorMouseMove(e,t){const i="altKey"===this.editor.getOption(75);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const t=this.getLinkOccurrence(e.target.position);t&&this.editor.changeDecorations((e=>{t.activate(e,i),this.activeLinkDecorationId=t.decorationId}))}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e="altKey"===this.editor.getOption(75);if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((i=>{t.deactivate(i,e)})),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.openerService)return;const{link:n}=e;n.resolve(o.T.None).then((e=>{if("string"===typeof e&&this.editor.hasModel()){const t=this.editor.getModel().uri;if(t.scheme===l.lg.file&&e.startsWith("".concat(l.lg.file,":"))){const i=h.o.parse(e);if(i.scheme===l.lg.file){const n=d.z_(i);let o=null;n.startsWith("/./")?o=".".concat(n.substr(1)):n.startsWith("//./")&&(o=".".concat(n.substr(2))),o&&(e=d.Vo(t,o))}}}return this.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})}),(e=>{const t=e instanceof Error?e.message:e;"invalid"===t?this.notificationService.warn(N.NC("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):"missing"===t?this.notificationService.warn(N.NC("missing.url","Failed to open this link because its target is missing.")):(0,s.dL)(e)}))}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const e=this.currentOccurrences[i.id];if(e)return e}return null}isEnabled(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};P.ID="editor.linkDetector",P=k([R(1,T.v4),R(2,D.lT),R(3,v.p),R(4,m.A)],P);const O={general:p.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:p.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class A{static decoration(e,t){return{range:e.range,options:A._getOptions(e,t,!1)}}static _getOptions(e,t,i){const n=Object.assign({},i?O.active:O.general);return n.hoverMessage=function(e,t){const i=e.url&&/^command:/i.test(e.url.toString()),n=e.tooltip?e.tooltip:i?N.NC("links.navigate.executeCmd","Execute command"):N.NC("links.navigate.follow","Follow link"),o=t?c.dz?N.NC("links.navigate.kb.meta.mac","cmd + click"):N.NC("links.navigate.kb.meta","ctrl + click"):c.dz?N.NC("links.navigate.kb.alt.mac","option + click"):N.NC("links.navigate.kb.alt","alt + click");if(e.url){let t="";if(/^command:/i.test(e.url.toString())){const i=e.url.toString().match(/^command:([^?#]+)/);if(i){const e=i[1];t=N.NC("tooltip.explanation","Execute command {0}",e)}}return new r.W5("",!0).appendLink(e.url.toString(!0).replace(/ /g,"%20"),n,t).appendMarkdown(" (".concat(o,")"))}return(new r.W5).appendText("".concat(n," (").concat(o,")"))}(e,t),n}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,A._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,A._getOptions(this.link,t,!1))}}class E extends g.R6{constructor(){super({id:"editor.action.openLink",label:N.NC("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=P.get(t);if(!i)return;if(!t.hasModel())return;const n=t.getSelections();for(const o of n){const e=i.getLinkOccurrence(o.getEndPosition());e&&i.openLinkOccurrence(e,!1)}}}(0,g._K)(P.ID,P,1),(0,g.Qr)(E)}}]);
//# sourceMappingURL=monaco-editor-vendor.dbdc571d.0f5265aa.js.map