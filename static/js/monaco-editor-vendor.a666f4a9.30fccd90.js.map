{"version":3,"file":"static/js/monaco-editor-vendor.a666f4a9.30fccd90.js","mappings":"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","sources":["../../node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listPaging.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rangeMap.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rowCache.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/splice.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/list.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/mouseCursor/mouseCursor.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/sash/sash.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarArrow.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/abstractScrollbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarState.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/horizontalScrollbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/verticalScrollbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxCustom.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxNative.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBox.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/table/tableWidget.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/toggle/toggle.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/toolbar/toolbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/asyncDataTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/dataTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/indexTreeModel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/compressedObjectTreeModel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTreeModel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/tree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/widget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport { equals } from '../../../common/objects.js';\nimport './keybindingLabel.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport const unthemedKeybindingLabelOptions = {\n    keybindingLabelBackground: undefined,\n    keybindingLabelForeground: undefined,\n    keybindingLabelBorder: undefined,\n    keybindingLabelBottomBorder: undefined,\n    keybindingLabelShadow: undefined\n};\nexport class KeybindingLabel {\n    constructor(container, os, options) {\n        this.os = os;\n        this.keyElements = new Set();\n        this.options = options || Object.create(null);\n        const labelForeground = this.options.keybindingLabelForeground;\n        this.domNode = dom.append(container, $('.monaco-keybinding'));\n        if (labelForeground) {\n            this.domNode.style.color = labelForeground;\n        }\n        this.didEverRender = false;\n        container.appendChild(this.domNode);\n    }\n    get element() {\n        return this.domNode;\n    }\n    set(keybinding, matches) {\n        if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n            return;\n        }\n        this.keybinding = keybinding;\n        this.matches = matches;\n        this.render();\n    }\n    render() {\n        var _a;\n        this.clear();\n        if (this.keybinding) {\n            const chords = this.keybinding.getChords();\n            if (chords[0]) {\n                this.renderChord(this.domNode, chords[0], this.matches ? this.matches.firstPart : null);\n            }\n            for (let i = 1; i < chords.length; i++) {\n                dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n                this.renderChord(this.domNode, chords[i], this.matches ? this.matches.chordPart : null);\n            }\n            const title = ((_a = this.options.disableTitle) !== null && _a !== void 0 ? _a : false) ? undefined : this.keybinding.getAriaLabel() || undefined;\n            if (title !== undefined) {\n                this.domNode.title = title;\n            }\n            else {\n                this.domNode.removeAttribute('title');\n            }\n        }\n        else if (this.options && this.options.renderUnboundKeybindings) {\n            this.renderUnbound(this.domNode);\n        }\n        this.didEverRender = true;\n    }\n    clear() {\n        dom.clearNode(this.domNode);\n        this.keyElements.clear();\n    }\n    renderChord(parent, chord, match) {\n        const modifierLabels = UILabelProvider.modifierLabels[this.os];\n        if (chord.ctrlKey) {\n            this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match === null || match === void 0 ? void 0 : match.ctrlKey), modifierLabels.separator);\n        }\n        if (chord.shiftKey) {\n            this.renderKey(parent, modifierLabels.shiftKey, Boolean(match === null || match === void 0 ? void 0 : match.shiftKey), modifierLabels.separator);\n        }\n        if (chord.altKey) {\n            this.renderKey(parent, modifierLabels.altKey, Boolean(match === null || match === void 0 ? void 0 : match.altKey), modifierLabels.separator);\n        }\n        if (chord.metaKey) {\n            this.renderKey(parent, modifierLabels.metaKey, Boolean(match === null || match === void 0 ? void 0 : match.metaKey), modifierLabels.separator);\n        }\n        const keyLabel = chord.keyLabel;\n        if (keyLabel) {\n            this.renderKey(parent, keyLabel, Boolean(match === null || match === void 0 ? void 0 : match.keyCode), '');\n        }\n    }\n    renderKey(parent, label, highlight, separator) {\n        dom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n        if (separator) {\n            dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n        }\n    }\n    renderUnbound(parent) {\n        dom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n    }\n    createKeyElement(label, extraClass = '') {\n        const keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n        this.keyElements.add(keyElement);\n        if (this.options.keybindingLabelBackground) {\n            keyElement.style.backgroundColor = this.options.keybindingLabelBackground;\n        }\n        if (this.options.keybindingLabelBorder) {\n            keyElement.style.borderColor = this.options.keybindingLabelBorder;\n        }\n        if (this.options.keybindingLabelBottomBorder) {\n            keyElement.style.borderBottomColor = this.options.keybindingLabelBottomBorder;\n        }\n        if (this.options.keybindingLabelShadow) {\n            keyElement.style.boxShadow = `inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;\n        }\n        return keyElement;\n    }\n    static areSame(a, b) {\n        if (a === b || (!a && !b)) {\n            return true;\n        }\n        return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n    get templateId() { return this.renderer.templateId; }\n    constructor(renderer, modelProvider) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { data, disposable: Disposable.None };\n    }\n    renderElement(index, _, data, height) {\n        var _a;\n        (_a = data.disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n        if (!data.data) {\n            return;\n        }\n        const model = this.modelProvider();\n        if (model.isResolved(index)) {\n            return this.renderer.renderElement(model.get(index), index, data.data, height);\n        }\n        const cts = new CancellationTokenSource();\n        const promise = model.resolve(index, cts.token);\n        data.disposable = { dispose: () => cts.cancel() };\n        this.renderer.renderPlaceholder(index, data.data);\n        promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n    }\n    disposeTemplate(data) {\n        if (data.disposable) {\n            data.disposable.dispose();\n            data.disposable = undefined;\n        }\n        if (data.data) {\n            this.renderer.disposeTemplate(data.data);\n            data.data = undefined;\n        }\n    }\n}\nclass PagedAccessibilityProvider {\n    constructor(modelProvider, accessibilityProvider) {\n        this.modelProvider = modelProvider;\n        this.accessibilityProvider = accessibilityProvider;\n    }\n    getWidgetAriaLabel() {\n        return this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    getAriaLabel(index) {\n        const model = this.modelProvider();\n        if (!model.isResolved(index)) {\n            return null;\n        }\n        return this.accessibilityProvider.getAriaLabel(model.get(index));\n    }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n    return Object.assign(Object.assign({}, options), { accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider) });\n}\nexport class PagedList {\n    constructor(user, container, virtualDelegate, renderers, options = {}) {\n        const modelProvider = () => this.model;\n        const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n        this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    getHTMLElement() {\n        return this.list.getHTMLElement();\n    }\n    get onDidFocus() {\n        return this.list.onDidFocus;\n    }\n    get onDidDispose() {\n        return this.list.onDidDispose;\n    }\n    get onMouseDblClick() {\n        return Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onPointer() {\n        return Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n    }\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        this._model = model;\n        this.list.splice(0, this.list.length, range(model.length));\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.model.get(i));\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    dispose() {\n        this.list.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/range.js';\n/**\n * Returns the intersection between a ranged group and a range.\n * Returns `[]` if the intersection is empty.\n */\nexport function groupIntersect(range, groups) {\n    const result = [];\n    for (const r of groups) {\n        if (range.start >= r.range.end) {\n            continue;\n        }\n        if (range.end < r.range.start) {\n            break;\n        }\n        const intersection = Range.intersect(range, r.range);\n        if (Range.isEmpty(intersection)) {\n            continue;\n        }\n        result.push({\n            range: intersection,\n            size: r.size\n        });\n    }\n    return result;\n}\n/**\n * Shifts a range by that `much`.\n */\nexport function shift({ start, end }, much) {\n    return { start: start + much, end: end + much };\n}\n/**\n * Consolidates a collection of ranged groups.\n *\n * Consolidation is the process of merging consecutive ranged groups\n * that share the same `size`.\n */\nexport function consolidate(groups) {\n    const result = [];\n    let previousGroup = null;\n    for (const group of groups) {\n        const start = group.range.start;\n        const end = group.range.end;\n        const size = group.size;\n        if (previousGroup && size === previousGroup.size) {\n            previousGroup.range.end = end;\n            continue;\n        }\n        previousGroup = { range: { start, end }, size };\n        result.push(previousGroup);\n    }\n    return result;\n}\n/**\n * Concatenates several collections of ranged groups into a single\n * collection.\n */\nfunction concat(...groups) {\n    return consolidate(groups.reduce((r, g) => r.concat(g), []));\n}\nexport class RangeMap {\n    constructor() {\n        this.groups = [];\n        this._size = 0;\n    }\n    splice(index, deleteCount, items = []) {\n        const diff = items.length - deleteCount;\n        const before = groupIntersect({ start: 0, end: index }, this.groups);\n        const after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\n            .map(g => ({ range: shift(g.range, diff), size: g.size }));\n        const middle = items.map((item, i) => ({\n            range: { start: index + i, end: index + i + 1 },\n            size: item.size\n        }));\n        this.groups = concat(before, middle, after);\n        this._size = this.groups.reduce((t, g) => t + (g.size * (g.range.end - g.range.start)), 0);\n    }\n    /**\n     * Returns the number of items in the range map.\n     */\n    get count() {\n        const len = this.groups.length;\n        if (!len) {\n            return 0;\n        }\n        return this.groups[len - 1].range.end;\n    }\n    /**\n     * Returns the sum of the sizes of all items in the range map.\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * Returns the index of the item at the given position.\n     */\n    indexAt(position) {\n        if (position < 0) {\n            return -1;\n        }\n        let index = 0;\n        let size = 0;\n        for (const group of this.groups) {\n            const count = group.range.end - group.range.start;\n            const newSize = size + (count * group.size);\n            if (position < newSize) {\n                return index + Math.floor((position - size) / group.size);\n            }\n            index += count;\n            size = newSize;\n        }\n        return index;\n    }\n    /**\n     * Returns the index of the item right after the item at the\n     * index of the given position.\n     */\n    indexAfter(position) {\n        return Math.min(this.indexAt(position) + 1, this.count);\n    }\n    /**\n     * Returns the start position of the item at the given index.\n     */\n    positionAt(index) {\n        if (index < 0) {\n            return -1;\n        }\n        let position = 0;\n        let count = 0;\n        for (const group of this.groups) {\n            const groupCount = group.range.end - group.range.start;\n            const newCount = count + groupCount;\n            if (index < newCount) {\n                return position + ((index - count) * group.size);\n            }\n            position += groupCount * group.size;\n            count = newCount;\n        }\n        return -1;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $ } from '../../dom.js';\nfunction removeFromParent(element) {\n    var _a;\n    try {\n        (_a = element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(element);\n    }\n    catch (e) {\n        // this will throw if this happens due to a blur event, nasty business\n    }\n}\nexport class RowCache {\n    constructor(renderers) {\n        this.renderers = renderers;\n        this.cache = new Map();\n        this.transactionNodesPendingRemoval = new Set();\n        this.inTransaction = false;\n    }\n    /**\n     * Returns a row either by creating a new one or reusing\n     * a previously released row which shares the same templateId.\n     *\n     * @returns A row and `isReusingConnectedDomNode` if the row's node is already in the dom in a stale position.\n     */\n    alloc(templateId) {\n        let result = this.getTemplateCache(templateId).pop();\n        let isStale = false;\n        if (result) {\n            isStale = this.transactionNodesPendingRemoval.has(result.domNode);\n            if (isStale) {\n                this.transactionNodesPendingRemoval.delete(result.domNode);\n            }\n        }\n        else {\n            const domNode = $('.monaco-list-row');\n            const renderer = this.getRenderer(templateId);\n            const templateData = renderer.renderTemplate(domNode);\n            result = { domNode, templateId, templateData };\n        }\n        return { row: result, isReusingConnectedDomNode: isStale };\n    }\n    /**\n     * Releases the row for eventual reuse.\n     */\n    release(row) {\n        if (!row) {\n            return;\n        }\n        this.releaseRow(row);\n    }\n    /**\n     * Begin a set of changes that use the cache. This lets us skip work when a row is removed and then inserted again.\n     */\n    transact(makeChanges) {\n        if (this.inTransaction) {\n            throw new Error('Already in transaction');\n        }\n        this.inTransaction = true;\n        try {\n            makeChanges();\n        }\n        finally {\n            for (const domNode of this.transactionNodesPendingRemoval) {\n                this.doRemoveNode(domNode);\n            }\n            this.transactionNodesPendingRemoval.clear();\n            this.inTransaction = false;\n        }\n    }\n    releaseRow(row) {\n        const { domNode, templateId } = row;\n        if (domNode) {\n            if (this.inTransaction) {\n                this.transactionNodesPendingRemoval.add(domNode);\n            }\n            else {\n                this.doRemoveNode(domNode);\n            }\n        }\n        const cache = this.getTemplateCache(templateId);\n        cache.push(row);\n    }\n    doRemoveNode(domNode) {\n        domNode.classList.remove('scrolling');\n        removeFromParent(domNode);\n    }\n    getTemplateCache(templateId) {\n        let result = this.cache.get(templateId);\n        if (!result) {\n            result = [];\n            this.cache.set(templateId, result);\n        }\n        return result;\n    }\n    dispose() {\n        this.cache.forEach((cachedRows, templateId) => {\n            for (const cachedRow of cachedRows) {\n                const renderer = this.getRenderer(templateId);\n                renderer.disposeTemplate(cachedRow.templateData);\n                cachedRow.templateData = null;\n            }\n        });\n        this.cache.clear();\n        this.transactionNodesPendingRemoval.clear();\n    }\n    getRenderer(templateId) {\n        const renderer = this.renderers.get(templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for ${templateId}`);\n        }\n        return renderer;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { BugIndicatingError } from '../../../common/errors.js';\nconst StaticDND = {\n    CurrentDragAndDropData: undefined\n};\nconst DefaultOptions = {\n    useShadows: true,\n    verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n    setRowLineHeight: true,\n    setRowHeight: true,\n    supportDynamicHeights: false,\n    dnd: {\n        getDragElements(e) { return [e]; },\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { }\n    },\n    horizontalScrolling: false,\n    transformOptimization: true,\n    alwaysConsumeMouseWheel: true,\n};\nexport class ElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class ExternalElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class NativeDragAndDropData {\n    constructor() {\n        this.types = [];\n        this.files = [];\n    }\n    update(dataTransfer) {\n        if (dataTransfer.types) {\n            this.types.splice(0, this.types.length, ...dataTransfer.types);\n        }\n        if (dataTransfer.files) {\n            this.files.splice(0, this.files.length);\n            for (let i = 0; i < dataTransfer.files.length; i++) {\n                const file = dataTransfer.files.item(i);\n                if (file && (file.size || file.type)) {\n                    this.files.push(file);\n                }\n            }\n        }\n    }\n    getData() {\n        return {\n            types: this.types,\n            files: this.files\n        };\n    }\n}\nfunction equalsDragFeedback(f1, f2) {\n    if (Array.isArray(f1) && Array.isArray(f2)) {\n        return equals(f1, f2);\n    }\n    return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n    constructor(accessibilityProvider) {\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getSetSize) {\n            this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n        }\n        else {\n            this.getSetSize = (e, i, l) => l;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getPosInSet) {\n            this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n        }\n        else {\n            this.getPosInSet = (e, i) => i + 1;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getRole) {\n            this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n        }\n        else {\n            this.getRole = _ => 'listitem';\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.isChecked) {\n            this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n        }\n        else {\n            this.isChecked = _ => undefined;\n        }\n    }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n    get contentHeight() { return this.rangeMap.size; }\n    get horizontalScrolling() { return this._horizontalScrolling; }\n    set horizontalScrolling(value) {\n        if (value === this._horizontalScrolling) {\n            return;\n        }\n        if (value && this.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this._horizontalScrolling = value;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        if (this._horizontalScrolling) {\n            for (const item of this.items) {\n                this.measureItemWidth(item);\n            }\n            this.updateScrollWidth();\n            this.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n            this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n        }\n        else {\n            this.scrollableElementWidthDelayer.cancel();\n            this.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n            this.rowsContainer.style.width = '';\n        }\n    }\n    constructor(container, virtualDelegate, renderers, options = DefaultOptions) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `list_id_${++ListView.InstanceCount}`;\n        this.renderers = new Map();\n        this.renderWidth = 0;\n        this._scrollHeight = 0;\n        this.scrollableElementUpdateDisposable = null;\n        this.scrollableElementWidthDelayer = new Delayer(50);\n        this.splicing = false;\n        this.dragOverAnimationStopDisposable = Disposable.None;\n        this.dragOverMouseY = 0;\n        this.canDrop = false;\n        this.currentDragFeedbackDisposable = Disposable.None;\n        this.onDragLeaveTimeout = Disposable.None;\n        this.disposables = new DisposableStore();\n        this._onDidChangeContentHeight = new Emitter();\n        this._onDidChangeContentWidth = new Emitter();\n        this._horizontalScrolling = false;\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this.items = [];\n        this.itemId = 0;\n        this.rangeMap = new RangeMap();\n        for (const renderer of renderers) {\n            this.renderers.set(renderer.templateId, renderer);\n        }\n        this.cache = this.disposables.add(new RowCache(this.renderers));\n        this.lastRenderTop = 0;\n        this.lastRenderHeight = 0;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-list';\n        this.domNode.classList.add(this.domId);\n        this.domNode.tabIndex = 0;\n        this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n        this._horizontalScrolling = (_a = options.horizontalScrolling) !== null && _a !== void 0 ? _a : DefaultOptions.horizontalScrolling;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        this.additionalScrollHeight = typeof options.additionalScrollHeight === 'undefined' ? 0 : options.additionalScrollHeight;\n        this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n        this.rowsContainer = document.createElement('div');\n        this.rowsContainer.className = 'monaco-list-rows';\n        const transformOptimization = (_b = options.transformOptimization) !== null && _b !== void 0 ? _b : DefaultOptions.transformOptimization;\n        if (transformOptimization) {\n            this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n            this.rowsContainer.style.overflow = 'hidden';\n            this.rowsContainer.style.contain = 'strict';\n        }\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\n        this.scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: ((_c = options.smoothScrolling) !== null && _c !== void 0 ? _c : false) ? 125 : 0,\n            scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(cb)\n        });\n        this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n            alwaysConsumeMouseWheel: (_d = options.alwaysConsumeMouseWheel) !== null && _d !== void 0 ? _d : DefaultOptions.alwaysConsumeMouseWheel,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: (_e = options.verticalScrollMode) !== null && _e !== void 0 ? _e : DefaultOptions.verticalScrollMode,\n            useShadows: (_f = options.useShadows) !== null && _f !== void 0 ? _f : DefaultOptions.useShadows,\n            mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n            fastScrollSensitivity: options.fastScrollSensitivity,\n            scrollByPage: options.scrollByPage\n        }, this.scrollable));\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\n        container.appendChild(this.domNode);\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n        this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n        // Prevent the monaco-scrollable-element from scrolling\n        // https://github.com/microsoft/vscode/issues/44181\n        this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n        this.setRowLineHeight = (_g = options.setRowLineHeight) !== null && _g !== void 0 ? _g : DefaultOptions.setRowLineHeight;\n        this.setRowHeight = (_h = options.setRowHeight) !== null && _h !== void 0 ? _h : DefaultOptions.setRowHeight;\n        this.supportDynamicHeights = (_j = options.supportDynamicHeights) !== null && _j !== void 0 ? _j : DefaultOptions.supportDynamicHeights;\n        this.dnd = (_k = options.dnd) !== null && _k !== void 0 ? _k : DefaultOptions.dnd;\n        this.layout((_l = options.initialSize) === null || _l === void 0 ? void 0 : _l.height, (_m = options.initialSize) === null || _m === void 0 ? void 0 : _m.width);\n    }\n    updateOptions(options) {\n        if (options.additionalScrollHeight !== undefined) {\n            this.additionalScrollHeight = options.additionalScrollHeight;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        if (options.smoothScrolling !== undefined) {\n            this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n        }\n        if (options.horizontalScrolling !== undefined) {\n            this.horizontalScrolling = options.horizontalScrolling;\n        }\n        let scrollableOptions;\n        if (options.scrollByPage !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { scrollByPage: options.scrollByPage });\n        }\n        if (options.mouseWheelScrollSensitivity !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity });\n        }\n        if (options.fastScrollSensitivity !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { fastScrollSensitivity: options.fastScrollSensitivity });\n        }\n        if (scrollableOptions) {\n            this.scrollableElement.updateOptions(scrollableOptions);\n        }\n    }\n    splice(start, deleteCount, elements = []) {\n        if (this.splicing) {\n            throw new Error('Can\\'t run recursive splices.');\n        }\n        this.splicing = true;\n        try {\n            return this._splice(start, deleteCount, elements);\n        }\n        finally {\n            this.splicing = false;\n            this._onDidChangeContentHeight.fire(this.contentHeight);\n        }\n    }\n    _splice(start, deleteCount, elements = []) {\n        const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const deleteRange = { start, end: start + deleteCount };\n        const removeRange = Range.intersect(previousRenderRange, deleteRange);\n        // try to reuse rows, avoid removing them from DOM\n        const rowsToDispose = new Map();\n        for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n            const item = this.items[i];\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                let rows = rowsToDispose.get(item.templateId);\n                if (!rows) {\n                    rows = [];\n                    rowsToDispose.set(item.templateId, rows);\n                }\n                const renderer = this.renderers.get(item.templateId);\n                if (renderer && renderer.disposeElement) {\n                    renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n                }\n                rows.push(item.row);\n            }\n            item.row = null;\n        }\n        const previousRestRange = { start: start + deleteCount, end: this.items.length };\n        const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n        const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n        const inserted = elements.map(element => ({\n            id: String(this.itemId++),\n            element,\n            templateId: this.virtualDelegate.getTemplateId(element),\n            size: this.virtualDelegate.getHeight(element),\n            width: undefined,\n            hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n            lastDynamicHeightWidth: undefined,\n            row: null,\n            uri: undefined,\n            dropTarget: false,\n            dragStartDisposable: Disposable.None,\n            checkedDisposable: Disposable.None\n        }));\n        let deleted;\n        // TODO@joao: improve this optimization to catch even more cases\n        if (start === 0 && deleteCount >= this.items.length) {\n            this.rangeMap = new RangeMap();\n            this.rangeMap.splice(0, 0, inserted);\n            deleted = this.items;\n            this.items = inserted;\n        }\n        else {\n            this.rangeMap.splice(start, deleteCount, inserted);\n            deleted = this.items.splice(start, deleteCount, ...inserted);\n        }\n        const delta = elements.length - deleteCount;\n        const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const renderedRestRange = shift(previousRenderedRestRange, delta);\n        const updateRange = Range.intersect(renderRange, renderedRestRange);\n        for (let i = updateRange.start; i < updateRange.end; i++) {\n            this.updateItemInDOM(this.items[i], i);\n        }\n        const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n        for (const range of removeRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n        const elementsRange = { start, end: start + elements.length };\n        const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r));\n        const beforeElement = this.getNextToLastElement(insertRanges);\n        for (const range of insertRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                const item = this.items[i];\n                const rows = rowsToDispose.get(item.templateId);\n                const row = rows === null || rows === void 0 ? void 0 : rows.pop();\n                this.insertItemInDOM(i, beforeElement, row);\n            }\n        }\n        for (const rows of rowsToDispose.values()) {\n            for (const row of rows) {\n                this.cache.release(row);\n            }\n        }\n        this.eventuallyUpdateScrollDimensions();\n        if (this.supportDynamicHeights) {\n            this._rerender(this.scrollTop, this.renderHeight);\n        }\n        return deleted.map(i => i.element);\n    }\n    eventuallyUpdateScrollDimensions() {\n        this._scrollHeight = this.contentHeight;\n        this.rowsContainer.style.height = `${this._scrollHeight}px`;\n        if (!this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(() => {\n                this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n                this.updateScrollWidth();\n                this.scrollableElementUpdateDisposable = null;\n            });\n        }\n    }\n    eventuallyUpdateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            this.scrollableElementWidthDelayer.cancel();\n            return;\n        }\n        this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n    }\n    updateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            return;\n        }\n        let scrollWidth = 0;\n        for (const item of this.items) {\n            if (typeof item.width !== 'undefined') {\n                scrollWidth = Math.max(scrollWidth, item.width);\n            }\n        }\n        this.scrollWidth = scrollWidth;\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n        this._onDidChangeContentWidth.fire(this.scrollWidth);\n    }\n    rerender() {\n        if (!this.supportDynamicHeights) {\n            return;\n        }\n        for (const item of this.items) {\n            item.lastDynamicHeightWidth = undefined;\n        }\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n    }\n    get length() {\n        return this.items.length;\n    }\n    get renderHeight() {\n        const scrollDimensions = this.scrollableElement.getScrollDimensions();\n        return scrollDimensions.height;\n    }\n    get firstVisibleIndex() {\n        const range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const firstElTop = this.rangeMap.positionAt(range.start);\n        const nextElTop = this.rangeMap.positionAt(range.start + 1);\n        if (nextElTop !== -1) {\n            const firstElMidpoint = (nextElTop - firstElTop) / 2 + firstElTop;\n            if (firstElMidpoint < this.scrollTop) {\n                return range.start + 1;\n            }\n        }\n        return range.start;\n    }\n    element(index) {\n        return this.items[index].element;\n    }\n    domElement(index) {\n        const row = this.items[index].row;\n        return row && row.domNode;\n    }\n    elementHeight(index) {\n        return this.items[index].size;\n    }\n    elementTop(index) {\n        return this.rangeMap.positionAt(index);\n    }\n    indexAt(position) {\n        return this.rangeMap.indexAt(position);\n    }\n    indexAfter(position) {\n        return this.rangeMap.indexAfter(position);\n    }\n    layout(height, width) {\n        const scrollDimensions = {\n            height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n        };\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            scrollDimensions.scrollHeight = this.scrollHeight;\n        }\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\n        if (typeof width !== 'undefined') {\n            this.renderWidth = width;\n            if (this.supportDynamicHeights) {\n                this._rerender(this.scrollTop, this.renderHeight);\n            }\n        }\n        if (this.horizontalScrolling) {\n            this.scrollableElement.setScrollDimensions({\n                width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n            });\n        }\n    }\n    // Render\n    render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth, updateItemsInDOM = false) {\n        const renderRange = this.getRenderRange(renderTop, renderHeight);\n        const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\n        const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n        const beforeElement = this.getNextToLastElement(rangesToInsert);\n        if (updateItemsInDOM) {\n            const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n            for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n                this.updateItemInDOM(this.items[i], i);\n            }\n        }\n        this.cache.transact(() => {\n            for (const range of rangesToRemove) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.removeItemFromDOM(i);\n                }\n            }\n            for (const range of rangesToInsert) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.insertItemInDOM(i, beforeElement);\n                }\n            }\n        });\n        if (renderLeft !== undefined) {\n            this.rowsContainer.style.left = `-${renderLeft}px`;\n        }\n        this.rowsContainer.style.top = `-${renderTop}px`;\n        if (this.horizontalScrolling && scrollWidth !== undefined) {\n            this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n        }\n        this.lastRenderTop = renderTop;\n        this.lastRenderHeight = renderHeight;\n    }\n    // DOM operations\n    insertItemInDOM(index, beforeElement, row) {\n        const item = this.items[index];\n        let isStale = false;\n        if (!item.row) {\n            if (row) {\n                item.row = row;\n            }\n            else {\n                const result = this.cache.alloc(item.templateId);\n                item.row = result.row;\n                isStale = result.isReusingConnectedDomNode;\n            }\n        }\n        const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n        item.row.domNode.setAttribute('role', role);\n        const checked = this.accessibilityProvider.isChecked(item.element);\n        if (typeof checked === 'boolean') {\n            item.row.domNode.setAttribute('aria-checked', String(!!checked));\n        }\n        else if (checked) {\n            const update = (checked) => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n            update(checked.value);\n            item.checkedDisposable = checked.onDidChange(update);\n        }\n        if (isStale || !item.row.domNode.parentElement) {\n            if (beforeElement) {\n                this.rowsContainer.insertBefore(item.row.domNode, beforeElement);\n            }\n            else {\n                this.rowsContainer.appendChild(item.row.domNode);\n            }\n        }\n        this.updateItemInDOM(item, index);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${item.templateId}`);\n        }\n        renderer === null || renderer === void 0 ? void 0 : renderer.renderElement(item.element, index, item.row.templateData, item.size);\n        const uri = this.dnd.getDragURI(item.element);\n        item.dragStartDisposable.dispose();\n        item.row.domNode.draggable = !!uri;\n        if (uri) {\n            item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n        }\n        if (this.horizontalScrolling) {\n            this.measureItemWidth(item);\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    measureItemWidth(item) {\n        if (!item.row || !item.row.domNode) {\n            return;\n        }\n        item.row.domNode.style.width = 'fit-content';\n        item.width = getContentWidth(item.row.domNode);\n        const style = window.getComputedStyle(item.row.domNode);\n        if (style.paddingLeft) {\n            item.width += parseFloat(style.paddingLeft);\n        }\n        if (style.paddingRight) {\n            item.width += parseFloat(style.paddingRight);\n        }\n        item.row.domNode.style.width = '';\n    }\n    updateItemInDOM(item, index) {\n        item.row.domNode.style.top = `${this.elementTop(index)}px`;\n        if (this.setRowHeight) {\n            item.row.domNode.style.height = `${item.size}px`;\n        }\n        if (this.setRowLineHeight) {\n            item.row.domNode.style.lineHeight = `${item.size}px`;\n        }\n        item.row.domNode.setAttribute('data-index', `${index}`);\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n        item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n        item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n        item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\n        item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n    }\n    removeItemFromDOM(index) {\n        const item = this.items[index];\n        item.dragStartDisposable.dispose();\n        item.checkedDisposable.dispose();\n        if (item.row) {\n            const renderer = this.renderers.get(item.templateId);\n            if (renderer && renderer.disposeElement) {\n                renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n            }\n            this.cache.release(item.row);\n            item.row = null;\n        }\n        if (this.horizontalScrolling) {\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    getScrollTop() {\n        const scrollPosition = this.scrollableElement.getScrollPosition();\n        return scrollPosition.scrollTop;\n    }\n    setScrollTop(scrollTop, reuseAnimation) {\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        this.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n    }\n    get scrollTop() {\n        return this.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.additionalScrollHeight;\n    }\n    // Events\n    get onMouseClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseDblClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseMiddleClick() { return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables); }\n    get onMouseDown() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOver() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOut() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseout')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onContextMenu() { return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables)); }\n    get onTouchStart() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables); }\n    get onTap() { return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables); }\n    toMouseEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toTouchEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toGestureEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toDragEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    onScroll(e) {\n        try {\n            const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n            if (this.supportDynamicHeights) {\n                this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n            }\n        }\n        catch (err) {\n            console.error('Got bad scroll event:', e);\n            throw err;\n        }\n    }\n    onTouchChange(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollTop -= event.translationY;\n    }\n    // DND\n    onDragStart(element, uri, event) {\n        var _a, _b;\n        if (!event.dataTransfer) {\n            return;\n        }\n        const elements = this.dnd.getDragElements(element);\n        event.dataTransfer.effectAllowed = 'copyMove';\n        event.dataTransfer.setData(DataTransfers.TEXT, uri);\n        if (event.dataTransfer.setDragImage) {\n            let label;\n            if (this.dnd.getDragLabel) {\n                label = this.dnd.getDragLabel(elements, event);\n            }\n            if (typeof label === 'undefined') {\n                label = String(elements.length);\n            }\n            const dragImage = $('.monaco-drag-image');\n            dragImage.textContent = label;\n            const getDragImageContainer = (e) => {\n                while (e && !e.classList.contains('monaco-workbench')) {\n                    e = e.parentElement;\n                }\n                return e || document.body;\n            };\n            const container = getDragImageContainer(this.domNode);\n            container.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => container.removeChild(dragImage), 0);\n        }\n        this.domNode.classList.add('dragging');\n        this.currentDragData = new ElementsDragAndDropData(elements);\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event);\n    }\n    onDragOver(event) {\n        var _a;\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        this.onDragLeaveTimeout.dispose();\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n            return false;\n        }\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n        if (!event.browserEvent.dataTransfer) {\n            return false;\n        }\n        // Drag over from outside\n        if (!this.currentDragData) {\n            if (StaticDND.CurrentDragAndDropData) {\n                // Drag over from another list\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\n            }\n            else {\n                // Drag over from the desktop\n                if (!event.browserEvent.dataTransfer.types) {\n                    return false;\n                }\n                this.currentDragData = new NativeDragAndDropData();\n            }\n        }\n        const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\n        if (!this.canDrop) {\n            this.currentDragFeedback = undefined;\n            this.currentDragFeedbackDisposable.dispose();\n            return false;\n        }\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect === 0 /* ListDragOverEffect.Copy */) ? 'copy' : 'move';\n        let feedback;\n        if (typeof result !== 'boolean' && result.feedback) {\n            feedback = result.feedback;\n        }\n        else {\n            if (typeof event.index === 'undefined') {\n                feedback = [-1];\n            }\n            else {\n                feedback = [event.index];\n            }\n        }\n        // sanitize feedback list\n        feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n        feedback = feedback[0] === -1 ? [-1] : feedback;\n        if (equalsDragFeedback(this.currentDragFeedback, feedback)) {\n            return true;\n        }\n        this.currentDragFeedback = feedback;\n        this.currentDragFeedbackDisposable.dispose();\n        if (feedback[0] === -1) { // entire list feedback\n            this.domNode.classList.add('drop-target');\n            this.rowsContainer.classList.add('drop-target');\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                this.domNode.classList.remove('drop-target');\n                this.rowsContainer.classList.remove('drop-target');\n            });\n        }\n        else {\n            for (const index of feedback) {\n                const item = this.items[index];\n                item.dropTarget = true;\n                (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.add('drop-target');\n            }\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                var _a;\n                for (const index of feedback) {\n                    const item = this.items[index];\n                    item.dropTarget = false;\n                    (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.remove('drop-target');\n                }\n            });\n        }\n        return true;\n    }\n    onDragLeave(event) {\n        var _a, _b;\n        this.onDragLeaveTimeout.dispose();\n        this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100);\n        if (this.currentDragData) {\n            (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event.element, event.index, event.browserEvent);\n        }\n    }\n    onDrop(event) {\n        if (!this.canDrop) {\n            return;\n        }\n        const dragData = this.currentDragData;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        if (!dragData || !event.browserEvent.dataTransfer) {\n            return;\n        }\n        event.browserEvent.preventDefault();\n        dragData.update(event.browserEvent.dataTransfer);\n        this.dnd.drop(dragData, event.element, event.index, event.browserEvent);\n    }\n    onDragEnd(event) {\n        var _a, _b;\n        this.canDrop = false;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    }\n    clearDragOverFeedback() {\n        this.currentDragFeedback = undefined;\n        this.currentDragFeedbackDisposable.dispose();\n        this.currentDragFeedbackDisposable = Disposable.None;\n    }\n    // DND scroll top animation\n    setupDragAndDropScrollTopAnimation(event) {\n        if (!this.dragOverAnimationDisposable) {\n            const viewTop = getTopLeftOffset(this.domNode).top;\n            this.dragOverAnimationDisposable = animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\n        }\n        this.dragOverAnimationStopDisposable.dispose();\n        this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n            if (this.dragOverAnimationDisposable) {\n                this.dragOverAnimationDisposable.dispose();\n                this.dragOverAnimationDisposable = undefined;\n            }\n        }, 1000);\n        this.dragOverMouseY = event.pageY;\n    }\n    animateDragAndDropScrollTop(viewTop) {\n        if (this.dragOverMouseY === undefined) {\n            return;\n        }\n        const diff = this.dragOverMouseY - viewTop;\n        const upperLimit = this.renderHeight - 35;\n        if (diff < 35) {\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n        }\n        else if (diff > upperLimit) {\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n        }\n    }\n    teardownDragAndDropScrollTopAnimation() {\n        this.dragOverAnimationStopDisposable.dispose();\n        if (this.dragOverAnimationDisposable) {\n            this.dragOverAnimationDisposable.dispose();\n            this.dragOverAnimationDisposable = undefined;\n        }\n    }\n    // Util\n    getItemIndexFromEventTarget(target) {\n        const scrollableElement = this.scrollableElement.getDomNode();\n        let element = target;\n        while (element instanceof HTMLElement && element !== this.rowsContainer && scrollableElement.contains(element)) {\n            const rawIndex = element.getAttribute('data-index');\n            if (rawIndex) {\n                const index = Number(rawIndex);\n                if (!isNaN(index)) {\n                    return index;\n                }\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    }\n    getRenderRange(renderTop, renderHeight) {\n        return {\n            start: this.rangeMap.indexAt(renderTop),\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n        };\n    }\n    /**\n     * Given a stable rendered state, checks every rendered element whether it needs\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n     */\n    _rerender(renderTop, renderHeight, inSmoothScrolling) {\n        const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n        // Let's remember the second element's position, this helps in scrolling up\n        // and preserving a linear upwards scroll movement\n        let anchorElementIndex;\n        let anchorElementTopDelta;\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\n            anchorElementIndex = previousRenderRange.start;\n            anchorElementTopDelta = 0;\n        }\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\n            anchorElementIndex = previousRenderRange.start + 1;\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n        }\n        let heightDiff = 0;\n        while (true) {\n            const renderRange = this.getRenderRange(renderTop, renderHeight);\n            let didChange = false;\n            for (let i = renderRange.start; i < renderRange.end; i++) {\n                const diff = this.probeDynamicHeight(i);\n                if (diff !== 0) {\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\n                }\n                heightDiff += diff;\n                didChange = didChange || diff !== 0;\n            }\n            if (!didChange) {\n                if (heightDiff !== 0) {\n                    this.eventuallyUpdateScrollDimensions();\n                }\n                const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n                for (const range of unrenderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        if (this.items[i].row) {\n                            this.removeItemFromDOM(i);\n                        }\n                    }\n                }\n                const renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\n                for (const range of renderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        const afterIndex = i + 1;\n                        const beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\n                        const beforeElement = beforeRow ? beforeRow.domNode : null;\n                        this.insertItemInDOM(i, beforeElement);\n                    }\n                }\n                for (let i = renderRange.start; i < renderRange.end; i++) {\n                    if (this.items[i].row) {\n                        this.updateItemInDOM(this.items[i], i);\n                    }\n                }\n                if (typeof anchorElementIndex === 'number') {\n                    // To compute a destination scroll top, we need to take into account the current smooth scrolling\n                    // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n                    // See https://github.com/microsoft/vscode/issues/104144\n                    // See https://github.com/microsoft/vscode/pull/104284\n                    // See https://github.com/microsoft/vscode/issues/107704\n                    const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n                    const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n                    this.setScrollTop(newScrollTop, inSmoothScrolling);\n                }\n                this._onDidChangeContentHeight.fire(this.contentHeight);\n                return;\n            }\n        }\n    }\n    probeDynamicHeight(index) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!!this.virtualDelegate.getDynamicHeight) {\n            const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n            if (newSize !== null) {\n                const size = item.size;\n                item.size = newSize;\n                item.lastDynamicHeightWidth = this.renderWidth;\n                return newSize - size;\n            }\n        }\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n            return 0;\n        }\n        if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n            return 0;\n        }\n        const size = item.size;\n        if (item.row) {\n            item.row.domNode.style.height = '';\n            item.size = item.row.domNode.offsetHeight;\n            item.lastDynamicHeightWidth = this.renderWidth;\n            return item.size - size;\n        }\n        const { row } = this.cache.alloc(item.templateId);\n        row.domNode.style.height = '';\n        this.rowsContainer.appendChild(row.domNode);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new BugIndicatingError('Missing renderer for templateId: ' + item.templateId);\n        }\n        renderer.renderElement(item.element, index, row.templateData, undefined);\n        item.size = row.domNode.offsetHeight;\n        (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, index, row.templateData, undefined);\n        (_c = (_b = this.virtualDelegate).setDynamicHeight) === null || _c === void 0 ? void 0 : _c.call(_b, item.element, item.size);\n        item.lastDynamicHeightWidth = this.renderWidth;\n        this.rowsContainer.removeChild(row.domNode);\n        this.cache.release(row);\n        return item.size - size;\n    }\n    getNextToLastElement(ranges) {\n        const lastRange = ranges[ranges.length - 1];\n        if (!lastRange) {\n            return null;\n        }\n        const nextToLastItem = this.items[lastRange.end];\n        if (!nextToLastItem) {\n            return null;\n        }\n        if (!nextToLastItem.row) {\n            return null;\n        }\n        return nextToLastItem.row.domNode;\n    }\n    getElementDomId(index) {\n        return `${this.domId}_${index}`;\n    }\n    // Dispose\n    dispose() {\n        var _a;\n        if (this.items) {\n            for (const item of this.items) {\n                if (item.row) {\n                    const renderer = this.renderers.get(item.row.templateId);\n                    if (renderer) {\n                        (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, -1, item.row.templateData, undefined);\n                        renderer.disposeTemplate(item.row.templateData);\n                    }\n                }\n            }\n            this.items = [];\n        }\n        if (this.domNode && this.domNode.parentNode) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        dispose(this.disposables);\n    }\n}\nListView.InstanceCount = 0;\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDown\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOver\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOut\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTouchStart\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTap\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CombinedSpliceable {\n    constructor(spliceables) {\n        this.spliceables = spliceables;\n    }\n    splice(start, deleteCount, elements) {\n        this.spliceables.forEach(s => s.splice(start, deleteCount, elements));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ListError extends Error {\n    constructor(user, message) {\n        super(`ListError [${user}] ${message}`);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { asCssValueWithDefault, createStyleSheet, EventHelper } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nclass TraitRenderer {\n    constructor(trait) {\n        this.trait = trait;\n        this.renderedElements = [];\n    }\n    get templateId() {\n        return `template:${this.trait.name}`;\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, templateData) {\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (renderedElementIndex >= 0) {\n            const rendered = this.renderedElements[renderedElementIndex];\n            this.trait.unrender(templateData);\n            rendered.index = index;\n        }\n        else {\n            const rendered = { index, templateData };\n            this.renderedElements.push(rendered);\n        }\n        this.trait.renderIndex(index, templateData);\n    }\n    splice(start, deleteCount, insertCount) {\n        const rendered = [];\n        for (const renderedElement of this.renderedElements) {\n            if (renderedElement.index < start) {\n                rendered.push(renderedElement);\n            }\n            else if (renderedElement.index >= start + deleteCount) {\n                rendered.push({\n                    index: renderedElement.index + insertCount - deleteCount,\n                    templateData: renderedElement.templateData\n                });\n            }\n        }\n        this.renderedElements = rendered;\n    }\n    renderIndexes(indexes) {\n        for (const { index, templateData } of this.renderedElements) {\n            if (indexes.indexOf(index) > -1) {\n                this.trait.renderIndex(index, templateData);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (index < 0) {\n            return;\n        }\n        this.renderedElements.splice(index, 1);\n    }\n}\nclass Trait {\n    get name() { return this._trait; }\n    get renderer() {\n        return new TraitRenderer(this);\n    }\n    constructor(_trait) {\n        this._trait = _trait;\n        this.length = 0;\n        this.indexes = [];\n        this.sortedIndexes = [];\n        this._onChange = new Emitter();\n        this.onChange = this._onChange.event;\n    }\n    splice(start, deleteCount, elements) {\n        var _a;\n        deleteCount = Math.max(0, Math.min(deleteCount, this.length - start));\n        const diff = elements.length - deleteCount;\n        const end = start + deleteCount;\n        const sortedIndexes = [\n            ...this.sortedIndexes.filter(i => i < start),\n            ...elements.map((hasTrait, i) => hasTrait ? i + start : -1).filter(i => i !== -1),\n            ...this.sortedIndexes.filter(i => i >= end).map(i => i + diff)\n        ];\n        const length = this.length + diff;\n        if (this.sortedIndexes.length > 0 && sortedIndexes.length === 0 && length > 0) {\n            const first = (_a = this.sortedIndexes.find(index => index >= start)) !== null && _a !== void 0 ? _a : length - 1;\n            sortedIndexes.push(Math.min(first, length - 1));\n        }\n        this.renderer.splice(start, deleteCount, elements.length);\n        this._set(sortedIndexes, sortedIndexes);\n        this.length = length;\n    }\n    renderIndex(index, container) {\n        container.classList.toggle(this._trait, this.contains(index));\n    }\n    unrender(container) {\n        container.classList.remove(this._trait);\n    }\n    /**\n     * Sets the indexes which should have this trait.\n     *\n     * @param indexes Indexes which should have this trait.\n     * @return The old indexes which had this trait.\n     */\n    set(indexes, browserEvent) {\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n    }\n    _set(indexes, sortedIndexes, browserEvent) {\n        const result = this.indexes;\n        const sortedResult = this.sortedIndexes;\n        this.indexes = indexes;\n        this.sortedIndexes = sortedIndexes;\n        const toRender = disjunction(sortedResult, indexes);\n        this.renderer.renderIndexes(toRender);\n        this._onChange.fire({ indexes, browserEvent });\n        return result;\n    }\n    get() {\n        return this.indexes;\n    }\n    contains(index) {\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n    dispose() {\n        dispose(this._onChange);\n    }\n}\n__decorate([\n    memoize\n], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n    constructor(setAriaSelected) {\n        super('selected');\n        this.setAriaSelected = setAriaSelected;\n    }\n    renderIndex(index, container) {\n        super.renderIndex(index, container);\n        if (this.setAriaSelected) {\n            if (this.contains(index)) {\n                container.setAttribute('aria-selected', 'true');\n            }\n            else {\n                container.setAttribute('aria-selected', 'false');\n            }\n        }\n    }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n    constructor(trait, view, identityProvider) {\n        this.trait = trait;\n        this.view = view;\n        this.identityProvider = identityProvider;\n    }\n    splice(start, deleteCount, elements) {\n        if (!this.identityProvider) {\n            return this.trait.splice(start, deleteCount, elements.map(() => false));\n        }\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n        const elementsWithTrait = elements.map(e => pastElementsWithTrait.indexOf(this.identityProvider.getId(e).toString()) > -1);\n        this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n}\nexport function isInputElement(e) {\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nexport function isMonacoEditor(e) {\n    if (e.classList.contains('monaco-editor')) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isMonacoEditor(e.parentElement);\n}\nexport function isButton(e) {\n    if ((e.tagName === 'A' && e.classList.contains('monaco-button')) ||\n        (e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown'))) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isButton(e.parentElement);\n}\nclass KeyboardController {\n    get onKeyDown() {\n        return this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event)\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n    }\n    constructor(list, view, options) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        this.multipleSelectionDisposables = new DisposableStore();\n        this.onKeyDown.filter(e => e.keyCode === 3 /* KeyCode.Enter */).on(this.onEnter, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */).on(this.onUpArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */).on(this.onDownArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 11 /* KeyCode.PageUp */).on(this.onPageUpArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 12 /* KeyCode.PageDown */).on(this.onPageDownArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 9 /* KeyCode.Escape */).on(this.onEscape, this, this.disposables);\n        if (options.multipleSelectionSupport !== false) {\n            this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n        }\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionDisposables.clear();\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n            }\n        }\n    }\n    onEnter(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n    onUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPrevious(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNext(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPreviousPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNextPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onCtrlA(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(range(this.list.length), e.browserEvent);\n        this.list.setAnchor(undefined);\n        this.view.domNode.focus();\n    }\n    onEscape(e) {\n        if (this.list.getSelection().length) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            this.view.domNode.focus();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.multipleSelectionDisposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n    TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n    TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey || event.altKey) {\n            return false;\n        }\n        return (event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)\n            || (event.keyCode >= 98 /* KeyCode.Numpad0 */ && event.keyCode <= 107 /* KeyCode.Numpad9 */)\n            || (event.keyCode >= 85 /* KeyCode.Semicolon */ && event.keyCode <= 95 /* KeyCode.Quote */);\n    }\n};\nclass TypeNavigationController {\n    constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n        this.list = list;\n        this.view = view;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n        this.delegate = delegate;\n        this.enabled = false;\n        this.state = TypeNavigationControllerState.Idle;\n        this.mode = TypeNavigationMode.Automatic;\n        this.triggered = false;\n        this.previouslyFocused = -1;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this.updateOptions(list.options);\n    }\n    updateOptions(options) {\n        var _a, _b;\n        if ((_a = options.typeNavigationEnabled) !== null && _a !== void 0 ? _a : true) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n        this.mode = (_b = options.typeNavigationMode) !== null && _b !== void 0 ? _b : TypeNavigationMode.Automatic;\n    }\n    enable() {\n        if (this.enabled) {\n            return;\n        }\n        let typing = false;\n        const onChar = this.enabledDisposables.add(Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event))\n            .filter(e => !isInputElement(e.target))\n            .filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered)\n            .map(event => new StandardKeyboardEvent(event))\n            .filter(e => typing || this.keyboardNavigationEventFilter(e))\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\n            .forEach(e => EventHelper.stop(e, true))\n            .map(event => event.browserEvent.key)\n            .event;\n        const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, undefined, this.enabledDisposables);\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i), undefined, this.enabledDisposables);\n        onInput(this.onInput, this, this.enabledDisposables);\n        onClear(this.onClear, this, this.enabledDisposables);\n        onChar(() => typing = true, undefined, this.enabledDisposables);\n        onClear(() => typing = false, undefined, this.enabledDisposables);\n        this.enabled = true;\n        this.triggered = false;\n    }\n    disable() {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabledDisposables.clear();\n        this.enabled = false;\n        this.triggered = false;\n    }\n    onClear() {\n        var _a;\n        const focus = this.list.getFocus();\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n            // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n            const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n            if (ariaLabel) {\n                alert(ariaLabel);\n            }\n        }\n        this.previouslyFocused = -1;\n    }\n    onInput(word) {\n        if (!word) {\n            this.state = TypeNavigationControllerState.Idle;\n            this.triggered = false;\n            return;\n        }\n        const focus = this.list.getFocus();\n        const start = focus.length > 0 ? focus[0] : 0;\n        const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n        this.state = TypeNavigationControllerState.Typing;\n        for (let i = 0; i < this.list.length; i++) {\n            const index = (start + i + delta) % this.list.length;\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n            const labelStr = label && label.toString();\n            if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n                this.previouslyFocused = start;\n                this.list.setFocus([index]);\n                this.list.reveal(index);\n                return;\n            }\n        }\n    }\n    dispose() {\n        this.disable();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nclass DOMFocusController {\n    constructor(list, view) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        const onKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event))\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e));\n        onKeyDown.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey)\n            .on(this.onTab, this, this.disposables);\n    }\n    onTab(e) {\n        if (e.target !== this.view.domNode) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const focusedDomElement = this.view.domElement(focus[0]);\n        if (!focusedDomElement) {\n            return;\n        }\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n            return;\n        }\n        const style = window.getComputedStyle(tabIndexElement);\n        if (style.visibility === 'hidden' || style.display === 'none') {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        tabIndexElement.focus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport function isSelectionSingleChangeEvent(event) {\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n    return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n    return event instanceof MouseEvent && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n    isSelectionSingleChangeEvent,\n    isSelectionRangeChangeEvent\n};\nexport class MouseController {\n    constructor(list) {\n        this.list = list;\n        this.disposables = new DisposableStore();\n        this._onPointer = new Emitter();\n        this.onPointer = this._onPointer.event;\n        if (list.options.multipleSelectionSupport !== false) {\n            this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n        }\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n        if (this.mouseSupport) {\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n        }\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionController = undefined;\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n            }\n        }\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    isSelectionChangeEvent(event) {\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n    onMouseDown(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (document.activeElement !== e.browserEvent.target) {\n            this.list.domFocus();\n        }\n    }\n    onContextMenu(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\n        this.list.setFocus(focus, e.browserEvent);\n    }\n    onViewPointer(e) {\n        if (!this.mouseSupport) {\n            return;\n        }\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = e.index;\n        if (typeof focus === 'undefined') {\n            this.list.setFocus([], e.browserEvent);\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            return;\n        }\n        if (this.isSelectionRangeChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        this.list.setFocus([focus], e.browserEvent);\n        this.list.setAnchor(focus);\n        if (!isMouseRightClick(e.browserEvent)) {\n            this.list.setSelection([focus], e.browserEvent);\n        }\n        this._onPointer.fire(e);\n    }\n    onDoubleClick(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = this.list.getFocus();\n        this.list.setSelection(focus, e.browserEvent);\n    }\n    changeSelection(e) {\n        const focus = e.index;\n        let anchor = this.list.getAnchor();\n        if (this.isSelectionRangeChangeEvent(e)) {\n            if (typeof anchor === 'undefined') {\n                const currentFocus = this.list.getFocus()[0];\n                anchor = currentFocus !== null && currentFocus !== void 0 ? currentFocus : focus;\n                this.list.setAnchor(anchor);\n            }\n            const min = Math.min(anchor, focus);\n            const max = Math.max(anchor, focus);\n            const rangeSelection = range(min, max + 1);\n            const selection = this.list.getSelection();\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n            if (contiguousRange.length === 0) {\n                return;\n            }\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n            this.list.setSelection(newSelection, e.browserEvent);\n            this.list.setFocus([focus], e.browserEvent);\n        }\n        else if (this.isSelectionSingleChangeEvent(e)) {\n            const selection = this.list.getSelection();\n            const newSelection = selection.filter(i => i !== focus);\n            this.list.setFocus([focus]);\n            this.list.setAnchor(focus);\n            if (selection.length === newSelection.length) {\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\n            }\n            else {\n                this.list.setSelection(newSelection, e.browserEvent);\n            }\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class DefaultStyleController {\n    constructor(styleElement, selectorSuffix) {\n        this.styleElement = styleElement;\n        this.selectorSuffix = selectorSuffix;\n    }\n    style(styles) {\n        var _a, _b;\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n        const content = [];\n        if (styles.listBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n        }\n        if (styles.listFocusBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n        }\n        if (styles.listActiveSelectionBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listActiveSelectionForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n        }\n        if (styles.listActiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n        }\n        if (styles.listFocusAndSelectionBackground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n        }\n        if (styles.listFocusAndSelectionForeground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n        }\n        if (styles.listInactiveFocusBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n        }\n        if (styles.listHoverBackground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n        }\n        if (styles.listHoverForeground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n        }\n        /**\n         * Outlines\n         */\n        const focusAndSelectionOutline = asCssValueWithDefault(styles.listFocusAndSelectionOutline, asCssValueWithDefault(styles.listSelectionOutline, (_a = styles.listFocusOutline) !== null && _a !== void 0 ? _a : ''));\n        if (focusAndSelectionOutline) { // default: listFocusOutline\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused.selected { outline: 1px solid ${focusAndSelectionOutline}; outline-offset: -1px;}`);\n        }\n        if (styles.listFocusOutline) { // default: set\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n        }\n        const inactiveFocusAndSelectionOutline = asCssValueWithDefault(styles.listSelectionOutline, (_b = styles.listInactiveFocusOutline) !== null && _b !== void 0 ? _b : '');\n        if (inactiveFocusAndSelectionOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused.selected { outline: 1px dotted ${inactiveFocusAndSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listSelectionOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listInactiveFocusOutline) { // default: null\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listHoverOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listDropBackground) {\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\n        }\n        if (styles.tableColumnsBorder) {\n            content.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`);\n        }\n        if (styles.tableOddRowsBackgroundColor) {\n            content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n    }\n}\nexport const unthemedListStyles = {\n    listFocusBackground: '#7FB0D0',\n    listActiveSelectionBackground: '#0E639C',\n    listActiveSelectionForeground: '#FFFFFF',\n    listActiveSelectionIconForeground: '#FFFFFF',\n    listFocusAndSelectionOutline: '#90C2F9',\n    listFocusAndSelectionBackground: '#094771',\n    listFocusAndSelectionForeground: '#FFFFFF',\n    listInactiveSelectionBackground: '#3F3F46',\n    listInactiveSelectionIconForeground: '#FFFFFF',\n    listHoverBackground: '#2A2D2E',\n    listDropBackground: '#383B3D',\n    treeIndentGuidesStroke: '#a9a9a9',\n    treeInactiveIndentGuidesStroke: Color.fromHex('#a9a9a9').transparent(0.4).toString(),\n    tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2).toString(),\n    tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04).toString(),\n    listBackground: undefined,\n    listFocusForeground: undefined,\n    listInactiveSelectionForeground: undefined,\n    listInactiveFocusForeground: undefined,\n    listInactiveFocusBackground: undefined,\n    listHoverForeground: undefined,\n    listFocusOutline: undefined,\n    listInactiveFocusOutline: undefined,\n    listSelectionOutline: undefined,\n    listHoverOutline: undefined\n};\nconst DefaultOptions = {\n    keyboardSupport: true,\n    mouseSupport: true,\n    multipleSelectionSupport: true,\n    dnd: {\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { }\n    }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n    const index = range.indexOf(value);\n    if (index === -1) {\n        return [];\n    }\n    const result = [];\n    let i = index - 1;\n    while (i >= 0 && range[i] === value - (index - i)) {\n        result.push(range[i--]);\n    }\n    result.reverse();\n    i = index;\n    while (i < range.length && range[i] === value + (i - index)) {\n        result.push(range[i++]);\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            result.push(one[i]);\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            result.push(other[j++]);\n        }\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            j++;\n        }\n    }\n    return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n    constructor(_templateId, renderers) {\n        this._templateId = _templateId;\n        this.renderers = renderers;\n    }\n    get templateId() {\n        return this._templateId;\n    }\n    renderTemplate(container) {\n        return this.renderers.map(r => r.renderTemplate(container));\n    }\n    renderElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.renderElement(element, index, templateData[i++], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        var _a;\n        let i = 0;\n        for (const renderer of this.renderers) {\n            (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, element, index, templateData[i], height);\n            i += 1;\n        }\n    }\n    disposeTemplate(templateData) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeTemplate(templateData[i++]);\n        }\n    }\n}\nclass AccessibiltyRenderer {\n    constructor(accessibilityProvider) {\n        this.accessibilityProvider = accessibilityProvider;\n        this.templateId = 'a18n';\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, container) {\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        if (ariaLabel) {\n            container.setAttribute('aria-label', ariaLabel);\n        }\n        else {\n            container.removeAttribute('aria-label');\n        }\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        else {\n            container.removeAttribute('aria-level');\n        }\n    }\n    disposeTemplate(templateData) {\n        // noop\n    }\n}\nclass ListViewDragAndDrop {\n    constructor(list, dnd) {\n        this.list = list;\n        this.dnd = dnd;\n    }\n    getDragElements(element) {\n        const selection = this.list.getSelectedElements();\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\n        return elements;\n    }\n    getDragURI(element) {\n        return this.dnd.getDragURI(element);\n    }\n    getDragLabel(elements, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(elements, originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, data, originalEvent);\n    }\n    onDragOver(data, targetElement, targetIndex, originalEvent) {\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n    }\n    onDragLeave(data, targetElement, targetIndex, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, data, targetElement, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    drop(data, targetElement, targetIndex, originalEvent) {\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n    }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n    get onDidChangeFocus() {\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get domId() { return this.view.domId; }\n    get onMouseClick() { return this.view.onMouseClick; }\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\n    get onPointer() { return this.mouseController.onPointer; }\n    get onMouseDown() { return this.view.onMouseDown; }\n    get onMouseOver() { return this.view.onMouseOver; }\n    get onMouseOut() { return this.view.onMouseOut; }\n    get onTouchStart() { return this.view.onTouchStart; }\n    get onTap() { return this.view.onTap; }\n    /**\n     * Possible context menu trigger events:\n     * - ContextMenu key\n     * - Shift F10\n     * - Ctrl Option Shift M (macOS with VoiceOver)\n     * - Mouse right click\n     */\n    get onContextMenu() {\n        let didJustPressContextMenuKey = false;\n        const fromKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event))\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .filter(() => false)\n            .event;\n        const fromKeyUp = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event))\n            .forEach(() => didJustPressContextMenuKey = false)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .map(({ browserEvent }) => {\n            const focus = this.getFocus();\n            const index = focus.length ? focus[0] : undefined;\n            const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n            const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n            return { index, element, anchor, browserEvent };\n        })\n            .event;\n        const fromMouse = this.disposables.add(Event.chain(this.view.onContextMenu))\n            .filter(_ => !didJustPressContextMenuKey)\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: { x: browserEvent.pageX + 1, y: browserEvent.pageY }, browserEvent }))\n            .event;\n        return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n    }\n    get onKeyDown() { return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event; }\n    get onDidFocus() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event); }\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\n        var _a, _b, _c, _d;\n        this.user = user;\n        this._options = _options;\n        this.focus = new Trait('focused');\n        this.anchor = new Trait('anchor');\n        this.eventBufferer = new EventBufferer();\n        this._ariaLabel = '';\n        this.disposables = new DisposableStore();\n        this._onDidDispose = new Emitter();\n        this.onDidDispose = this._onDidDispose.event;\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n        this.selection = new SelectionTrait(role !== 'listbox');\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\n        this.accessibilityProvider = _options.accessibilityProvider;\n        if (this.accessibilityProvider) {\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n            (_c = (_b = this.accessibilityProvider).onDidChangeActiveDescendant) === null || _c === void 0 ? void 0 : _c.call(_b, this.onDidChangeActiveDescendant, this, this.disposables);\n        }\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n        const viewOptions = Object.assign(Object.assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\n        this.view = this.createListView(container, virtualDelegate, renderers, viewOptions);\n        this.view.domNode.setAttribute('role', role);\n        if (_options.styleController) {\n            this.styleController = _options.styleController(this.view.domId);\n        }\n        else {\n            const styleElement = createStyleSheet(this.view.domNode);\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n        }\n        this.spliceable = new CombinedSpliceable([\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\n            new TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n            this.view\n        ]);\n        this.disposables.add(this.focus);\n        this.disposables.add(this.selection);\n        this.disposables.add(this.anchor);\n        this.disposables.add(this.view);\n        this.disposables.add(this._onDidDispose);\n        this.disposables.add(new DOMFocusController(this, this.view));\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n            this.keyboardController = new KeyboardController(this, this.view, _options);\n            this.disposables.add(this.keyboardController);\n        }\n        if (_options.keyboardNavigationLabelProvider) {\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n            this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, (_d = _options.keyboardNavigationEventFilter) !== null && _d !== void 0 ? _d : (() => true), delegate);\n            this.disposables.add(this.typeNavigationController);\n        }\n        this.mouseController = this.createMouseController(_options);\n        this.disposables.add(this.mouseController);\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n        if (this.accessibilityProvider) {\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n        }\n        if (this._options.multipleSelectionSupport !== false) {\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\n        }\n    }\n    createListView(container, virtualDelegate, renderers, viewOptions) {\n        return new ListView(container, virtualDelegate, renderers, viewOptions);\n    }\n    createMouseController(options) {\n        return new MouseController(this);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a, _b;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        (_a = this.typeNavigationController) === null || _a === void 0 ? void 0 : _a.updateOptions(this._options);\n        if (this._options.multipleSelectionController !== undefined) {\n            if (this._options.multipleSelectionSupport) {\n                this.view.domNode.setAttribute('aria-multiselectable', 'true');\n            }\n            else {\n                this.view.domNode.removeAttribute('aria-multiselectable');\n            }\n        }\n        this.mouseController.updateOptions(optionsUpdate);\n        (_b = this.keyboardController) === null || _b === void 0 ? void 0 : _b.updateOptions(optionsUpdate);\n        this.view.updateOptions(optionsUpdate);\n    }\n    get options() {\n        return this._options;\n    }\n    splice(start, deleteCount, elements = []) {\n        if (start < 0 || start > this.view.length) {\n            throw new ListError(this.user, `Invalid start index: ${start}`);\n        }\n        if (deleteCount < 0) {\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n        }\n        if (deleteCount === 0 && elements.length === 0) {\n            return;\n        }\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n    }\n    rerender() {\n        this.view.rerender();\n    }\n    element(index) {\n        return this.view.element(index);\n    }\n    get length() {\n        return this.view.length;\n    }\n    get contentHeight() {\n        return this.view.contentHeight;\n    }\n    get scrollTop() {\n        return this.view.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.view.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get firstVisibleIndex() {\n        return this.view.firstVisibleIndex;\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    set ariaLabel(value) {\n        this._ariaLabel = value;\n        this.view.domNode.setAttribute('aria-label', value);\n    }\n    domFocus() {\n        this.view.domNode.focus({ preventScroll: true });\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n    }\n    setSelection(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.selection.set(indexes, browserEvent);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.view.element(i));\n    }\n    setAnchor(index) {\n        if (typeof index === 'undefined') {\n            this.anchor.set([]);\n            return;\n        }\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        this.anchor.set([index]);\n    }\n    getAnchor() {\n        return firstOrDefault(this.anchor.get(), undefined);\n    }\n    getAnchorElement() {\n        const anchor = this.getAnchor();\n        return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n    }\n    setFocus(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.focus.set(indexes, browserEvent);\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusNextPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n            lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n                const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n                if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n                    this.setFocus([lastGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([lastPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = this.view.getScrollTop();\n                let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n                if (lastPageIndex > currentlyFocusedElementIndex) {\n                    // scroll last page element to the top only if the last page element is below the focused element\n                    nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n                }\n                this.view.setScrollTop(nextpageScrollTop);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusNextPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusPreviousPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let firstPageIndex;\n            const scrollTop = this.view.getScrollTop();\n            if (scrollTop === 0) {\n                firstPageIndex = this.view.indexAt(scrollTop);\n            }\n            else {\n                firstPageIndex = this.view.indexAfter(scrollTop - 1);\n            }\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n                const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n                if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n                    this.setFocus([firstGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([firstPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = scrollTop;\n                this.view.setScrollTop(scrollTop - this.view.renderHeight);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusPreviousPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusLast(browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusFirst(browserEvent, filter) {\n        this.focusNth(0, browserEvent, filter);\n    }\n    focusNth(n, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findNextIndex(n, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    findNextIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index >= this.length && !loop) {\n                return -1;\n            }\n            index = index % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    }\n    findPreviousIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index < 0 && !loop) {\n                return -1;\n            }\n            index = (this.length + (index % this.length)) % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index--;\n        }\n        return -1;\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    getFocusedElements() {\n        return this.getFocus().map(i => this.view.element(i));\n    }\n    reveal(index, relativeTop) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (isNumber(relativeTop)) {\n            // y = mx + b\n            const m = elementHeight - this.view.renderHeight;\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n        }\n        else {\n            const viewItemBottom = elementTop + elementHeight;\n            const scrollBottom = scrollTop + this.view.renderHeight;\n            if (elementTop < scrollTop && viewItemBottom >= scrollBottom) {\n                // The element is already overflowing the viewport, no-op\n            }\n            else if (elementTop < scrollTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n                this.view.setScrollTop(elementTop);\n            }\n            else if (viewItemBottom >= scrollBottom) {\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n            }\n        }\n    }\n    getHTMLElement() {\n        return this.view.domNode;\n    }\n    getElementID(index) {\n        return this.view.getElementDomId(index);\n    }\n    style(styles) {\n        this.styleController.style(styles);\n    }\n    toListEvent({ indexes, browserEvent }) {\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n    }\n    _onFocusChange() {\n        const focus = this.focus.get();\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n        this.onDidChangeActiveDescendant();\n    }\n    onDidChangeActiveDescendant() {\n        var _a;\n        const focus = this.focus.get();\n        if (focus.length > 0) {\n            let id;\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n            }\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n        }\n        else {\n            this.view.domNode.removeAttribute('aria-activedescendant');\n        }\n    }\n    _onSelectionChange() {\n        const selection = this.selection.get();\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n    dispose() {\n        this._onDidDispose.fire();\n        this.disposables.dispose();\n        this._onDidDispose.dispose();\n    }\n}\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeSelection\", null);\n__decorate([\n    memoize\n], List.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], List.prototype, \"onKeyDown\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidFocus\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon, getCodiconFontCharacters } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var Direction;\n(function (Direction) {\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\n})(Direction || (Direction = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options, menuStyles) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuStyles = menuStyles;\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.menuDisposables = this._register(new DisposableStore());\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\n        this._register(Gesture.addTarget(menuElement));\n        addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        });\n        if (options.enableMnemonics) {\n            this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        this.styleScrollElement(scrollElement, menuStyles);\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter(a => {\n            var _a;\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    styleScrollElement(scrollElement, style) {\n        var _a, _b;\n        const fgColor = (_a = style.foregroundColor) !== null && _a !== void 0 ? _a : '';\n        const bgColor = (_b = style.backgroundColor) !== null && _b !== void 0 ? _b : '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        scrollElement.style.outline = border;\n        scrollElement.style.borderRadius = borderRadius;\n        scrollElement.style.color = fgColor;\n        scrollElement.style.backgroundColor = bgColor;\n        scrollElement.style.boxShadow = shadow;\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, Object.assign(Object.assign({}, options), { submenuIds: new Set([...(options.submenuIds || []), action.id]) }), this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, menuStyle) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.menuStyle = menuStyle;\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.action.label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n        this.applyStyle();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        var _a;\n        super.focus();\n        (_a = this.item) === null || _a === void 0 ? void 0 : _a.focus();\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        var _a;\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.action.label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.action.class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.action.checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n            this.item.style.backgroundColor = bgColor !== null && bgColor !== void 0 ? bgColor : '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n        super(action, action, submenuOptions, menuStyles);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch (_a) { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection === Direction.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        var _a;\n        if (this.item) {\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        super.applyStyle();\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    constructor(context, action, options, menuStyles) {\n        super(context, action, options);\n        this.menuStyles = menuStyles;\n    }\n    render(container) {\n        super.render(container);\n        if (this.label) {\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n    const fontCharacter = getCodiconFontCharacters()[c.id];\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './mouseCursor.css';\nexport const MOUSE_CURSOR_TEXT_CSS_CLASS_NAME = `monaco-mouse-cursor-text`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { show } from '../../dom.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './progressbar.css';\nconst CSS_DONE = 'done';\nconst CSS_ACTIVE = 'active';\nconst CSS_INFINITE = 'infinite';\nconst CSS_INFINITE_LONG_RUNNING = 'infinite-long-running';\nconst CSS_DISCRETE = 'discrete';\n/**\n * A progress bar with support for infinite or discrete progress.\n */\nexport class ProgressBar extends Disposable {\n    constructor(container, options) {\n        super();\n        this.workedVal = 0;\n        this.showDelayedScheduler = this._register(new RunOnceScheduler(() => show(this.element), 0));\n        this.longRunningScheduler = this._register(new RunOnceScheduler(() => this.infiniteLongRunning(), ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD));\n        this.create(container, options);\n    }\n    create(container, options) {\n        this.element = document.createElement('div');\n        this.element.classList.add('monaco-progress-container');\n        this.element.setAttribute('role', 'progressbar');\n        this.element.setAttribute('aria-valuemin', '0');\n        container.appendChild(this.element);\n        this.bit = document.createElement('div');\n        this.bit.classList.add('progress-bit');\n        this.bit.style.backgroundColor = (options === null || options === void 0 ? void 0 : options.progressBarBackground) || '#0E70C0';\n        this.element.appendChild(this.bit);\n    }\n    off() {\n        this.bit.style.width = 'inherit';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_ACTIVE, CSS_INFINITE, CSS_INFINITE_LONG_RUNNING, CSS_DISCRETE);\n        this.workedVal = 0;\n        this.totalWork = undefined;\n        this.longRunningScheduler.cancel();\n    }\n    /**\n     * Stops the progressbar from showing any progress instantly without fading out.\n     */\n    stop() {\n        return this.doDone(false);\n    }\n    doDone(delayed) {\n        this.element.classList.add(CSS_DONE);\n        // discrete: let it grow to 100% width and hide afterwards\n        if (!this.element.classList.contains(CSS_INFINITE)) {\n            this.bit.style.width = 'inherit';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        // infinite: let it fade out and hide afterwards\n        else {\n            this.bit.style.opacity = '0';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        return this;\n    }\n    /**\n     * Use this mode to indicate progress that has no total number of work units.\n     */\n    infinite() {\n        this.bit.style.width = '2%';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_DISCRETE, CSS_DONE, CSS_INFINITE_LONG_RUNNING);\n        this.element.classList.add(CSS_ACTIVE, CSS_INFINITE);\n        this.longRunningScheduler.schedule();\n        return this;\n    }\n    infiniteLongRunning() {\n        this.element.classList.add(CSS_INFINITE_LONG_RUNNING);\n    }\n    getContainer() {\n        return this.element;\n    }\n}\n/**\n * After a certain time of showing the progress bar, switch\n * to long-running mode and throttle animations to reduce\n * the pressure on the GPU process.\n *\n * https://github.com/microsoft/vscode/issues/97900\n * https://github.com/microsoft/vscode/issues/138396\n */\nProgressBar.LONG_RUNNING_INFINITE_THRESHOLD = 10000;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { $, append, createStyleSheet, EventHelper } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport { Delayer } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './sash.css';\n/**\n * Allow the sashes to be visible at runtime.\n * @remark Use for development purposes only.\n */\nconst DEBUG = false;\nexport var OrthogonalEdge;\n(function (OrthogonalEdge) {\n    OrthogonalEdge[\"North\"] = \"north\";\n    OrthogonalEdge[\"South\"] = \"south\";\n    OrthogonalEdge[\"East\"] = \"east\";\n    OrthogonalEdge[\"West\"] = \"west\";\n})(OrthogonalEdge || (OrthogonalEdge = {}));\nlet globalSize = 4;\nconst onDidChangeGlobalSize = new Emitter();\nlet globalHoverDelay = 300;\nconst onDidChangeHoverDelay = new Emitter();\nclass MouseEventFactory {\n    constructor() {\n        this.disposables = new DisposableStore();\n    }\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(window, 'mousemove')).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(window, 'mouseup')).event;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerUp\", null);\nclass GestureEventFactory {\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.Change)).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.End)).event;\n    }\n    constructor(el) {\n        this.el = el;\n        this.disposables = new DisposableStore();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerUp\", null);\nclass OrthogonalPointerEventFactory {\n    get onPointerMove() {\n        return this.factory.onPointerMove;\n    }\n    get onPointerUp() {\n        return this.factory.onPointerUp;\n    }\n    constructor(factory) {\n        this.factory = factory;\n    }\n    dispose() {\n        // noop\n    }\n}\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerUp\", null);\nconst PointerEventsDisabledCssClass = 'pointer-events-disabled';\n/**\n * The {@link Sash} is the UI component which allows the user to resize other\n * components. It's usually an invisible horizontal or vertical line which, when\n * hovered, becomes highlighted and can be dragged along the perpendicular dimension\n * to its direction.\n *\n * Features:\n * - Touch event handling\n * - Corner sash support\n * - Hover with different mouse cursor support\n * - Configurable hover size\n * - Linked sash support, for 2x2 corner sashes\n */\nexport class Sash extends Disposable {\n    get state() { return this._state; }\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    /**\n     * The state of a sash defines whether it can be interacted with by the user\n     * as well as what mouse cursor to use, when hovered.\n     */\n    set state(state) {\n        if (this._state === state) {\n            return;\n        }\n        this.el.classList.toggle('disabled', state === 0 /* SashState.Disabled */);\n        this.el.classList.toggle('minimum', state === 1 /* SashState.AtMinimum */);\n        this.el.classList.toggle('maximum', state === 2 /* SashState.AtMaximum */);\n        this._state = state;\n        this.onDidEnablementChange.fire(state);\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the start of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The start of a horizontal sash is its left-most position.\n     * The start of a vertical sash is its top-most position.\n     */\n    set orthogonalStartSash(sash) {\n        this.orthogonalStartDragHandleDisposables.clear();\n        this.orthogonalStartSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalStartDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalStartDragHandle = append(this.el, $('.orthogonal-drag-handle.start'));\n                    this.orthogonalStartDragHandleDisposables.add(toDisposable(() => this._orthogonalStartDragHandle.remove()));\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                }\n            };\n            this.orthogonalStartSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the end of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The end of a horizontal sash is its right-most position.\n     * The end of a vertical sash is its bottom-most position.\n     */\n    set orthogonalEndSash(sash) {\n        this.orthogonalEndDragHandleDisposables.clear();\n        this.orthogonalEndSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalEndDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalEndDragHandle = append(this.el, $('.orthogonal-drag-handle.end'));\n                    this.orthogonalEndDragHandleDisposables.add(toDisposable(() => this._orthogonalEndDragHandle.remove()));\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                }\n            };\n            this.orthogonalEndSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalEndSash = sash;\n    }\n    constructor(container, layoutProvider, options) {\n        super();\n        this.hoverDelay = globalHoverDelay;\n        this.hoverDelayer = this._register(new Delayer(this.hoverDelay));\n        this._state = 3 /* SashState.Enabled */;\n        this.onDidEnablementChange = this._register(new Emitter());\n        this._onDidStart = this._register(new Emitter());\n        this._onDidChange = this._register(new Emitter());\n        this._onDidReset = this._register(new Emitter());\n        this._onDidEnd = this._register(new Emitter());\n        this.orthogonalStartSashDisposables = this._register(new DisposableStore());\n        this.orthogonalStartDragHandleDisposables = this._register(new DisposableStore());\n        this.orthogonalEndSashDisposables = this._register(new DisposableStore());\n        this.orthogonalEndDragHandleDisposables = this._register(new DisposableStore());\n        /**\n         * An event which fires whenever the user starts dragging this sash.\n         */\n        this.onDidStart = this._onDidStart.event;\n        /**\n         * An event which fires whenever the user moves the mouse while\n         * dragging this sash.\n         */\n        this.onDidChange = this._onDidChange.event;\n        /**\n         * An event which fires whenever the user double clicks this sash.\n         */\n        this.onDidReset = this._onDidReset.event;\n        /**\n         * An event which fires whenever the user stops dragging this sash.\n         */\n        this.onDidEnd = this._onDidEnd.event;\n        /**\n         * A linked sash will be forwarded the same user interactions and events\n         * so it moves exactly the same way as this sash.\n         *\n         * Useful in 2x2 grids. Not meant for widespread usage.\n         */\n        this.linkedSash = undefined;\n        this.el = append(container, $('.monaco-sash'));\n        if (options.orthogonalEdge) {\n            this.el.classList.add(`orthogonal-edge-${options.orthogonalEdge}`);\n        }\n        if (isMacintosh) {\n            this.el.classList.add('mac');\n        }\n        const onMouseDown = this._register(new DomEmitter(this.el, 'mousedown')).event;\n        this._register(onMouseDown(e => this.onPointerStart(e, new MouseEventFactory()), this));\n        const onMouseDoubleClick = this._register(new DomEmitter(this.el, 'dblclick')).event;\n        this._register(onMouseDoubleClick(this.onPointerDoublePress, this));\n        const onMouseEnter = this._register(new DomEmitter(this.el, 'mouseenter')).event;\n        this._register(onMouseEnter(() => Sash.onMouseEnter(this)));\n        const onMouseLeave = this._register(new DomEmitter(this.el, 'mouseleave')).event;\n        this._register(onMouseLeave(() => Sash.onMouseLeave(this)));\n        this._register(Gesture.addTarget(this.el));\n        const onTouchStart = this._register(new DomEmitter(this.el, EventType.Start)).event;\n        this._register(onTouchStart(e => this.onPointerStart(e, new GestureEventFactory(this.el)), this));\n        const onTap = this._register(new DomEmitter(this.el, EventType.Tap)).event;\n        let doubleTapTimeout = undefined;\n        this._register(onTap(event => {\n            if (doubleTapTimeout) {\n                clearTimeout(doubleTapTimeout);\n                doubleTapTimeout = undefined;\n                this.onPointerDoublePress(event);\n                return;\n            }\n            clearTimeout(doubleTapTimeout);\n            doubleTapTimeout = setTimeout(() => doubleTapTimeout = undefined, 250);\n        }, this));\n        if (typeof options.size === 'number') {\n            this.size = options.size;\n            if (options.orientation === 0 /* Orientation.VERTICAL */) {\n                this.el.style.width = `${this.size}px`;\n            }\n            else {\n                this.el.style.height = `${this.size}px`;\n            }\n        }\n        else {\n            this.size = globalSize;\n            this._register(onDidChangeGlobalSize.event(size => {\n                this.size = size;\n                this.layout();\n            }));\n        }\n        this._register(onDidChangeHoverDelay.event(delay => this.hoverDelay = delay));\n        this.layoutProvider = layoutProvider;\n        this.orthogonalStartSash = options.orthogonalStartSash;\n        this.orthogonalEndSash = options.orthogonalEndSash;\n        this.orientation = options.orientation || 0 /* Orientation.VERTICAL */;\n        if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n            this.el.classList.add('horizontal');\n            this.el.classList.remove('vertical');\n        }\n        else {\n            this.el.classList.remove('horizontal');\n            this.el.classList.add('vertical');\n        }\n        this.el.classList.toggle('debug', DEBUG);\n        this.layout();\n    }\n    onPointerStart(event, pointerEventFactory) {\n        EventHelper.stop(event);\n        let isMultisashResize = false;\n        if (!event.__orthogonalSashEvent) {\n            const orthogonalSash = this.getOrthogonalSash(event);\n            if (orthogonalSash) {\n                isMultisashResize = true;\n                event.__orthogonalSashEvent = true;\n                orthogonalSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n            }\n        }\n        if (this.linkedSash && !event.__linkedSashEvent) {\n            event.__linkedSashEvent = true;\n            this.linkedSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n        }\n        if (!this.state) {\n            return;\n        }\n        const iframes = document.getElementsByTagName('iframe');\n        for (const iframe of iframes) {\n            iframe.classList.add(PointerEventsDisabledCssClass); // disable mouse events on iframes as long as we drag the sash\n        }\n        const startX = event.pageX;\n        const startY = event.pageY;\n        const altKey = event.altKey;\n        const startEvent = { startX, currentX: startX, startY, currentY: startY, altKey };\n        this.el.classList.add('active');\n        this._onDidStart.fire(startEvent);\n        // fix https://github.com/microsoft/vscode/issues/21675\n        const style = createStyleSheet(this.el);\n        const updateStyle = () => {\n            let cursor = '';\n            if (isMultisashResize) {\n                cursor = 'all-scroll';\n            }\n            else if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 's-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'n-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'row-resize' : 'ns-resize';\n                }\n            }\n            else {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 'e-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'w-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'col-resize' : 'ew-resize';\n                }\n            }\n            style.textContent = `* { cursor: ${cursor} !important; }`;\n        };\n        const disposables = new DisposableStore();\n        updateStyle();\n        if (!isMultisashResize) {\n            this.onDidEnablementChange.event(updateStyle, null, disposables);\n        }\n        const onPointerMove = (e) => {\n            EventHelper.stop(e, false);\n            const event = { startX, currentX: e.pageX, startY, currentY: e.pageY, altKey };\n            this._onDidChange.fire(event);\n        };\n        const onPointerUp = (e) => {\n            EventHelper.stop(e, false);\n            this.el.removeChild(style);\n            this.el.classList.remove('active');\n            this._onDidEnd.fire();\n            disposables.dispose();\n            for (const iframe of iframes) {\n                iframe.classList.remove(PointerEventsDisabledCssClass);\n            }\n        };\n        pointerEventFactory.onPointerMove(onPointerMove, null, disposables);\n        pointerEventFactory.onPointerUp(onPointerUp, null, disposables);\n        disposables.add(pointerEventFactory);\n    }\n    onPointerDoublePress(e) {\n        const orthogonalSash = this.getOrthogonalSash(e);\n        if (orthogonalSash) {\n            orthogonalSash._onDidReset.fire();\n        }\n        if (this.linkedSash) {\n            this.linkedSash._onDidReset.fire();\n        }\n        this._onDidReset.fire();\n    }\n    static onMouseEnter(sash, fromLinkedSash = false) {\n        if (sash.el.classList.contains('active')) {\n            sash.hoverDelayer.cancel();\n            sash.el.classList.add('hover');\n        }\n        else {\n            sash.hoverDelayer.trigger(() => sash.el.classList.add('hover'), sash.hoverDelay).then(undefined, () => { });\n        }\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseEnter(sash.linkedSash, true);\n        }\n    }\n    static onMouseLeave(sash, fromLinkedSash = false) {\n        sash.hoverDelayer.cancel();\n        sash.el.classList.remove('hover');\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseLeave(sash.linkedSash, true);\n        }\n    }\n    /**\n     * Forcefully stop any user interactions with this sash.\n     * Useful when hiding a parent component, while the user is still\n     * interacting with the sash.\n     */\n    clearSashHoverState() {\n        Sash.onMouseLeave(this);\n    }\n    /**\n     * Layout the sash. The sash will size and position itself\n     * based on its provided {@link ISashLayoutProvider layout provider}.\n     */\n    layout() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            const verticalProvider = this.layoutProvider;\n            this.el.style.left = verticalProvider.getVerticalSashLeft(this) - (this.size / 2) + 'px';\n            if (verticalProvider.getVerticalSashTop) {\n                this.el.style.top = verticalProvider.getVerticalSashTop(this) + 'px';\n            }\n            if (verticalProvider.getVerticalSashHeight) {\n                this.el.style.height = verticalProvider.getVerticalSashHeight(this) + 'px';\n            }\n        }\n        else {\n            const horizontalProvider = this.layoutProvider;\n            this.el.style.top = horizontalProvider.getHorizontalSashTop(this) - (this.size / 2) + 'px';\n            if (horizontalProvider.getHorizontalSashLeft) {\n                this.el.style.left = horizontalProvider.getHorizontalSashLeft(this) + 'px';\n            }\n            if (horizontalProvider.getHorizontalSashWidth) {\n                this.el.style.width = horizontalProvider.getHorizontalSashWidth(this) + 'px';\n            }\n        }\n    }\n    getOrthogonalSash(e) {\n        var _a;\n        const target = (_a = e.initialTarget) !== null && _a !== void 0 ? _a : e.target;\n        if (!target || !(target instanceof HTMLElement)) {\n            return undefined;\n        }\n        if (target.classList.contains('orthogonal-drag-handle')) {\n            return target.classList.contains('start') ? this.orthogonalStartSash : this.orthogonalEndSash;\n        }\n        return undefined;\n    }\n    dispose() {\n        super.dispose();\n        this.el.remove();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { Widget } from '../widget.js';\nimport { IntervalTimer, TimeoutTimer } from '../../../common/async.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport * as dom from '../../dom.js';\n/**\n * The arrow image size.\n */\nexport const ARROW_IMG_SIZE = 11;\nexport class ScrollbarArrow extends Widget {\n    constructor(opts) {\n        super();\n        this._onActivate = opts.onActivate;\n        this.bgDomNode = document.createElement('div');\n        this.bgDomNode.className = 'arrow-background';\n        this.bgDomNode.style.position = 'absolute';\n        this.bgDomNode.style.width = opts.bgWidth + 'px';\n        this.bgDomNode.style.height = opts.bgHeight + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.bgDomNode.style.top = '0px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.bgDomNode.style.left = '0px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.bgDomNode.style.bottom = '0px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.bgDomNode.style.right = '0px';\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.className = opts.className;\n        this.domNode.classList.add(...ThemeIcon.asClassNameArray(opts.icon));\n        this.domNode.style.position = 'absolute';\n        this.domNode.style.width = ARROW_IMG_SIZE + 'px';\n        this.domNode.style.height = ARROW_IMG_SIZE + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.domNode.style.top = opts.top + 'px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.domNode.style.left = opts.left + 'px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.domNode.style.bottom = opts.bottom + 'px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.domNode.style.right = opts.right + 'px';\n        }\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._register(dom.addStandardDisposableListener(this.bgDomNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._register(dom.addStandardDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._pointerdownRepeatTimer = this._register(new IntervalTimer());\n        this._pointerdownScheduleRepeatTimer = this._register(new TimeoutTimer());\n    }\n    _arrowPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const scheduleRepeater = () => {\n            this._pointerdownRepeatTimer.cancelAndSet(() => this._onActivate(), 1000 / 24);\n        };\n        this._onActivate();\n        this._pointerdownRepeatTimer.cancel();\n        this._pointerdownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => { }, () => {\n            this._pointerdownRepeatTimer.cancel();\n            this._pointerdownScheduleRepeatTimer.cancel();\n        });\n        e.preventDefault();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nexport class ScrollbarVisibilityController extends Disposable {\n    constructor(visibility, visibleClassName, invisibleClassName) {\n        super();\n        this._visibility = visibility;\n        this._visibleClassName = visibleClassName;\n        this._invisibleClassName = invisibleClassName;\n        this._domNode = null;\n        this._isVisible = false;\n        this._isNeeded = false;\n        this._rawShouldBeVisible = false;\n        this._shouldBeVisible = false;\n        this._revealTimer = this._register(new TimeoutTimer());\n    }\n    setVisibility(visibility) {\n        if (this._visibility !== visibility) {\n            this._visibility = visibility;\n            this._updateShouldBeVisible();\n        }\n    }\n    // ----------------- Hide / Reveal\n    setShouldBeVisible(rawShouldBeVisible) {\n        this._rawShouldBeVisible = rawShouldBeVisible;\n        this._updateShouldBeVisible();\n    }\n    _applyVisibilitySetting() {\n        if (this._visibility === 2 /* ScrollbarVisibility.Hidden */) {\n            return false;\n        }\n        if (this._visibility === 3 /* ScrollbarVisibility.Visible */) {\n            return true;\n        }\n        return this._rawShouldBeVisible;\n    }\n    _updateShouldBeVisible() {\n        const shouldBeVisible = this._applyVisibilitySetting();\n        if (this._shouldBeVisible !== shouldBeVisible) {\n            this._shouldBeVisible = shouldBeVisible;\n            this.ensureVisibility();\n        }\n    }\n    setIsNeeded(isNeeded) {\n        if (this._isNeeded !== isNeeded) {\n            this._isNeeded = isNeeded;\n            this.ensureVisibility();\n        }\n    }\n    setDomNode(domNode) {\n        this._domNode = domNode;\n        this._domNode.setClassName(this._invisibleClassName);\n        // Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n        this.setShouldBeVisible(false);\n    }\n    ensureVisibility() {\n        if (!this._isNeeded) {\n            // Nothing to be rendered\n            this._hide(false);\n            return;\n        }\n        if (this._shouldBeVisible) {\n            this._reveal();\n        }\n        else {\n            this._hide(true);\n        }\n    }\n    _reveal() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        // The CSS animation doesn't play otherwise\n        this._revealTimer.setIfNotSet(() => {\n            var _a;\n            (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._visibleClassName);\n        }, 0);\n    }\n    _hide(withFadeAway) {\n        var _a;\n        this._revealTimer.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { ScrollbarArrow } from './scrollbarArrow.js';\nimport { ScrollbarVisibilityController } from './scrollbarVisibilityController.js';\nimport { Widget } from '../widget.js';\nimport * as platform from '../../../common/platform.js';\n/**\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\n */\nconst POINTER_DRAG_RESET_DISTANCE = 140;\nexport class AbstractScrollbar extends Widget {\n    constructor(opts) {\n        super();\n        this._lazyRender = opts.lazyRender;\n        this._host = opts.host;\n        this._scrollable = opts.scrollable;\n        this._scrollByPage = opts.scrollByPage;\n        this._scrollbarState = opts.scrollbarState;\n        this._visibilityController = this._register(new ScrollbarVisibilityController(opts.visibility, 'visible scrollbar ' + opts.extraScrollbarClassName, 'invisible scrollbar ' + opts.extraScrollbarClassName));\n        this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._shouldRender = true;\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setAttribute('role', 'presentation');\n        this.domNode.setAttribute('aria-hidden', 'true');\n        this._visibilityController.setDomNode(this.domNode);\n        this.domNode.setPosition('absolute');\n        this._register(dom.addDisposableListener(this.domNode.domNode, dom.EventType.POINTER_DOWN, (e) => this._domNodePointerDown(e)));\n    }\n    // ----------------- creation\n    /**\n     * Creates the dom node for an arrow & adds it to the container\n     */\n    _createArrow(opts) {\n        const arrow = this._register(new ScrollbarArrow(opts));\n        this.domNode.domNode.appendChild(arrow.bgDomNode);\n        this.domNode.domNode.appendChild(arrow.domNode);\n    }\n    /**\n     * Creates the slider dom node, adds it to the container & hooks up the events\n     */\n    _createSlider(top, left, width, height) {\n        this.slider = createFastDomNode(document.createElement('div'));\n        this.slider.setClassName('slider');\n        this.slider.setPosition('absolute');\n        this.slider.setTop(top);\n        this.slider.setLeft(left);\n        if (typeof width === 'number') {\n            this.slider.setWidth(width);\n        }\n        if (typeof height === 'number') {\n            this.slider.setHeight(height);\n        }\n        this.slider.setLayerHinting(true);\n        this.slider.setContain('strict');\n        this.domNode.domNode.appendChild(this.slider.domNode);\n        this._register(dom.addDisposableListener(this.slider.domNode, dom.EventType.POINTER_DOWN, (e) => {\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }));\n        this.onclick(this.slider.domNode, e => {\n            if (e.leftButton) {\n                e.stopPropagation();\n            }\n        });\n    }\n    // ----------------- Update state\n    _onElementSize(visibleSize) {\n        if (this._scrollbarState.setVisibleSize(visibleSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollSize(elementScrollSize) {\n        if (this._scrollbarState.setScrollSize(elementScrollSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollPosition(elementScrollPosition) {\n        if (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    // ----------------- rendering\n    beginReveal() {\n        this._visibilityController.setShouldBeVisible(true);\n    }\n    beginHide() {\n        this._visibilityController.setShouldBeVisible(false);\n    }\n    render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\n        this._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\n    }\n    // ----------------- DOM events\n    _domNodePointerDown(e) {\n        if (e.target !== this.domNode.domNode) {\n            return;\n        }\n        this._onPointerDown(e);\n    }\n    delegatePointerDown(e) {\n        const domTop = this.domNode.domNode.getClientRects()[0].top;\n        const sliderStart = domTop + this._scrollbarState.getSliderPosition();\n        const sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\n        const pointerPos = this._sliderPointerPosition(e);\n        if (sliderStart <= pointerPos && pointerPos <= sliderStop) {\n            // Act as if it was a pointer down on the slider\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }\n        else {\n            // Act as if it was a pointer down on the scrollbar\n            this._onPointerDown(e);\n        }\n    }\n    _onPointerDown(e) {\n        let offsetX;\n        let offsetY;\n        if (e.target === this.domNode.domNode && typeof e.offsetX === 'number' && typeof e.offsetY === 'number') {\n            offsetX = e.offsetX;\n            offsetY = e.offsetY;\n        }\n        else {\n            const domNodePosition = dom.getDomNodePagePosition(this.domNode.domNode);\n            offsetX = e.pageX - domNodePosition.left;\n            offsetY = e.pageY - domNodePosition.top;\n        }\n        const offset = this._pointerDownRelativePosition(offsetX, offsetY);\n        this._setDesiredScrollPositionNow(this._scrollByPage\n            ? this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(offset)\n            : this._scrollbarState.getDesiredScrollPositionFromOffset(offset));\n        if (e.button === 0) {\n            // left button\n            e.preventDefault();\n            this._sliderPointerDown(e);\n        }\n    }\n    _sliderPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const initialPointerPosition = this._sliderPointerPosition(e);\n        const initialPointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(e);\n        const initialScrollbarState = this._scrollbarState.clone();\n        this.slider.toggleClassName('active', true);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => {\n            const pointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(pointerMoveData);\n            const pointerOrthogonalDelta = Math.abs(pointerOrthogonalPosition - initialPointerOrthogonalPosition);\n            if (platform.isWindows && pointerOrthogonalDelta > POINTER_DRAG_RESET_DISTANCE) {\n                // The pointer has wondered away from the scrollbar => reset dragging\n                this._setDesiredScrollPositionNow(initialScrollbarState.getScrollPosition());\n                return;\n            }\n            const pointerPosition = this._sliderPointerPosition(pointerMoveData);\n            const pointerDelta = pointerPosition - initialPointerPosition;\n            this._setDesiredScrollPositionNow(initialScrollbarState.getDesiredScrollPositionFromDelta(pointerDelta));\n        }, () => {\n            this.slider.toggleClassName('active', false);\n            this._host.onDragEnd();\n        });\n        this._host.onDragStart();\n    }\n    _setDesiredScrollPositionNow(_desiredScrollPosition) {\n        const desiredScrollPosition = {};\n        this.writeScrollPosition(desiredScrollPosition, _desiredScrollPosition);\n        this._scrollable.setScrollPositionNow(desiredScrollPosition);\n    }\n    updateScrollbarSize(scrollbarSize) {\n        this._updateScrollbarSize(scrollbarSize);\n        this._scrollbarState.setScrollbarSize(scrollbarSize);\n        this._shouldRender = true;\n        if (!this._lazyRender) {\n            this.render();\n        }\n    }\n    isNeeded() {\n        return this._scrollbarState.isNeeded();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\n */\nconst MINIMUM_SLIDER_SIZE = 20;\nexport class ScrollbarState {\n    constructor(arrowSize, scrollbarSize, oppositeScrollbarSize, visibleSize, scrollSize, scrollPosition) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n        this._arrowSize = Math.round(arrowSize);\n        this._visibleSize = visibleSize;\n        this._scrollSize = scrollSize;\n        this._scrollPosition = scrollPosition;\n        this._computedAvailableSize = 0;\n        this._computedIsNeeded = false;\n        this._computedSliderSize = 0;\n        this._computedSliderRatio = 0;\n        this._computedSliderPosition = 0;\n        this._refreshComputedValues();\n    }\n    clone() {\n        return new ScrollbarState(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n    }\n    setVisibleSize(visibleSize) {\n        const iVisibleSize = Math.round(visibleSize);\n        if (this._visibleSize !== iVisibleSize) {\n            this._visibleSize = iVisibleSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollSize(scrollSize) {\n        const iScrollSize = Math.round(scrollSize);\n        if (this._scrollSize !== iScrollSize) {\n            this._scrollSize = iScrollSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollPosition(scrollPosition) {\n        const iScrollPosition = Math.round(scrollPosition);\n        if (this._scrollPosition !== iScrollPosition) {\n            this._scrollPosition = iScrollPosition;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollbarSize(scrollbarSize) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n    }\n    setOppositeScrollbarSize(oppositeScrollbarSize) {\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n    }\n    static _computeValues(oppositeScrollbarSize, arrowSize, visibleSize, scrollSize, scrollPosition) {\n        const computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\n        const computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\n        const computedIsNeeded = (scrollSize > 0 && scrollSize > visibleSize);\n        if (!computedIsNeeded) {\n            // There is no need for a slider\n            return {\n                computedAvailableSize: Math.round(computedAvailableSize),\n                computedIsNeeded: computedIsNeeded,\n                computedSliderSize: Math.round(computedRepresentableSize),\n                computedSliderRatio: 0,\n                computedSliderPosition: 0,\n            };\n        }\n        // We must artificially increase the size of the slider if needed, since the slider would be too small to grab with the mouse otherwise\n        const computedSliderSize = Math.round(Math.max(MINIMUM_SLIDER_SIZE, Math.floor(visibleSize * computedRepresentableSize / scrollSize)));\n        // The slider can move from 0 to `computedRepresentableSize` - `computedSliderSize`\n        // in the same way `scrollPosition` can move from 0 to `scrollSize` - `visibleSize`.\n        const computedSliderRatio = (computedRepresentableSize - computedSliderSize) / (scrollSize - visibleSize);\n        const computedSliderPosition = (scrollPosition * computedSliderRatio);\n        return {\n            computedAvailableSize: Math.round(computedAvailableSize),\n            computedIsNeeded: computedIsNeeded,\n            computedSliderSize: Math.round(computedSliderSize),\n            computedSliderRatio: computedSliderRatio,\n            computedSliderPosition: Math.round(computedSliderPosition),\n        };\n    }\n    _refreshComputedValues() {\n        const r = ScrollbarState._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n        this._computedAvailableSize = r.computedAvailableSize;\n        this._computedIsNeeded = r.computedIsNeeded;\n        this._computedSliderSize = r.computedSliderSize;\n        this._computedSliderRatio = r.computedSliderRatio;\n        this._computedSliderPosition = r.computedSliderPosition;\n    }\n    getArrowSize() {\n        return this._arrowSize;\n    }\n    getScrollPosition() {\n        return this._scrollPosition;\n    }\n    getRectangleLargeSize() {\n        return this._computedAvailableSize;\n    }\n    getRectangleSmallSize() {\n        return this._scrollbarSize;\n    }\n    isNeeded() {\n        return this._computedIsNeeded;\n    }\n    getSliderSize() {\n        return this._computedSliderSize;\n    }\n    getSliderPosition() {\n        return this._computedSliderPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that `offset` ends up in the center of the slider.\n     * `offset` is based on the same coordinate system as the `sliderPosition`.\n     */\n    getDesiredScrollPositionFromOffset(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = offset - this._arrowSize - this._computedSliderSize / 2;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n    /**\n     * Compute a desired `scrollPosition` from if offset is before or after the slider position.\n     * If offset is before slider, treat as a page up (or left).  If after, page down (or right).\n     * `offset` and `_computedSliderPosition` are based on the same coordinate system.\n     * `_visibleSize` corresponds to a \"page\" of lines in the returned coordinate system.\n     */\n    getDesiredScrollPositionFromOffsetPaged(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const correctedOffset = offset - this._arrowSize; // compensate if has arrows\n        let desiredScrollPosition = this._scrollPosition;\n        if (correctedOffset < this._computedSliderPosition) {\n            desiredScrollPosition -= this._visibleSize; // page up/left\n        }\n        else {\n            desiredScrollPosition += this._visibleSize; // page down/right\n        }\n        return desiredScrollPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that the slider moves by `delta`.\n     */\n    getDesiredScrollPositionFromDelta(delta) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = this._computedSliderPosition + delta;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class HorizontalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.horizontalHasArrows ? options.arrowSize : 0), (options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), scrollDimensions.width, scrollDimensions.scrollWidth, scrollPosition.scrollLeft),\n            visibility: options.horizontal,\n            extraScrollbarClassName: 'horizontal',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.horizontalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.horizontalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonLeft,\n                top: scrollbarDelta,\n                left: arrowDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 1, 0)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonRight,\n                top: scrollbarDelta,\n                left: undefined,\n                bottom: undefined,\n                right: arrowDelta,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, -1, 0)),\n            });\n        }\n        this._createSlider(Math.floor((options.horizontalScrollbarSize - options.horizontalSliderSize) / 2), 0, undefined, options.horizontalSliderSize);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setWidth(sliderSize);\n        this.slider.setLeft(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(largeSize);\n        this.domNode.setHeight(smallSize);\n        this.domNode.setLeft(0);\n        this.domNode.setBottom(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollWidth) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollLeft) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.width) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetX;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageX;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageY;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setHeight(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollLeft = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize);\n        this._scrollbarState.setOppositeScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        this._visibilityController.setVisibility(options.horizontal);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class VerticalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.verticalHasArrows ? options.arrowSize : 0), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), \n            // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n            0, scrollDimensions.height, scrollDimensions.scrollHeight, scrollPosition.scrollTop),\n            visibility: options.vertical,\n            extraScrollbarClassName: 'vertical',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.verticalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.verticalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonUp,\n                top: arrowDelta,\n                left: scrollbarDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, 1)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonDown,\n                top: undefined,\n                left: scrollbarDelta,\n                bottom: arrowDelta,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, -1)),\n            });\n        }\n        this._createSlider(0, Math.floor((options.verticalScrollbarSize - options.verticalSliderSize) / 2), options.verticalSliderSize, undefined);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setHeight(sliderSize);\n        this.slider.setTop(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(smallSize);\n        this.domNode.setHeight(largeSize);\n        this.domNode.setRight(0);\n        this.domNode.setTop(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollHeight) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollTop) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.height) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetY;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageY;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageX;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setWidth(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollTop = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n        this._scrollbarState.setOppositeScrollbarSize(0);\n        this._visibilityController.setVisibility(options.vertical);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getZoomFactor } from '../../browser.js';\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\nimport { VerticalScrollbar } from './verticalScrollbar.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Emitter } from '../../../common/event.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport './media/scrollbars.css';\nconst HIDE_TIMEOUT = 500;\nconst SCROLL_WHEEL_SENSITIVITY = 50;\nconst SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\nclass MouseWheelClassifierItem {\n    constructor(timestamp, deltaX, deltaY) {\n        this.timestamp = timestamp;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.score = 0;\n    }\n}\nexport class MouseWheelClassifier {\n    constructor() {\n        this._capacity = 5;\n        this._memory = [];\n        this._front = -1;\n        this._rear = -1;\n    }\n    isPhysicalMouseWheel() {\n        if (this._front === -1 && this._rear === -1) {\n            // no elements\n            return false;\n        }\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n        let remainingInfluence = 1;\n        let score = 0;\n        let iteration = 1;\n        let index = this._rear;\n        do {\n            const influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\n            remainingInfluence -= influence;\n            score += this._memory[index].score * influence;\n            if (index === this._front) {\n                break;\n            }\n            index = (this._capacity + index - 1) % this._capacity;\n            iteration++;\n        } while (true);\n        return (score <= 0.5);\n    }\n    acceptStandardWheelEvent(e) {\n        const osZoomFactor = window.devicePixelRatio / getZoomFactor();\n        if (platform.isWindows || platform.isLinux) {\n            // On Windows and Linux, the incoming delta events are multiplied with the OS zoom factor.\n            // The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\n            this.accept(Date.now(), e.deltaX / osZoomFactor, e.deltaY / osZoomFactor);\n        }\n        else {\n            this.accept(Date.now(), e.deltaX, e.deltaY);\n        }\n    }\n    accept(timestamp, deltaX, deltaY) {\n        const item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n        item.score = this._computeScore(item);\n        if (this._front === -1 && this._rear === -1) {\n            this._memory[0] = item;\n            this._front = 0;\n            this._rear = 0;\n        }\n        else {\n            this._rear = (this._rear + 1) % this._capacity;\n            if (this._rear === this._front) {\n                // Drop oldest\n                this._front = (this._front + 1) % this._capacity;\n            }\n            this._memory[this._rear] = item;\n        }\n    }\n    /**\n     * A score between 0 and 1 for `item`.\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\n     */\n    _computeScore(item) {\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n            // both axes exercised => definitely not a physical mouse wheel\n            return 1;\n        }\n        let score = 0.5;\n        const prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\n        if (prev) {\n            // const deltaT = item.timestamp - prev.timestamp;\n            // if (deltaT < 1000 / 30) {\n            // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\n            // \tscore += 0.25;\n            // }\n            // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\n            // \t// equal amplitude => indicator that this is a physical mouse wheel\n            // \tscore -= 0.25;\n            // }\n        }\n        if (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\n            // non-integer deltas => indicator that this is not a physical mouse wheel\n            score += 0.25;\n        }\n        return Math.min(Math.max(score, 0), 1);\n    }\n    _isAlmostInt(value) {\n        const delta = Math.abs(Math.round(value) - value);\n        return (delta < 0.01);\n    }\n}\nMouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\nexport class AbstractScrollableElement extends Widget {\n    get options() {\n        return this._options;\n    }\n    constructor(element, options, scrollable) {\n        super();\n        this._onScroll = this._register(new Emitter());\n        this.onScroll = this._onScroll.event;\n        this._onWillScroll = this._register(new Emitter());\n        element.style.overflow = 'hidden';\n        this._options = resolveOptions(options);\n        this._scrollable = scrollable;\n        this._register(this._scrollable.onScroll((e) => {\n            this._onWillScroll.fire(e);\n            this._onDidScroll(e);\n            this._onScroll.fire(e);\n        }));\n        const scrollbarHost = {\n            onMouseWheel: (mouseWheelEvent) => this._onMouseWheel(mouseWheelEvent),\n            onDragStart: () => this._onDragStart(),\n            onDragEnd: () => this._onDragEnd(),\n        };\n        this._verticalScrollbar = this._register(new VerticalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._horizontalScrollbar = this._register(new HorizontalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.style.position = 'relative';\n        this._domNode.style.overflow = 'hidden';\n        this._domNode.appendChild(element);\n        this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode);\n        this._domNode.appendChild(this._verticalScrollbar.domNode.domNode);\n        if (this._options.useShadows) {\n            this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._leftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._leftShadowDomNode.domNode);\n            this._topShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topShadowDomNode.domNode);\n            this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topLeftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topLeftShadowDomNode.domNode);\n        }\n        else {\n            this._leftShadowDomNode = null;\n            this._topShadowDomNode = null;\n            this._topLeftShadowDomNode = null;\n        }\n        this._listenOnDomNode = this._options.listenOnDomNode || this._domNode;\n        this._mouseWheelToDispose = [];\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        this.onmouseover(this._listenOnDomNode, (e) => this._onMouseOver(e));\n        this.onmouseleave(this._listenOnDomNode, (e) => this._onMouseLeave(e));\n        this._hideTimeout = this._register(new TimeoutTimer());\n        this._isDragging = false;\n        this._mouseIsOver = false;\n        this._shouldRender = true;\n        this._revealOnScroll = true;\n    }\n    dispose() {\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        super.dispose();\n    }\n    /**\n     * Get the generated 'scrollable' dom node\n     */\n    getDomNode() {\n        return this._domNode;\n    }\n    getOverviewRulerLayoutInfo() {\n        return {\n            parent: this._domNode,\n            insertBefore: this._verticalScrollbar.domNode.domNode,\n        };\n    }\n    /**\n     * Delegate a pointer down event to the vertical scrollbar.\n     * This is to help with clicking somewhere else and having the scrollbar react.\n     */\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        this._verticalScrollbar.delegatePointerDown(browserEvent);\n    }\n    getScrollDimensions() {\n        return this._scrollable.getScrollDimensions();\n    }\n    setScrollDimensions(dimensions) {\n        this._scrollable.setScrollDimensions(dimensions, false);\n    }\n    /**\n     * Update the class name of the scrollable element.\n     */\n    updateClassName(newClassName) {\n        this._options.className = newClassName;\n        // Defaults are different on Macs\n        if (platform.isMacintosh) {\n            this._options.className += ' mac';\n        }\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n    }\n    /**\n     * Update configuration options for the scrollbar.\n     */\n    updateOptions(newOptions) {\n        if (typeof newOptions.handleMouseWheel !== 'undefined') {\n            this._options.handleMouseWheel = newOptions.handleMouseWheel;\n            this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        }\n        if (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\n            this._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\n        }\n        if (typeof newOptions.fastScrollSensitivity !== 'undefined') {\n            this._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\n        }\n        if (typeof newOptions.scrollPredominantAxis !== 'undefined') {\n            this._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\n        }\n        if (typeof newOptions.horizontal !== 'undefined') {\n            this._options.horizontal = newOptions.horizontal;\n        }\n        if (typeof newOptions.vertical !== 'undefined') {\n            this._options.vertical = newOptions.vertical;\n        }\n        if (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\n            this._options.horizontalScrollbarSize = newOptions.horizontalScrollbarSize;\n        }\n        if (typeof newOptions.verticalScrollbarSize !== 'undefined') {\n            this._options.verticalScrollbarSize = newOptions.verticalScrollbarSize;\n        }\n        if (typeof newOptions.scrollByPage !== 'undefined') {\n            this._options.scrollByPage = newOptions.scrollByPage;\n        }\n        this._horizontalScrollbar.updateOptions(this._options);\n        this._verticalScrollbar.updateOptions(this._options);\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        this._onMouseWheel(new StandardWheelEvent(browserEvent));\n    }\n    // -------------------- mouse wheel scrolling --------------------\n    _setListeningToMouseWheel(shouldListen) {\n        const isListening = (this._mouseWheelToDispose.length > 0);\n        if (isListening === shouldListen) {\n            // No change\n            return;\n        }\n        // Stop listening (if necessary)\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        // Start listening (if necessary)\n        if (shouldListen) {\n            const onMouseWheel = (browserEvent) => {\n                this._onMouseWheel(new StandardWheelEvent(browserEvent));\n            };\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { passive: false }));\n        }\n    }\n    _onMouseWheel(e) {\n        const classifier = MouseWheelClassifier.INSTANCE;\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n            classifier.acceptStandardWheelEvent(e);\n        }\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n        let didScroll = false;\n        if (e.deltaY || e.deltaX) {\n            let deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n            let deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n            if (this._options.scrollPredominantAxis) {\n                if (Math.abs(deltaY) >= Math.abs(deltaX)) {\n                    deltaX = 0;\n                }\n                else {\n                    deltaY = 0;\n                }\n            }\n            if (this._options.flipAxes) {\n                [deltaY, deltaX] = [deltaX, deltaY];\n            }\n            // Convert vertical scrolling to horizontal if shift is held, this\n            // is handled at a higher level on Mac\n            const shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n                deltaX = deltaY;\n                deltaY = 0;\n            }\n            if (e.browserEvent && e.browserEvent.altKey) {\n                // fastScrolling\n                deltaX = deltaX * this._options.fastScrollSensitivity;\n                deltaY = deltaY * this._options.fastScrollSensitivity;\n            }\n            const futureScrollPosition = this._scrollable.getFutureScrollPosition();\n            let desiredScrollPosition = {};\n            if (deltaY) {\n                const deltaScrollTop = SCROLL_WHEEL_SENSITIVITY * deltaY;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollTop = futureScrollPosition.scrollTop - (deltaScrollTop < 0 ? Math.floor(deltaScrollTop) : Math.ceil(deltaScrollTop));\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n            }\n            if (deltaX) {\n                const deltaScrollLeft = SCROLL_WHEEL_SENSITIVITY * deltaX;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollLeft = futureScrollPosition.scrollLeft - (deltaScrollLeft < 0 ? Math.floor(deltaScrollLeft) : Math.ceil(deltaScrollLeft));\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n            }\n            // Check that we are scrolling towards a location which is valid\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n                const canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\n                    && this._options.mouseWheelSmoothScroll\n                    && classifier.isPhysicalMouseWheel());\n                if (canPerformSmoothScroll) {\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n                }\n                else {\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\n                }\n                didScroll = true;\n            }\n        }\n        let consumeMouseWheel = didScroll;\n        if (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\n            consumeMouseWheel = true;\n        }\n        if (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\n            consumeMouseWheel = true;\n        }\n        if (consumeMouseWheel) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n    _onDidScroll(e) {\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n        if (this._options.useShadows) {\n            this._shouldRender = true;\n        }\n        if (this._revealOnScroll) {\n            this._reveal();\n        }\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    /**\n     * Render / mutate the DOM now.\n     * Should be used together with the ctor option `lazyRender`.\n     */\n    renderNow() {\n        if (!this._options.lazyRender) {\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\n        }\n        this._render();\n    }\n    _render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._horizontalScrollbar.render();\n        this._verticalScrollbar.render();\n        if (this._options.useShadows) {\n            const scrollState = this._scrollable.getCurrentScrollPosition();\n            const enableTop = scrollState.scrollTop > 0;\n            const enableLeft = scrollState.scrollLeft > 0;\n            const leftClassName = (enableLeft ? ' left' : '');\n            const topClassName = (enableTop ? ' top' : '');\n            const topLeftClassName = (enableLeft || enableTop ? ' top-left-corner' : '');\n            this._leftShadowDomNode.setClassName(`shadow${leftClassName}`);\n            this._topShadowDomNode.setClassName(`shadow${topClassName}`);\n            this._topLeftShadowDomNode.setClassName(`shadow${topLeftClassName}${topClassName}${leftClassName}`);\n        }\n    }\n    // -------------------- fade in / fade out --------------------\n    _onDragStart() {\n        this._isDragging = true;\n        this._reveal();\n    }\n    _onDragEnd() {\n        this._isDragging = false;\n        this._hide();\n    }\n    _onMouseLeave(e) {\n        this._mouseIsOver = false;\n        this._hide();\n    }\n    _onMouseOver(e) {\n        this._mouseIsOver = true;\n        this._reveal();\n    }\n    _reveal() {\n        this._verticalScrollbar.beginReveal();\n        this._horizontalScrollbar.beginReveal();\n        this._scheduleHide();\n    }\n    _hide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._verticalScrollbar.beginHide();\n            this._horizontalScrollbar.beginHide();\n        }\n    }\n    _scheduleHide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._hideTimeout.cancelAndSet(() => this._hide(), HIDE_TIMEOUT);\n        }\n    }\n}\nexport class ScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n}\nexport class SmoothScrollableElement extends AbstractScrollableElement {\n    constructor(element, options, scrollable) {\n        super(element, options, scrollable);\n    }\n    setScrollPosition(update) {\n        if (update.reuseAnimation) {\n            this._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\n        }\n        else {\n            this._scrollable.setScrollPositionNow(update);\n        }\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n}\nexport class DomScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: false,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n        this._element = element;\n        this.onScroll((e) => {\n            if (e.scrollTopChanged) {\n                this._element.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this._element.scrollLeft = e.scrollLeft;\n            }\n        });\n        this.scanDomNode();\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n    scanDomNode() {\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n        this.setScrollDimensions({\n            width: this._element.clientWidth,\n            scrollWidth: this._element.scrollWidth,\n            height: this._element.clientHeight,\n            scrollHeight: this._element.scrollHeight\n        });\n        this.setScrollPosition({\n            scrollLeft: this._element.scrollLeft,\n            scrollTop: this._element.scrollTop,\n        });\n    }\n}\nfunction resolveOptions(opts) {\n    const result = {\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\n        consumeMouseWheelIfScrollbarIsNeeded: (typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false),\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\n        scrollPredominantAxis: (typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true),\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* ScrollbarVisibility.Auto */),\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* ScrollbarVisibility.Auto */),\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0),\n        scrollByPage: (typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false)\n    };\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\n    // Defaults are different on Macs\n    if (platform.isMacintosh) {\n        result.className += ' mac';\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown } from '../../markdownRenderer.js';\nimport { List } from '../list/listWidget.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { KeyCodeUtils } from '../../../common/keyCodes.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBoxCustom.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nconst SELECT_OPTION_ENTRY_TEMPLATE_ID = 'selectOption.entry.template';\nclass SelectListRenderer {\n    get templateId() { return SELECT_OPTION_ENTRY_TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.root = container;\n        data.text = dom.append(container, $('.option-text'));\n        data.detail = dom.append(container, $('.option-detail'));\n        data.decoratorRight = dom.append(container, $('.option-decorator-right'));\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.text;\n        const detail = element.detail;\n        const decoratorRight = element.decoratorRight;\n        const isDisabled = element.isDisabled;\n        data.text.textContent = text;\n        data.detail.textContent = !!detail ? detail : '';\n        data.decoratorRight.innerText = !!decoratorRight ? decoratorRight : '';\n        // pseudo-select disabled option\n        if (isDisabled) {\n            data.root.classList.add('option-disabled');\n        }\n        else {\n            // Make sure we do class removal from prior template rendering\n            data.root.classList.remove('option-disabled');\n        }\n    }\n    disposeTemplate(_templateData) {\n        // noop\n    }\n}\nexport class SelectBoxList extends Disposable {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        this.options = [];\n        this._currentSelection = 0;\n        this._hasDetails = false;\n        this._skipLayout = false;\n        this._sticky = false; // for dev purposes only\n        this._isVisible = false;\n        this.styles = styles;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        if (typeof this.selectBoxOptions.minBottomMargin !== 'number') {\n            this.selectBoxOptions.minBottomMargin = SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN;\n        }\n        else if (this.selectBoxOptions.minBottomMargin < 0) {\n            this.selectBoxOptions.minBottomMargin = 0;\n        }\n        this.selectElement = document.createElement('select');\n        // Use custom CSS vars for padding calculation\n        this.selectElement.className = 'monaco-select-box monaco-select-box-dropdown-padding';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = new Emitter();\n        this._register(this._onDidSelect);\n        this.registerListeners();\n        this.constructSelectDropDown(contextViewProvider);\n        this.selected = selected || 0;\n        if (options) {\n            this.setOptions(options, selected);\n        }\n        this.initStyleSheet();\n    }\n    // IDelegate - List renderer\n    getHeight() {\n        return 22;\n    }\n    getTemplateId() {\n        return SELECT_OPTION_ENTRY_TEMPLATE_ID;\n    }\n    constructSelectDropDown(contextViewProvider) {\n        // SetUp ContextView container to hold select Dropdown\n        this.contextViewProvider = contextViewProvider;\n        this.selectDropDownContainer = dom.$('.monaco-select-box-dropdown-container');\n        // Use custom CSS vars for padding calculation (shared with parent select)\n        this.selectDropDownContainer.classList.add('monaco-select-box-dropdown-padding');\n        // Setup container for select option details\n        this.selectionDetailsPane = dom.append(this.selectDropDownContainer, $('.select-box-details-pane'));\n        // Create span flex box item/div we can measure and control\n        const widthControlOuterDiv = dom.append(this.selectDropDownContainer, $('.select-box-dropdown-container-width-control'));\n        const widthControlInnerDiv = dom.append(widthControlOuterDiv, $('.width-control-div'));\n        this.widthControlElement = document.createElement('span');\n        this.widthControlElement.className = 'option-text-width-control';\n        dom.append(widthControlInnerDiv, this.widthControlElement);\n        // Always default to below position\n        this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n        // Inline stylesheet for themes\n        this.styleElement = dom.createStyleSheet(this.selectDropDownContainer);\n        // Prevent dragging of dropdown #114329\n        this.selectDropDownContainer.setAttribute('draggable', 'true');\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.DRAG_START, (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n    }\n    registerListeners() {\n        // Parent native select keyboard listeners\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selected = e.target.selectedIndex;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }));\n        // Have to implement both keyboard and mouse controllers to handle disabled options\n        // Intercept mouse events to override normal select actions on parents\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.CLICK, (e) => {\n            dom.EventHelper.stop(e);\n            if (this._isVisible) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.MOUSE_DOWN, (e) => {\n            dom.EventHelper.stop(e);\n        }));\n        // Intercept touch events\n        // The following implementation is slightly different from the mouse event handlers above.\n        // Use the following helper variable, otherwise the list flickers.\n        let listIsVisibleOnTouchStart;\n        this._register(dom.addDisposableListener(this.selectElement, 'touchstart', (e) => {\n            listIsVisibleOnTouchStart = this._isVisible;\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, 'touchend', (e) => {\n            dom.EventHelper.stop(e);\n            if (listIsVisibleOnTouchStart) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        // Intercept keyboard handling\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            let showDropDown = false;\n            // Create and drop down select list on keyboard select\n            if (isMacintosh) {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ || event.keyCode === 16 /* KeyCode.UpArrow */ || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            else {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ && event.altKey || event.keyCode === 16 /* KeyCode.UpArrow */ && event.altKey || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            if (showDropDown) {\n                this.showSelectDropDown();\n                dom.EventHelper.stop(e, true);\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this._hasDetails = false;\n            this._cachedMaxDetailsHeight = undefined;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n                if (typeof option.description === 'string') {\n                    this._hasDetails = true;\n                }\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n            // Set current = selected since this is not necessarily a user exit\n            this._currentSelection = this.selected;\n        }\n    }\n    setOptionsList() {\n        var _a;\n        // Mirror options in drop-down\n        // Populate select list for non-native select mode\n        (_a = this.selectList) === null || _a === void 0 ? void 0 : _a.splice(0, this.selectList.length, this.options);\n    }\n    select(index) {\n        if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        this.container = container;\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.styleSelectElement();\n    }\n    initStyleSheet() {\n        const content = [];\n        // Style non-native select mode\n        if (this.styles.listFocusBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`);\n        }\n        if (this.styles.listFocusForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`);\n        }\n        if (this.styles.decoratorRightForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`);\n        }\n        if (this.styles.selectBackground && this.styles.selectBorder && this.styles.selectBorder !== this.styles.selectBackground) {\n            content.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `);\n        }\n        else if (this.styles.selectListBorder) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `);\n        }\n        // Hover foreground - ignore for disabled options\n        if (this.styles.listHoverForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`);\n        }\n        // Hover background - ignore for disabled options\n        if (this.styles.listHoverBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`);\n        }\n        // Match quick input outline styles - ignore for disabled options\n        if (this.styles.listFocusOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        if (this.styles.listHoverOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        // Clear list styles on focus and on hover for disabled options\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        this.styleElement.textContent = content.join('\\n');\n    }\n    styleSelectElement() {\n        var _a, _b, _c;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const foreground = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n        const border = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        this.selectElement.style.backgroundColor = background;\n        this.selectElement.style.color = foreground;\n        this.selectElement.style.borderColor = border;\n    }\n    styleList() {\n        var _a, _b;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const listBackground = dom.asCssValueWithDefault(this.styles.selectListBackground, background);\n        this.selectDropDownListContainer.style.backgroundColor = listBackground;\n        this.selectionDetailsPane.style.backgroundColor = listBackground;\n        const optionsBorder = (_b = this.styles.focusBorder) !== null && _b !== void 0 ? _b : '';\n        this.selectDropDownContainer.style.outlineColor = optionsBorder;\n        this.selectDropDownContainer.style.outlineOffset = '-1px';\n        this.selectList.style(this.styles);\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n    // ContextView dropdown methods\n    showSelectDropDown() {\n        this.selectionDetailsPane.innerText = '';\n        if (!this.contextViewProvider || this._isVisible) {\n            return;\n        }\n        // Lazily create and populate list only at open, moved from constructor\n        this.createSelectList(this.selectDropDownContainer);\n        this.setOptionsList();\n        // This allows us to flip the position based on measurement\n        // Set drop-down position above/below from required height and margins\n        // If pre-layout cannot fit at least one option do not show drop-down\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container, true),\n            layout: () => {\n                this.layoutSelectDropDown();\n            },\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Hide so we can relay out\n        this._isVisible = true;\n        this.hideSelectDropDown(false);\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container),\n            layout: () => this.layoutSelectDropDown(),\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Track initial selection the case user escape, blur\n        this._currentSelection = this.selected;\n        this._isVisible = true;\n        this.selectElement.setAttribute('aria-expanded', 'true');\n    }\n    hideSelectDropDown(focusSelect) {\n        if (!this.contextViewProvider || !this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this.selectElement.setAttribute('aria-expanded', 'false');\n        if (focusSelect) {\n            this.selectElement.focus();\n        }\n        this.contextViewProvider.hideContextView();\n    }\n    renderSelectDropDown(container, preLayoutPosition) {\n        container.appendChild(this.selectDropDownContainer);\n        // Pre-Layout allows us to change position\n        this.layoutSelectDropDown(preLayoutPosition);\n        return {\n            dispose: () => {\n                // contextView will dispose itself if moving from one View to another\n                try {\n                    container.removeChild(this.selectDropDownContainer); // remove to take out the CSS rules we add\n                }\n                catch (error) {\n                    // Ignore, removed already by change of focus\n                }\n            }\n        };\n    }\n    // Iterate over detailed descriptions, find max height\n    measureMaxDetailsHeight() {\n        let maxDetailsPaneHeight = 0;\n        this.options.forEach((_option, index) => {\n            this.updateDetail(index);\n            if (this.selectionDetailsPane.offsetHeight > maxDetailsPaneHeight) {\n                maxDetailsPaneHeight = this.selectionDetailsPane.offsetHeight;\n            }\n        });\n        return maxDetailsPaneHeight;\n    }\n    layoutSelectDropDown(preLayoutPosition) {\n        // Avoid recursion from layout called in onListFocus\n        if (this._skipLayout) {\n            return false;\n        }\n        // Layout ContextView drop down select list and container\n        // Have to manage our vertical overflow, sizing, position below or above\n        // Position has to be determined and set prior to contextView instantiation\n        if (this.selectList) {\n            // Make visible to enable measurements\n            this.selectDropDownContainer.classList.add('visible');\n            const selectPosition = dom.getDomNodePagePosition(this.selectElement);\n            const styles = getComputedStyle(this.selectElement);\n            const verticalPadding = parseFloat(styles.getPropertyValue('--dropdown-padding-top')) + parseFloat(styles.getPropertyValue('--dropdown-padding-bottom'));\n            const maxSelectDropDownHeightBelow = (window.innerHeight - selectPosition.top - selectPosition.height - (this.selectBoxOptions.minBottomMargin || 0));\n            const maxSelectDropDownHeightAbove = (selectPosition.top - SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN);\n            // Determine optimal width - min(longest option), opt(parent select, excluding margins), max(ContextView controlled)\n            const selectWidth = this.selectElement.offsetWidth;\n            const selectMinWidth = this.setWidthControlElement(this.widthControlElement);\n            const selectOptimalWidth = Math.max(selectMinWidth, Math.round(selectWidth)).toString() + 'px';\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Get initial list height and determine space above and below\n            this.selectList.getHTMLElement().style.height = '';\n            this.selectList.layout();\n            let listHeight = this.selectList.contentHeight;\n            if (this._hasDetails && this._cachedMaxDetailsHeight === undefined) {\n                this._cachedMaxDetailsHeight = this.measureMaxDetailsHeight();\n            }\n            const maxDetailsPaneHeight = this._hasDetails ? this._cachedMaxDetailsHeight : 0;\n            const minRequiredDropDownHeight = listHeight + verticalPadding + maxDetailsPaneHeight;\n            const maxVisibleOptionsBelow = ((Math.floor((maxSelectDropDownHeightBelow - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            const maxVisibleOptionsAbove = ((Math.floor((maxSelectDropDownHeightAbove - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            // If we are only doing pre-layout check/adjust position only\n            // Calculate vertical space available, flip up if insufficient\n            // Use reflected padding on parent select, ContextView style\n            // properties not available before DOM attachment\n            if (preLayoutPosition) {\n                // Check if select moved out of viewport , do not open\n                // If at least one option cannot be shown, don't open the drop-down or hide/remove if open\n                if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                    || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                    || ((maxVisibleOptionsBelow < 1) && (maxVisibleOptionsAbove < 1))) {\n                    // Indicate we cannot open\n                    return false;\n                }\n                // Determine if we have to flip up\n                // Always show complete list items - never more than Max available vertical height\n                if (maxVisibleOptionsBelow < SelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS\n                    && maxVisibleOptionsAbove > maxVisibleOptionsBelow\n                    && this.options.length > maxVisibleOptionsBelow) {\n                    this._dropDownPosition = 1 /* AnchorPosition.ABOVE */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectionDetailsPane.classList.remove('border-top');\n                    this.selectionDetailsPane.classList.add('border-bottom');\n                }\n                else {\n                    this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectionDetailsPane.classList.remove('border-bottom');\n                    this.selectionDetailsPane.classList.add('border-top');\n                }\n                // Do full layout on showSelectDropDown only\n                return true;\n            }\n            // Check if select out of viewport or cutting into status bar\n            if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                || (this._dropDownPosition === 0 /* AnchorPosition.BELOW */ && maxVisibleOptionsBelow < 1)\n                || (this._dropDownPosition === 1 /* AnchorPosition.ABOVE */ && maxVisibleOptionsAbove < 1)) {\n                // Cannot properly layout, close and hide\n                this.hideSelectDropDown(true);\n                return false;\n            }\n            // SetUp list dimensions and layout - account for container padding\n            // Use position to check above or below available space\n            if (this._dropDownPosition === 0 /* AnchorPosition.BELOW */) {\n                if (this._isVisible && maxVisibleOptionsBelow + maxVisibleOptionsAbove < 1) {\n                    // If drop-down is visible, must be doing a DOM re-layout, hide since we don't fit\n                    // Hide drop-down, hide contextview, focus on parent select\n                    this.hideSelectDropDown(true);\n                    return false;\n                }\n                // Adjust list height to max from select bottom to margin (default/minBottomMargin)\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightBelow) {\n                    listHeight = (maxVisibleOptionsBelow * this.getHeight());\n                }\n            }\n            else {\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightAbove) {\n                    listHeight = (maxVisibleOptionsAbove * this.getHeight());\n                }\n            }\n            // Set adjusted list height and relayout\n            this.selectList.layout(listHeight);\n            this.selectList.domFocus();\n            // Finally set focus on selected item\n            if (this.selectList.length > 0) {\n                this.selectList.setFocus([this.selected || 0]);\n                this.selectList.reveal(this.selectList.getFocus()[0] || 0);\n            }\n            if (this._hasDetails) {\n                // Leave the selectDropDownContainer to size itself according to children (list + details) - #57447\n                this.selectList.getHTMLElement().style.height = (listHeight + verticalPadding) + 'px';\n                this.selectDropDownContainer.style.height = '';\n            }\n            else {\n                this.selectDropDownContainer.style.height = (listHeight + verticalPadding) + 'px';\n            }\n            this.updateDetail(this.selected);\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Maintain focus outline on parent select as well as list container - tabindex for focus\n            this.selectDropDownListContainer.setAttribute('tabindex', '0');\n            this.selectElement.classList.add('synthetic-focus');\n            this.selectDropDownContainer.classList.add('synthetic-focus');\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    setWidthControlElement(container) {\n        let elementWidth = 0;\n        if (container) {\n            let longest = 0;\n            let longestLength = 0;\n            this.options.forEach((option, index) => {\n                const detailLength = !!option.detail ? option.detail.length : 0;\n                const rightDecoratorLength = !!option.decoratorRight ? option.decoratorRight.length : 0;\n                const len = option.text.length + detailLength + rightDecoratorLength;\n                if (len > longestLength) {\n                    longest = index;\n                    longestLength = len;\n                }\n            });\n            container.textContent = this.options[longest].text + (!!this.options[longest].decoratorRight ? (this.options[longest].decoratorRight + ' ') : '');\n            elementWidth = dom.getTotalWidth(container);\n        }\n        return elementWidth;\n    }\n    createSelectList(parent) {\n        // If we have already constructive list on open, skip\n        if (this.selectList) {\n            return;\n        }\n        // SetUp container for list\n        this.selectDropDownListContainer = dom.append(parent, $('.select-box-dropdown-list-container'));\n        this.listRenderer = new SelectListRenderer();\n        this.selectList = new List('SelectBoxCustom', this.selectDropDownListContainer, this, [this.listRenderer], {\n            useShadows: false,\n            verticalScrollMode: 3 /* ScrollbarVisibility.Visible */,\n            keyboardSupport: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getAriaLabel: element => {\n                    let label = element.text;\n                    if (element.detail) {\n                        label += `. ${element.detail}`;\n                    }\n                    if (element.decoratorRight) {\n                        label += `. ${element.decoratorRight}`;\n                    }\n                    if (element.description) {\n                        label += `. ${element.description}`;\n                    }\n                    return label;\n                },\n                getWidgetAriaLabel: () => localize({ key: 'selectBox', comment: ['Behave like native select dropdown element.'] }, \"Select Box\"),\n                getRole: () => isMacintosh ? '' : 'option',\n                getWidgetRole: () => 'listbox'\n            }\n        });\n        if (this.selectBoxOptions.ariaLabel) {\n            this.selectList.ariaLabel = this.selectBoxOptions.ariaLabel;\n        }\n        // SetUp list keyboard controller - control navigation, disabled items, focus\n        const onKeyDown = this._register(new DomEmitter(this.selectDropDownListContainer, 'keydown'));\n        const onSelectDropDownKeyDown = Event.chain(onKeyDown.event)\n            .filter(() => this.selectList.length > 0)\n            .map(e => new StandardKeyboardEvent(e));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 3 /* KeyCode.Enter */).on(e => this.onEnter(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 2 /* KeyCode.Tab */).on(e => this.onEnter(e), this)); // Tab should behave the same as enter, #79339\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 9 /* KeyCode.Escape */).on(e => this.onEscape(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */).on(e => this.onUpArrow(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */).on(e => this.onDownArrow(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 12 /* KeyCode.PageDown */).on(this.onPageDown, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 11 /* KeyCode.PageUp */).on(this.onPageUp, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 14 /* KeyCode.Home */).on(this.onHome, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 13 /* KeyCode.End */).on(this.onEnd, this));\n        this._register(onSelectDropDownKeyDown.filter(e => (e.keyCode >= 21 /* KeyCode.Digit0 */ && e.keyCode <= 56 /* KeyCode.KeyZ */) || (e.keyCode >= 85 /* KeyCode.Semicolon */ && e.keyCode <= 113 /* KeyCode.NumpadDivide */)).on(this.onCharacter, this));\n        // SetUp list mouse controller - control navigation, disabled items, focus\n        this._register(dom.addDisposableListener(this.selectList.getHTMLElement(), dom.EventType.POINTER_UP, e => this.onPointerUp(e)));\n        this._register(this.selectList.onMouseOver(e => typeof e.index !== 'undefined' && this.selectList.setFocus([e.index])));\n        this._register(this.selectList.onDidChangeFocus(e => this.onListFocus(e)));\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.FOCUS_OUT, e => {\n            if (!this._isVisible || dom.isAncestor(e.relatedTarget, this.selectDropDownContainer)) {\n                return;\n            }\n            this.onListBlur();\n        }));\n        this.selectList.getHTMLElement().setAttribute('aria-label', this.selectBoxOptions.ariaLabel || '');\n        this.selectList.getHTMLElement().setAttribute('aria-expanded', 'true');\n        this.styleList();\n    }\n    // List methods\n    // List mouse controller - active exit, select option, fire onDidSelect if change, return focus to parent select\n    // Also takes in touchend events\n    onPointerUp(e) {\n        if (!this.selectList.length) {\n            return;\n        }\n        dom.EventHelper.stop(e);\n        const target = e.target;\n        if (!target) {\n            return;\n        }\n        // Check our mouse event is on an option (not scrollbar)\n        if (target.classList.contains('slider')) {\n            return;\n        }\n        const listRowElement = target.closest('.monaco-list-row');\n        if (!listRowElement) {\n            return;\n        }\n        const index = Number(listRowElement.getAttribute('data-index'));\n        const disabled = listRowElement.classList.contains('option-disabled');\n        // Ignore mouse selection of disabled options\n        if (index >= 0 && index < this.options.length && !disabled) {\n            this.selected = index;\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n            // Only fire if selection change\n            if (this.selected !== this._currentSelection) {\n                // Set current = selected\n                this._currentSelection = this.selected;\n                this._onDidSelect.fire({\n                    index: this.selectElement.selectedIndex,\n                    selected: this.options[this.selected].text\n                });\n                if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                    this.selectElement.title = this.options[this.selected].text;\n                }\n            }\n            this.hideSelectDropDown(true);\n        }\n    }\n    // List Exit - passive - implicit no selection change, hide drop-down\n    onListBlur() {\n        if (this._sticky) {\n            return;\n        }\n        if (this.selected !== this._currentSelection) {\n            // Reset selected to current if no change\n            this.select(this._currentSelection);\n        }\n        this.hideSelectDropDown(false);\n    }\n    renderDescriptionMarkdown(text, actionHandler) {\n        const cleanRenderedMarkdown = (element) => {\n            for (let i = 0; i < element.childNodes.length; i++) {\n                const child = element.childNodes.item(i);\n                const tagName = child.tagName && child.tagName.toLowerCase();\n                if (tagName === 'img') {\n                    element.removeChild(child);\n                }\n                else {\n                    cleanRenderedMarkdown(child);\n                }\n            }\n        };\n        const rendered = renderMarkdown({ value: text, supportThemeIcons: true }, { actionHandler });\n        rendered.element.classList.add('select-box-description-markdown');\n        cleanRenderedMarkdown(rendered.element);\n        return rendered.element;\n    }\n    // List Focus Change - passive - update details pane with newly focused element's data\n    onListFocus(e) {\n        // Skip during initial layout\n        if (!this._isVisible || !this._hasDetails) {\n            return;\n        }\n        this.updateDetail(e.indexes[0]);\n    }\n    updateDetail(selectedIndex) {\n        var _a, _b;\n        this.selectionDetailsPane.innerText = '';\n        const option = this.options[selectedIndex];\n        const description = (_a = option === null || option === void 0 ? void 0 : option.description) !== null && _a !== void 0 ? _a : '';\n        const descriptionIsMarkdown = (_b = option === null || option === void 0 ? void 0 : option.descriptionIsMarkdown) !== null && _b !== void 0 ? _b : false;\n        if (description) {\n            if (descriptionIsMarkdown) {\n                const actionHandler = option.descriptionMarkdownActionHandler;\n                this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(description, actionHandler));\n            }\n            else {\n                this.selectionDetailsPane.innerText = description;\n            }\n            this.selectionDetailsPane.style.display = 'block';\n        }\n        else {\n            this.selectionDetailsPane.style.display = 'none';\n        }\n        // Avoid recursion\n        this._skipLayout = true;\n        this.contextViewProvider.layout();\n        this._skipLayout = false;\n    }\n    // List keyboard controller\n    // List exit - active - hide ContextView dropdown, reset selection, return focus to parent select\n    onEscape(e) {\n        dom.EventHelper.stop(e);\n        // Reset selection to value when opened\n        this.select(this._currentSelection);\n        this.hideSelectDropDown(true);\n    }\n    // List exit - active - hide ContextView dropdown, return focus to parent select, fire onDidSelect if change\n    onEnter(e) {\n        dom.EventHelper.stop(e);\n        // Only fire if selection change\n        if (this.selected !== this._currentSelection) {\n            this._currentSelection = this.selected;\n            this._onDidSelect.fire({\n                index: this.selectElement.selectedIndex,\n                selected: this.options[this.selected].text\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }\n        this.hideSelectDropDown(true);\n    }\n    // List navigation - have to handle a disabled option (jump over)\n    onDownArrow(e) {\n        if (this.selected < this.options.length - 1) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const nextOptionDisabled = this.options[this.selected + 1].isDisabled;\n            if (nextOptionDisabled && this.options.length > this.selected + 2) {\n                this.selected += 2;\n            }\n            else if (nextOptionDisabled) {\n                return;\n            }\n            else {\n                this.selected++;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onUpArrow(e) {\n        if (this.selected > 0) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const previousOptionDisabled = this.options[this.selected - 1].isDisabled;\n            if (previousOptionDisabled && this.selected > 1) {\n                this.selected -= 2;\n            }\n            else {\n                this.selected--;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onPageUp(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusPreviousPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection down if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected < this.options.length - 1) {\n                this.selected++;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onPageDown(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusNextPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection up if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected > 0) {\n                this.selected--;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onHome(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = 0;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected++;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    onEnd(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = this.options.length - 1;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected--;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    // Mimic option first character navigation of native select\n    onCharacter(e) {\n        const ch = KeyCodeUtils.toString(e.keyCode);\n        let optionIndex = -1;\n        for (let i = 0; i < this.options.length - 1; i++) {\n            optionIndex = (i + this.selected + 1) % this.options.length;\n            if (this.options[optionIndex].text.charAt(0).toUpperCase() === ch && !this.options[optionIndex].isDisabled) {\n                this.select(optionIndex);\n                this.selectList.setFocus([optionIndex]);\n                this.selectList.reveal(this.selectList.getFocus()[0]);\n                dom.EventHelper.stop(e);\n                break;\n            }\n        }\n    }\n    dispose() {\n        this.hideSelectDropDown(false);\n        super.dispose();\n    }\n}\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN = 32;\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN = 2;\nSelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS = 3;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nexport class SelectBoxNative extends Disposable {\n    constructor(options, selected, styles, selectBoxOptions) {\n        super();\n        this.selected = 0;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        this.options = [];\n        this.selectElement = document.createElement('select');\n        this.selectElement.className = 'monaco-select-box';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = this._register(new Emitter());\n        this.styles = styles;\n        this.registerListeners();\n        this.setOptions(options, selected);\n    }\n    registerListeners() {\n        this._register(Gesture.addTarget(this.selectElement));\n        [EventType.Tap].forEach(eventType => {\n            this._register(dom.addDisposableListener(this.selectElement, eventType, (e) => {\n                this.selectElement.focus();\n            }));\n        });\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'click', (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selectElement.title = e.target.value;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'keydown', (e) => {\n            let showSelect = false;\n            if (isMacintosh) {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ || e.keyCode === 16 /* KeyCode.UpArrow */ || e.keyCode === 10 /* KeyCode.Space */) {\n                    showSelect = true;\n                }\n            }\n            else {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ && e.altKey || e.keyCode === 10 /* KeyCode.Space */ || e.keyCode === 3 /* KeyCode.Enter */) {\n                    showSelect = true;\n                }\n            }\n            if (showSelect) {\n                // Space, Enter, is used to expand select box, do not propagate it (prevent action bar action run)\n                e.stopPropagation();\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!this.options || !arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n        }\n    }\n    select(index) {\n        if (this.options.length === 0) {\n            this.selected = 0;\n        }\n        else if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if ((this.selected < this.options.length) && typeof this.options[this.selected].text === 'string') {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n        else {\n            this.selectElement.title = '';\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.setOptions(this.options, this.selected);\n        this.applyStyles();\n    }\n    applyStyles() {\n        var _a, _b, _c;\n        // Style native select\n        if (this.selectElement) {\n            this.selectElement.style.backgroundColor = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n            this.selectElement.style.color = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n            this.selectElement.style.borderColor = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        }\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SelectBoxList } from './selectBoxCustom.js';\nimport { SelectBoxNative } from './selectBoxNative.js';\nimport { Widget } from '../widget.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBox.css';\nexport class SelectBox extends Widget {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        // Default to native SelectBox for OSX unless overridden\n        if (isMacintosh && !(selectBoxOptions === null || selectBoxOptions === void 0 ? void 0 : selectBoxOptions.useCustomDrawn)) {\n            this.selectBoxDelegate = new SelectBoxNative(options, selected, styles, selectBoxOptions);\n        }\n        else {\n            this.selectBoxDelegate = new SelectBoxList(options, selected, contextViewProvider, styles, selectBoxOptions);\n        }\n        this._register(this.selectBoxDelegate);\n    }\n    // Public SelectBox Methods - routed through delegate interface\n    get onDidSelect() {\n        return this.selectBoxDelegate.onDidSelect;\n    }\n    setOptions(options, selected) {\n        this.selectBoxDelegate.setOptions(options, selected);\n    }\n    select(index) {\n        this.selectBoxDelegate.select(index);\n    }\n    focus() {\n        this.selectBoxDelegate.focus();\n    }\n    blur() {\n        this.selectBoxDelegate.blur();\n    }\n    setFocusable(focusable) {\n        this.selectBoxDelegate.setFocusable(focusable);\n    }\n    render(container) {\n        this.selectBoxDelegate.render(container);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        var _a, _b;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { var _a; return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        this.view.layout(this.size, offset, layoutContext);\n    }\n    dispose() {\n        this.disposable.dispose();\n        return this.view;\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.size = 0;\n        this.contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n        this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame\n        });\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? ((_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? ((_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this.contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this.contentSize > 0) {\n            this.proportions = this.viewItems.map(i => i.proportionalLayout ? i.size / this.contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(document.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(document.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        const indexes = range(this.viewItems.length).filter(i => i !== index);\n        const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        const item = this.viewItems[index];\n        size = Math.round(size);\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n        item.size = size;\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        this.state = State.Idle;\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        // Add view\n        const container = $('.split-view-view');\n        if (index === this.viewItems.length) {\n            this.viewContainer.appendChild(container);\n        }\n        else {\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n        }\n        const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n        const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n        const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else if (size.type === 'split') {\n            viewSize = this.getViewSize(size.index) / 2;\n        }\n        else if (size.type === 'invisible') {\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n        }\n        else {\n            viewSize = view.minimumSize;\n        }\n        const item = this.orientation === 0 /* Orientation.VERTICAL */\n            ? new VerticalViewItem(container, view, viewSize, disposable)\n            : new HorizontalViewItem(container, view, viewSize, disposable);\n        this.viewItems.splice(index, 0, item);\n        // Add sash\n        if (this.viewItems.length > 1) {\n            const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n            const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 1 /* Orientation.HORIZONTAL */ }))\n                : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 0 /* Orientation.VERTICAL */ }));\n            const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n            const onStart = Event.map(sash.onDidStart, sashEventMapper);\n            const onStartDisposable = onStart(this.onSashStart, this);\n            const onChange = Event.map(sash.onDidChange, sashEventMapper);\n            const onChangeDisposable = onChange(this.onSashChange, this);\n            const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n            const onEndDisposable = onEnd(this.onSashEnd, this);\n            const onDidResetDisposable = sash.onDidReset(() => {\n                const index = this.sashItems.findIndex(item => item.sash === sash);\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                    return;\n                }\n                if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                    return;\n                }\n                this._onDidSashReset.fire(index);\n            });\n            const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n            const sashItem = { sash, disposable };\n            this.sashItems.splice(index - 1, 0, sashItem);\n        }\n        container.appendChild(view.element);\n        let highPriorityIndexes;\n        if (typeof size !== 'number' && size.type === 'split') {\n            highPriorityIndexes = [size.index];\n        }\n        if (!skipLayout) {\n            this.relayout([index], highPriorityIndexes);\n        }\n        this.state = State.Idle;\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this.contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this.contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    dispose() {\n        var _a;\n        (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet } from '../../dom.js';\nimport { List, unthemedListStyles } from '../list/listWidget.js';\nimport { SplitView } from '../splitview/splitview.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport './table.css';\nclass TableListRenderer {\n    constructor(columns, renderers, getColumnSize) {\n        this.columns = columns;\n        this.getColumnSize = getColumnSize;\n        this.templateId = TableListRenderer.TemplateId;\n        this.renderedTemplates = new Set();\n        const rendererMap = new Map(renderers.map(r => [r.templateId, r]));\n        this.renderers = [];\n        for (const column of columns) {\n            const renderer = rendererMap.get(column.templateId);\n            if (!renderer) {\n                throw new Error(`Table cell renderer for template id ${column.templateId} not found.`);\n            }\n            this.renderers.push(renderer);\n        }\n    }\n    renderTemplate(container) {\n        const rowContainer = append(container, $('.monaco-table-tr'));\n        const cellContainers = [];\n        const cellTemplateData = [];\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            const cellContainer = append(rowContainer, $('.monaco-table-td', { 'data-col-index': i }));\n            cellContainer.style.width = `${this.getColumnSize(i)}px`;\n            cellContainers.push(cellContainer);\n            cellTemplateData.push(renderer.renderTemplate(cellContainer));\n        }\n        const result = { container, cellContainers, cellTemplateData };\n        this.renderedTemplates.add(result);\n        return result;\n    }\n    renderElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const column = this.columns[i];\n            const cell = column.project(element);\n            const renderer = this.renderers[i];\n            renderer.renderElement(cell, index, templateData.cellTemplateData[i], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            if (renderer.disposeElement) {\n                const column = this.columns[i];\n                const cell = column.project(element);\n                renderer.disposeElement(cell, index, templateData.cellTemplateData[i], height);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            renderer.disposeTemplate(templateData.cellTemplateData[i]);\n        }\n        clearNode(templateData.container);\n        this.renderedTemplates.delete(templateData);\n    }\n    layoutColumn(index, size) {\n        for (const { cellContainers } of this.renderedTemplates) {\n            cellContainers[index].style.width = `${size}px`;\n        }\n    }\n}\nTableListRenderer.TemplateId = 'row';\nfunction asListVirtualDelegate(delegate) {\n    return {\n        getHeight(row) { return delegate.getHeight(row); },\n        getTemplateId() { return TableListRenderer.TemplateId; },\n    };\n}\nclass ColumnHeader {\n    get minimumSize() { var _a; return (_a = this.column.minimumWidth) !== null && _a !== void 0 ? _a : 120; }\n    get maximumSize() { var _a; return (_a = this.column.maximumWidth) !== null && _a !== void 0 ? _a : Number.POSITIVE_INFINITY; }\n    get onDidChange() { var _a; return (_a = this.column.onDidChangeWidthConstraints) !== null && _a !== void 0 ? _a : Event.None; }\n    constructor(column, index) {\n        this.column = column;\n        this.index = index;\n        this._onDidLayout = new Emitter();\n        this.onDidLayout = this._onDidLayout.event;\n        this.element = $('.monaco-table-th', { 'data-col-index': index, title: column.tooltip }, column.label);\n    }\n    layout(size) {\n        this._onDidLayout.fire([this.index, size]);\n    }\n}\nexport class Table {\n    get onDidChangeFocus() { return this.list.onDidChangeFocus; }\n    get onDidChangeSelection() { return this.list.onDidChangeSelection; }\n    get onMouseDblClick() { return this.list.onMouseDblClick; }\n    get onPointer() { return this.list.onPointer; }\n    get onDidFocus() { return this.list.onDidFocus; }\n    get onDidDispose() { return this.list.onDidDispose; }\n    constructor(user, container, virtualDelegate, columns, renderers, _options) {\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `table_id_${++Table.InstanceCount}`;\n        this.disposables = new DisposableStore();\n        this.cachedWidth = 0;\n        this.cachedHeight = 0;\n        this.domNode = append(container, $(`.monaco-table.${this.domId}`));\n        const headers = columns.map((c, i) => new ColumnHeader(c, i));\n        const descriptor = {\n            size: headers.reduce((a, b) => a + b.column.weight, 0),\n            views: headers.map(view => ({ size: view.column.weight, view }))\n        };\n        this.splitview = this.disposables.add(new SplitView(this.domNode, {\n            orientation: 1 /* Orientation.HORIZONTAL */,\n            scrollbarVisibility: 2 /* ScrollbarVisibility.Hidden */,\n            getSashOrthogonalSize: () => this.cachedHeight,\n            descriptor\n        }));\n        this.splitview.el.style.height = `${virtualDelegate.headerRowHeight}px`;\n        this.splitview.el.style.lineHeight = `${virtualDelegate.headerRowHeight}px`;\n        const renderer = new TableListRenderer(columns, renderers, i => this.splitview.getViewSize(i));\n        this.list = this.disposables.add(new List(user, this.domNode, asListVirtualDelegate(virtualDelegate), [renderer], _options));\n        Event.any(...headers.map(h => h.onDidLayout))(([index, size]) => renderer.layoutColumn(index, size), null, this.disposables);\n        this.splitview.onDidSashReset(index => {\n            const totalWeight = columns.reduce((r, c) => r + c.weight, 0);\n            const size = columns[index].weight / totalWeight * this.cachedWidth;\n            this.splitview.resizeView(index, size);\n        }, null, this.disposables);\n        this.styleElement = createStyleSheet(this.domNode);\n        this.style(unthemedListStyles);\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    splice(start, deleteCount, elements = []) {\n        this.list.splice(start, deleteCount, elements);\n    }\n    getHTMLElement() {\n        return this.domNode;\n    }\n    style(styles) {\n        const content = [];\n        content.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight + 1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`);\n        this.styleElement.textContent = content.join('\\n');\n        this.list.style(styles);\n    }\n    getSelectedElements() {\n        return this.list.getSelectedElements();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nTable.InstanceCount = 0;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Widget } from '../widget.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { Emitter } from '../../../common/event.js';\nimport './toggle.css';\nexport const unthemedToggleStyles = {\n    inputActiveOptionBorder: '#007ACC00',\n    inputActiveOptionForeground: '#FFFFFF',\n    inputActiveOptionBackground: '#0E639C50'\n};\nexport class Toggle extends Widget {\n    constructor(opts) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._opts = opts;\n        this._checked = this._opts.isChecked;\n        const classes = ['monaco-custom-toggle'];\n        if (this._opts.icon) {\n            this._icon = this._opts.icon;\n            classes.push(...ThemeIcon.asClassNameArray(this._icon));\n        }\n        if (this._opts.actionClassName) {\n            classes.push(...this._opts.actionClassName.split(' '));\n        }\n        if (this._checked) {\n            classes.push('checked');\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.title = this._opts.title;\n        this.domNode.classList.add(...classes);\n        if (!this._opts.notFocusable) {\n            this.domNode.tabIndex = 0;\n        }\n        this.domNode.setAttribute('role', 'checkbox');\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.setAttribute('aria-label', this._opts.title);\n        this.applyStyles();\n        this.onclick(this.domNode, (ev) => {\n            if (this.enabled) {\n                this.checked = !this._checked;\n                this._onChange.fire(false);\n                ev.preventDefault();\n            }\n        });\n        this._register(this.ignoreGesture(this.domNode));\n        this.onkeydown(this.domNode, (keyboardEvent) => {\n            if (keyboardEvent.keyCode === 10 /* KeyCode.Space */ || keyboardEvent.keyCode === 3 /* KeyCode.Enter */) {\n                this.checked = !this._checked;\n                this._onChange.fire(true);\n                keyboardEvent.preventDefault();\n                keyboardEvent.stopPropagation();\n                return;\n            }\n            this._onKeyDown.fire(keyboardEvent);\n        });\n    }\n    get enabled() {\n        return this.domNode.getAttribute('aria-disabled') !== 'true';\n    }\n    focus() {\n        this.domNode.focus();\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(newIsChecked) {\n        this._checked = newIsChecked;\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.classList.toggle('checked', this._checked);\n        this.applyStyles();\n    }\n    width() {\n        return 2 /*margin left*/ + 2 /*border*/ + 2 /*padding*/ + 16 /* icon width */;\n    }\n    applyStyles() {\n        if (this.domNode) {\n            this.domNode.style.borderColor = (this._checked && this._opts.inputActiveOptionBorder) || '';\n            this.domNode.style.color = (this._checked && this._opts.inputActiveOptionForeground) || 'inherit';\n            this.domNode.style.backgroundColor = (this._checked && this._opts.inputActiveOptionBackground) || '';\n        }\n    }\n    enable() {\n        this.domNode.setAttribute('aria-disabled', String(false));\n    }\n    disable() {\n        this.domNode.setAttribute('aria-disabled', String(true));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { DropdownMenuActionViewItem } from '../dropdown/dropdownActionViewItem.js';\nimport { Action, SubmenuAction } from '../../../common/actions.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { EventMultiplexer } from '../../../common/event.js';\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../common/types.js';\nimport './toolbar.css';\nimport * as nls from '../../../../nls.js';\n/**\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\n */\nexport class ToolBar extends Disposable {\n    constructor(container, contextMenuProvider, options = { orientation: 0 /* ActionsOrientation.HORIZONTAL */ }) {\n        super();\n        this.submenuActionViewItems = [];\n        this.hasSecondaryActions = false;\n        this._onDidChangeDropdownVisibility = this._register(new EventMultiplexer());\n        this.onDidChangeDropdownVisibility = this._onDidChangeDropdownVisibility.event;\n        this.disposables = new DisposableStore();\n        this.options = options;\n        this.lookupKeybindings = typeof this.options.getKeyBinding === 'function';\n        this.toggleMenuAction = this._register(new ToggleMenuAction(() => { var _a; return (_a = this.toggleMenuActionViewItem) === null || _a === void 0 ? void 0 : _a.show(); }, options.toggleMenuTitle));\n        this.element = document.createElement('div');\n        this.element.className = 'monaco-toolbar';\n        container.appendChild(this.element);\n        this.actionBar = this._register(new ActionBar(this.element, {\n            orientation: options.orientation,\n            ariaLabel: options.ariaLabel,\n            actionRunner: options.actionRunner,\n            allowContextMenu: options.allowContextMenu,\n            actionViewItemProvider: (action, viewItemOptions) => {\n                var _a;\n                if (action.id === ToggleMenuAction.ID) {\n                    this.toggleMenuActionViewItem = new DropdownMenuActionViewItem(action, action.menuActions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: ThemeIcon.asClassNameArray((_a = options.moreIcon) !== null && _a !== void 0 ? _a : Codicon.toolBarMore),\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement\n                    });\n                    this.toggleMenuActionViewItem.setActionContext(this.actionBar.context);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility));\n                    return this.toggleMenuActionViewItem;\n                }\n                if (options.actionViewItemProvider) {\n                    const result = options.actionViewItemProvider(action, viewItemOptions);\n                    if (result) {\n                        return result;\n                    }\n                }\n                if (action instanceof SubmenuAction) {\n                    const result = new DropdownMenuActionViewItem(action, action.actions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: action.class,\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement\n                    });\n                    result.setActionContext(this.actionBar.context);\n                    this.submenuActionViewItems.push(result);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(result.onDidChangeVisibility));\n                    return result;\n                }\n                return undefined;\n            }\n        }));\n    }\n    set actionRunner(actionRunner) {\n        this.actionBar.actionRunner = actionRunner;\n    }\n    get actionRunner() {\n        return this.actionBar.actionRunner;\n    }\n    getElement() {\n        return this.element;\n    }\n    getItemAction(indexOrElement) {\n        return this.actionBar.getAction(indexOrElement);\n    }\n    setActions(primaryActions, secondaryActions) {\n        this.clear();\n        const primaryActionsToSet = primaryActions ? primaryActions.slice(0) : [];\n        // Inject additional action to open secondary actions if present\n        this.hasSecondaryActions = !!(secondaryActions && secondaryActions.length > 0);\n        if (this.hasSecondaryActions && secondaryActions) {\n            this.toggleMenuAction.menuActions = secondaryActions.slice(0);\n            primaryActionsToSet.push(this.toggleMenuAction);\n        }\n        primaryActionsToSet.forEach(action => {\n            this.actionBar.push(action, { icon: true, label: false, keybinding: this.getKeybindingLabel(action) });\n        });\n    }\n    getKeybindingLabel(action) {\n        var _a, _b;\n        const key = this.lookupKeybindings ? (_b = (_a = this.options).getKeyBinding) === null || _b === void 0 ? void 0 : _b.call(_a, action) : undefined;\n        return withNullAsUndefined(key === null || key === void 0 ? void 0 : key.getLabel());\n    }\n    clear() {\n        this.submenuActionViewItems = [];\n        this.disposables.clear();\n        this.actionBar.clear();\n    }\n    dispose() {\n        this.clear();\n        super.dispose();\n    }\n}\nexport class ToggleMenuAction extends Action {\n    constructor(toggleDropdownMenu, title) {\n        title = title || nls.localize('moreActions', \"More Actions...\");\n        super(ToggleMenuAction.ID, title, undefined, true);\n        this._menuActions = [];\n        this.toggleDropdownMenu = toggleDropdownMenu;\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.toggleDropdownMenu();\n        });\n    }\n    get menuActions() {\n        return this._menuActions;\n    }\n    set menuActions(actions) {\n        this._menuActions = actions;\n    }\n}\nToggleMenuAction.ID = 'toolbar.toggle.more';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, append, clearNode, createStyleSheet, h, hasParentWithClass } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { FindInput } from '../findinput/findInput.js';\nimport { unthemedInboxStyles } from '../inputbox/inputBox.js';\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { isButton, isInputElement, isMonacoEditor, List, MouseController } from '../list/listWidget.js';\nimport { Toggle, unthemedToggleStyles } from '../toggle/toggle.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { TreeMouseEventTarget } from './tree.js';\nimport { Action } from '../../../common/actions.js';\nimport { distinct, equals, range } from '../../../common/arrays.js';\nimport { disposableTimeout, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { SetMap } from '../../../common/collections.js';\nimport { Emitter, Event, EventBufferer, Relay } from '../../../common/event.js';\nimport { fuzzyScore, FuzzyScore } from '../../../common/filters.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { isNumber } from '../../../common/types.js';\nimport './media/tree.css';\nimport { localize } from '../../../../nls.js';\nclass TreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new TreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass TreeNodeListDragAndDrop {\n    constructor(modelProvider, dnd) {\n        this.modelProvider = modelProvider;\n        this.dnd = dnd;\n        this.autoExpandDisposable = Disposable.None;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        const result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n        const didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n        if (didChangeAutoExpandNode) {\n            this.autoExpandDisposable.dispose();\n            this.autoExpandNode = targetNode;\n        }\n        if (typeof targetNode === 'undefined') {\n            return result;\n        }\n        if (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n            this.autoExpandDisposable = disposableTimeout(() => {\n                const model = this.modelProvider();\n                const ref = model.getNodeLocation(targetNode);\n                if (model.isCollapsed(ref)) {\n                    model.setCollapsed(ref, false);\n                }\n                this.autoExpandNode = undefined;\n            }, 500);\n        }\n        if (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n            if (!raw) {\n                const accept = typeof result === 'boolean' ? result : result.accept;\n                const effect = typeof result === 'boolean' ? undefined : result.effect;\n                return { accept, effect, feedback: [targetIndex] };\n            }\n            return result;\n        }\n        if (result.bubble === 1 /* TreeDragOverBubble.Up */) {\n            const model = this.modelProvider();\n            const ref = model.getNodeLocation(targetNode);\n            const parentRef = model.getParentNodeLocation(ref);\n            const parentNode = model.getNode(parentRef);\n            const parentIndex = parentRef && model.getListIndex(parentRef);\n            return this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\n        }\n        const model = this.modelProvider();\n        const ref = model.getNodeLocation(targetNode);\n        const start = model.getListIndex(ref);\n        const length = model.getListRenderCount(ref);\n        return Object.assign(Object.assign({}, result), { feedback: range(start, start + length) });\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.autoExpandDisposable.dispose();\n        this.autoExpandNode = undefined;\n        this.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n}\nfunction asListOptions(modelProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getSetSize(node) {\n                const model = modelProvider();\n                const ref = model.getNodeLocation(node);\n                const parentRef = model.getParentNodeLocation(ref);\n                const parentNode = model.getNode(parentRef);\n                return parentNode.visibleChildrenCount;\n            },\n            getPosInSet(node) {\n                return node.visibleChildIndex + 1;\n            }, isChecked: options.accessibilityProvider && options.accessibilityProvider.isChecked ? (node) => {\n                return options.accessibilityProvider.isChecked(node.element);\n            } : undefined, getRole: options.accessibilityProvider && options.accessibilityProvider.getRole ? (node) => {\n                return options.accessibilityProvider.getRole(node.element);\n            } : () => 'treeitem', getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider && options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider && options.accessibilityProvider.getAriaLevel ? (node) => options.accessibilityProvider.getAriaLevel(node.element) : (node) => {\n                return node.depth;\n            }, getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(node) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(node.element);\n            } }) });\n}\nexport class ComposedTreeDelegate {\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    getHeight(element) {\n        return this.delegate.getHeight(element.element);\n    }\n    getTemplateId(element) {\n        return this.delegate.getTemplateId(element.element);\n    }\n    hasDynamicHeight(element) {\n        return !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n    }\n    setDynamicHeight(element, height) {\n        var _a, _b;\n        (_b = (_a = this.delegate).setDynamicHeight) === null || _b === void 0 ? void 0 : _b.call(_a, element.element, height);\n    }\n}\nexport var RenderIndentGuides;\n(function (RenderIndentGuides) {\n    RenderIndentGuides[\"None\"] = \"none\";\n    RenderIndentGuides[\"OnHover\"] = \"onHover\";\n    RenderIndentGuides[\"Always\"] = \"always\";\n})(RenderIndentGuides || (RenderIndentGuides = {}));\nclass EventCollection {\n    get elements() {\n        return this._elements;\n    }\n    constructor(onDidChange, _elements = []) {\n        this._elements = _elements;\n        this.disposables = new DisposableStore();\n        this.onDidChange = Event.forEach(onDidChange, elements => this._elements = elements, this.disposables);\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nclass TreeRenderer {\n    constructor(renderer, modelProvider, onDidChangeCollapseState, activeNodes, renderedIndentGuides, options = {}) {\n        var _a;\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n        this.activeNodes = activeNodes;\n        this.renderedIndentGuides = renderedIndentGuides;\n        this.renderedElements = new Map();\n        this.renderedNodes = new Map();\n        this.indent = TreeRenderer.DefaultIndent;\n        this.hideTwistiesOfChildlessElements = false;\n        this.shouldRenderIndentGuides = false;\n        this.activeIndentNodes = new Set();\n        this.indentGuidesDisposable = Disposable.None;\n        this.disposables = new DisposableStore();\n        this.templateId = renderer.templateId;\n        this.updateOptions(options);\n        Event.map(onDidChangeCollapseState, e => e.node)(this.onDidChangeNodeTwistieState, this, this.disposables);\n        (_a = renderer.onDidChangeTwistieState) === null || _a === void 0 ? void 0 : _a.call(renderer, this.onDidChangeTwistieState, this, this.disposables);\n    }\n    updateOptions(options = {}) {\n        if (typeof options.indent !== 'undefined') {\n            const indent = clamp(options.indent, 0, 40);\n            if (indent !== this.indent) {\n                this.indent = indent;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this.renderTreeElement(node, templateData);\n                }\n            }\n        }\n        if (typeof options.renderIndentGuides !== 'undefined') {\n            const shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n            if (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n                this.shouldRenderIndentGuides = shouldRenderIndentGuides;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this._renderIndentGuides(node, templateData);\n                }\n                this.indentGuidesDisposable.dispose();\n                if (shouldRenderIndentGuides) {\n                    const disposables = new DisposableStore();\n                    this.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n                    this.indentGuidesDisposable = disposables;\n                    this._onDidChangeActiveNodes(this.activeNodes.elements);\n                }\n            }\n        }\n        if (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n            this.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n        }\n    }\n    renderTemplate(container) {\n        const el = append(container, $('.monaco-tl-row'));\n        const indent = append(el, $('.monaco-tl-indent'));\n        const twistie = append(el, $('.monaco-tl-twistie'));\n        const contents = append(el, $('.monaco-tl-contents'));\n        const templateData = this.renderer.renderTemplate(contents);\n        return { container, indent, twistie, indentGuidesDisposable: Disposable.None, templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderedNodes.set(node, templateData);\n        this.renderedElements.set(node.element, node);\n        this.renderTreeElement(node, templateData);\n        this.renderer.renderElement(node, index, templateData.templateData, height);\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        templateData.indentGuidesDisposable.dispose();\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, node, index, templateData.templateData, height);\n        if (typeof height === 'number') {\n            this.renderedNodes.delete(node);\n            this.renderedElements.delete(node.element);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    onDidChangeTwistieState(element) {\n        const node = this.renderedElements.get(element);\n        if (!node) {\n            return;\n        }\n        this.onDidChangeNodeTwistieState(node);\n    }\n    onDidChangeNodeTwistieState(node) {\n        const templateData = this.renderedNodes.get(node);\n        if (!templateData) {\n            return;\n        }\n        this._onDidChangeActiveNodes(this.activeNodes.elements);\n        this.renderTreeElement(node, templateData);\n    }\n    renderTreeElement(node, templateData) {\n        const indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n        templateData.twistie.style.paddingLeft = `${indent}px`;\n        templateData.indent.style.width = `${indent + this.indent - 16}px`;\n        if (node.collapsible) {\n            templateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n        }\n        else {\n            templateData.container.removeAttribute('aria-expanded');\n        }\n        templateData.twistie.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n        let twistieRendered = false;\n        if (this.renderer.renderTwistie) {\n            twistieRendered = this.renderer.renderTwistie(node.element, templateData.twistie);\n        }\n        if (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n            if (!twistieRendered) {\n                templateData.twistie.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n            }\n            templateData.twistie.classList.add('collapsible');\n            templateData.twistie.classList.toggle('collapsed', node.collapsed);\n        }\n        else {\n            templateData.twistie.classList.remove('collapsible', 'collapsed');\n        }\n        this._renderIndentGuides(node, templateData);\n    }\n    _renderIndentGuides(node, templateData) {\n        clearNode(templateData.indent);\n        templateData.indentGuidesDisposable.dispose();\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const disposableStore = new DisposableStore();\n        const model = this.modelProvider();\n        while (true) {\n            const ref = model.getNodeLocation(node);\n            const parentRef = model.getParentNodeLocation(ref);\n            if (!parentRef) {\n                break;\n            }\n            const parent = model.getNode(parentRef);\n            const guide = $('.indent-guide', { style: `width: ${this.indent}px` });\n            if (this.activeIndentNodes.has(parent)) {\n                guide.classList.add('active');\n            }\n            if (templateData.indent.childElementCount === 0) {\n                templateData.indent.appendChild(guide);\n            }\n            else {\n                templateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n            }\n            this.renderedIndentGuides.add(parent, guide);\n            disposableStore.add(toDisposable(() => this.renderedIndentGuides.delete(parent, guide)));\n            node = parent;\n        }\n        templateData.indentGuidesDisposable = disposableStore;\n    }\n    _onDidChangeActiveNodes(nodes) {\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const set = new Set();\n        const model = this.modelProvider();\n        nodes.forEach(node => {\n            const ref = model.getNodeLocation(node);\n            try {\n                const parentRef = model.getParentNodeLocation(ref);\n                if (node.collapsible && node.children.length > 0 && !node.collapsed) {\n                    set.add(node);\n                }\n                else if (parentRef) {\n                    set.add(model.getNode(parentRef));\n                }\n            }\n            catch (_a) {\n                // noop\n            }\n        });\n        this.activeIndentNodes.forEach(node => {\n            if (!set.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.remove('active'));\n            }\n        });\n        set.forEach(node => {\n            if (!this.activeIndentNodes.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.add('active'));\n            }\n        });\n        this.activeIndentNodes = set;\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.renderedElements.clear();\n        this.indentGuidesDisposable.dispose();\n        dispose(this.disposables);\n    }\n}\nTreeRenderer.DefaultIndent = 8;\nclass FindFilter {\n    get totalCount() { return this._totalCount; }\n    get matchCount() { return this._matchCount; }\n    constructor(tree, keyboardNavigationLabelProvider, _filter) {\n        this.tree = tree;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this._filter = _filter;\n        this._totalCount = 0;\n        this._matchCount = 0;\n        this._pattern = '';\n        this._lowercasePattern = '';\n        this.disposables = new DisposableStore();\n        tree.onWillRefilter(this.reset, this, this.disposables);\n    }\n    filter(element, parentVisibility) {\n        let visibility = 1 /* TreeVisibility.Visible */;\n        if (this._filter) {\n            const result = this._filter.filter(element, parentVisibility);\n            if (typeof result === 'boolean') {\n                visibility = result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n            }\n            else if (isFilterResult(result)) {\n                visibility = getVisibleState(result.visibility);\n            }\n            else {\n                visibility = result;\n            }\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                return false;\n            }\n        }\n        this._totalCount++;\n        if (!this._pattern) {\n            this._matchCount++;\n            return { data: FuzzyScore.Default, visibility };\n        }\n        const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n        const labels = Array.isArray(label) ? label : [label];\n        for (const l of labels) {\n            const labelStr = l && l.toString();\n            if (typeof labelStr === 'undefined') {\n                return { data: FuzzyScore.Default, visibility };\n            }\n            let score;\n            if (this.tree.findMatchType === TreeFindMatchType.Contiguous) {\n                const index = labelStr.toLowerCase().indexOf(this._lowercasePattern);\n                if (index > -1) {\n                    score = [Number.MAX_SAFE_INTEGER, 0];\n                    for (let i = this._lowercasePattern.length; i > 0; i--) {\n                        score.push(index + i - 1);\n                    }\n                }\n            }\n            else {\n                score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, { firstMatchCanBeWeak: true, boostFullMatch: true });\n            }\n            if (score) {\n                this._matchCount++;\n                return labels.length === 1 ?\n                    { data: score, visibility } :\n                    { data: { label: labelStr, score: score }, visibility };\n            }\n        }\n        if (this.tree.findMode === TreeFindMode.Filter) {\n            if (typeof this.tree.options.defaultFindVisibility === 'number') {\n                return this.tree.options.defaultFindVisibility;\n            }\n            else if (this.tree.options.defaultFindVisibility) {\n                return this.tree.options.defaultFindVisibility(element);\n            }\n            else {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n        }\n        else {\n            return { data: FuzzyScore.Default, visibility };\n        }\n    }\n    reset() {\n        this._totalCount = 0;\n        this._matchCount = 0;\n    }\n    dispose() {\n        dispose(this.disposables);\n    }\n}\nexport class ModeToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.listFilter,\n            title: localize('filter', \"Filter\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class FuzzyToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.searchFuzzy,\n            title: localize('fuzzySearch', \"Fuzzy Match\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nconst unthemedFindWidgetStyles = {\n    inputBoxStyles: unthemedInboxStyles,\n    toggleStyles: unthemedToggleStyles,\n    listFilterWidgetBackground: undefined,\n    listFilterWidgetNoMatchesOutline: undefined,\n    listFilterWidgetOutline: undefined,\n    listFilterWidgetShadow: undefined\n};\nexport var TreeFindMode;\n(function (TreeFindMode) {\n    TreeFindMode[TreeFindMode[\"Highlight\"] = 0] = \"Highlight\";\n    TreeFindMode[TreeFindMode[\"Filter\"] = 1] = \"Filter\";\n})(TreeFindMode || (TreeFindMode = {}));\nexport var TreeFindMatchType;\n(function (TreeFindMatchType) {\n    TreeFindMatchType[TreeFindMatchType[\"Fuzzy\"] = 0] = \"Fuzzy\";\n    TreeFindMatchType[TreeFindMatchType[\"Contiguous\"] = 1] = \"Contiguous\";\n})(TreeFindMatchType || (TreeFindMatchType = {}));\nclass FindWidget extends Disposable {\n    set mode(mode) {\n        this.modeToggle.checked = mode === TreeFindMode.Filter;\n        this.findInput.inputBox.setPlaceHolder(mode === TreeFindMode.Filter ? localize('type to filter', \"Type to filter\") : localize('type to search', \"Type to search\"));\n    }\n    set matchType(matchType) {\n        this.matchTypeToggle.checked = matchType === TreeFindMatchType.Fuzzy;\n    }\n    constructor(container, tree, contextViewProvider, mode, matchType, options) {\n        var _a;\n        super();\n        this.tree = tree;\n        this.elements = h('.monaco-tree-type-filter', [\n            h('.monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab', { tabIndex: 0 }),\n            h('.monaco-tree-type-filter-input@findInput'),\n            h('.monaco-tree-type-filter-actionbar@actionbar'),\n        ]);\n        this.width = 0;\n        this.right = 0;\n        this.top = 0;\n        this._onDidDisable = new Emitter();\n        container.appendChild(this.elements.root);\n        this._register(toDisposable(() => container.removeChild(this.elements.root)));\n        const styles = (_a = options === null || options === void 0 ? void 0 : options.styles) !== null && _a !== void 0 ? _a : unthemedFindWidgetStyles;\n        if (styles.listFilterWidgetBackground) {\n            this.elements.root.style.backgroundColor = styles.listFilterWidgetBackground;\n        }\n        if (styles.listFilterWidgetShadow) {\n            this.elements.root.style.boxShadow = `0 0 8px 2px ${styles.listFilterWidgetShadow}`;\n        }\n        this.modeToggle = this._register(new ModeToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: mode === TreeFindMode.Filter })));\n        this.matchTypeToggle = this._register(new FuzzyToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: matchType === TreeFindMatchType.Fuzzy })));\n        this.onDidChangeMode = Event.map(this.modeToggle.onChange, () => this.modeToggle.checked ? TreeFindMode.Filter : TreeFindMode.Highlight, this._store);\n        this.onDidChangeMatchType = Event.map(this.matchTypeToggle.onChange, () => this.matchTypeToggle.checked ? TreeFindMatchType.Fuzzy : TreeFindMatchType.Contiguous, this._store);\n        this.findInput = this._register(new FindInput(this.elements.findInput, contextViewProvider, {\n            label: localize('type to search', \"Type to search\"),\n            additionalToggles: [this.modeToggle, this.matchTypeToggle],\n            showCommonFindToggles: false,\n            inputBoxStyles: styles.inputBoxStyles,\n            toggleStyles: styles.toggleStyles,\n            history: options === null || options === void 0 ? void 0 : options.history\n        }));\n        this.actionbar = this._register(new ActionBar(this.elements.actionbar));\n        this.mode = mode;\n        const emitter = this._register(new DomEmitter(this.findInput.inputBox.inputElement, 'keydown'));\n        const onKeyDown = this._register(Event.chain(emitter.event))\n            .map(e => new StandardKeyboardEvent(e))\n            .event;\n        this._register(onKeyDown((e) => {\n            // Using equals() so we reserve modified keys for future use\n            if (e.equals(3 /* KeyCode.Enter */)) {\n                // This is the only keyboard way to return to the tree from a history item that isn't the last one\n                e.preventDefault();\n                e.stopPropagation();\n                this.findInput.inputBox.addToHistory();\n                this.tree.domFocus();\n                return;\n            }\n            if (e.equals(18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (this.findInput.inputBox.isAtLastInHistory() || this.findInput.inputBox.isNowhereInHistory()) {\n                    // Retain original pre-history DownArrow behavior\n                    this.findInput.inputBox.addToHistory();\n                    this.tree.domFocus();\n                }\n                else {\n                    // Downward through history\n                    this.findInput.inputBox.showNextValue();\n                }\n                return;\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                // Upward through history\n                this.findInput.inputBox.showPreviousValue();\n                return;\n            }\n        }));\n        const closeAction = this._register(new Action('close', localize('close', \"Close\"), 'codicon codicon-close', true, () => this.dispose()));\n        this.actionbar.push(closeAction, { icon: true, label: false });\n        const onGrabMouseDown = this._register(new DomEmitter(this.elements.grab, 'mousedown'));\n        this._register(onGrabMouseDown.event(e => {\n            const disposables = new DisposableStore();\n            const onWindowMouseMove = disposables.add(new DomEmitter(window, 'mousemove'));\n            const onWindowMouseUp = disposables.add(new DomEmitter(window, 'mouseup'));\n            const startRight = this.right;\n            const startX = e.pageX;\n            const startTop = this.top;\n            const startY = e.pageY;\n            this.elements.grab.classList.add('grabbing');\n            const transition = this.elements.root.style.transition;\n            this.elements.root.style.transition = 'unset';\n            const update = (e) => {\n                const deltaX = e.pageX - startX;\n                this.right = startRight - deltaX;\n                const deltaY = e.pageY - startY;\n                this.top = startTop + deltaY;\n                this.layout();\n            };\n            disposables.add(onWindowMouseMove.event(update));\n            disposables.add(onWindowMouseUp.event(e => {\n                update(e);\n                this.elements.grab.classList.remove('grabbing');\n                this.elements.root.style.transition = transition;\n                disposables.dispose();\n            }));\n        }));\n        const onGrabKeyDown = this._register(Event.chain(this._register(new DomEmitter(this.elements.grab, 'keydown')).event))\n            .map(e => new StandardKeyboardEvent(e))\n            .event;\n        this._register(onGrabKeyDown((e) => {\n            let right;\n            let top;\n            if (e.keyCode === 15 /* KeyCode.LeftArrow */) {\n                right = Number.POSITIVE_INFINITY;\n            }\n            else if (e.keyCode === 17 /* KeyCode.RightArrow */) {\n                right = 0;\n            }\n            else if (e.keyCode === 10 /* KeyCode.Space */) {\n                right = this.right === 0 ? Number.POSITIVE_INFINITY : 0;\n            }\n            if (e.keyCode === 16 /* KeyCode.UpArrow */) {\n                top = 0;\n            }\n            else if (e.keyCode === 18 /* KeyCode.DownArrow */) {\n                top = Number.POSITIVE_INFINITY;\n            }\n            if (right !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.right = right;\n                this.layout();\n            }\n            if (top !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.top = top;\n                const transition = this.elements.root.style.transition;\n                this.elements.root.style.transition = 'unset';\n                this.layout();\n                setTimeout(() => {\n                    this.elements.root.style.transition = transition;\n                }, 0);\n            }\n        }));\n        this.onDidChangeValue = this.findInput.onDidChange;\n    }\n    layout(width = this.width) {\n        this.width = width;\n        this.right = clamp(this.right, 0, Math.max(0, width - 212));\n        this.elements.root.style.right = `${this.right}px`;\n        this.top = clamp(this.top, 0, 24);\n        this.elements.root.style.top = `${this.top}px`;\n    }\n    showMessage(message) {\n        this.findInput.showMessage(message);\n    }\n    clearMessage() {\n        this.findInput.clearMessage();\n    }\n    dispose() {\n        const _super = Object.create(null, {\n            dispose: { get: () => super.dispose }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            this._onDidDisable.fire();\n            this.elements.root.classList.add('disabled');\n            yield timeout(300);\n            _super.dispose.call(this);\n        });\n    }\n}\nclass FindController {\n    get pattern() { return this._pattern; }\n    get mode() { return this._mode; }\n    set mode(mode) {\n        if (mode === this._mode) {\n            return;\n        }\n        this._mode = mode;\n        if (this.widget) {\n            this.widget.mode = this._mode;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMode.fire(mode);\n    }\n    get matchType() { return this._matchType; }\n    set matchType(matchType) {\n        if (matchType === this._matchType) {\n            return;\n        }\n        this._matchType = matchType;\n        if (this.widget) {\n            this.widget.matchType = this._matchType;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMatchType.fire(matchType);\n    }\n    constructor(tree, model, view, filter, contextViewProvider, options = {}) {\n        var _a, _b;\n        this.tree = tree;\n        this.view = view;\n        this.filter = filter;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options;\n        this._pattern = '';\n        this.width = 0;\n        this._onDidChangeMode = new Emitter();\n        this.onDidChangeMode = this._onDidChangeMode.event;\n        this._onDidChangeMatchType = new Emitter();\n        this.onDidChangeMatchType = this._onDidChangeMatchType.event;\n        this._onDidChangePattern = new Emitter();\n        this._onDidChangeOpenState = new Emitter();\n        this.onDidChangeOpenState = this._onDidChangeOpenState.event;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this._mode = (_a = tree.options.defaultFindMode) !== null && _a !== void 0 ? _a : TreeFindMode.Highlight;\n        this._matchType = (_b = tree.options.defaultFindMatchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy;\n        model.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n    }\n    updateOptions(optionsUpdate = {}) {\n        if (optionsUpdate.defaultFindMode !== undefined) {\n            this.mode = optionsUpdate.defaultFindMode;\n        }\n        if (optionsUpdate.defaultFindMatchType !== undefined) {\n            this.matchType = optionsUpdate.defaultFindMatchType;\n        }\n    }\n    onDidSpliceModel() {\n        if (!this.widget || this.pattern.length === 0) {\n            return;\n        }\n        this.tree.refilter();\n        this.render();\n    }\n    render() {\n        var _a, _b, _c, _d;\n        const noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n        if (this.pattern && noMatches) {\n            if ((_a = this.tree.options.showNotFoundMessage) !== null && _a !== void 0 ? _a : true) {\n                (_b = this.widget) === null || _b === void 0 ? void 0 : _b.showMessage({ type: 2 /* MessageType.WARNING */, content: localize('not found', \"No elements found.\") });\n            }\n            else {\n                (_c = this.widget) === null || _c === void 0 ? void 0 : _c.showMessage({ type: 2 /* MessageType.WARNING */ });\n            }\n        }\n        else {\n            (_d = this.widget) === null || _d === void 0 ? void 0 : _d.clearMessage();\n        }\n    }\n    shouldAllowFocus(node) {\n        if (!this.widget || !this.pattern || this._mode === TreeFindMode.Filter) {\n            return true;\n        }\n        if (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n            return true;\n        }\n        return !FuzzyScore.isDefault(node.filterData);\n    }\n    layout(width) {\n        var _a;\n        this.width = width;\n        (_a = this.widget) === null || _a === void 0 ? void 0 : _a.layout(width);\n    }\n    dispose() {\n        this._history = undefined;\n        this._onDidChangePattern.dispose();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nfunction asTreeMouseEvent(event) {\n    let target = TreeMouseEventTarget.Unknown;\n    if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-twistie', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Twistie;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-contents', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Element;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tree-type-filter', 'monaco-list')) {\n        target = TreeMouseEventTarget.Filter;\n    }\n    return {\n        browserEvent: event.browserEvent,\n        element: event.element ? event.element.element : null,\n        target\n    };\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\n/**\n * The trait concept needs to exist at the tree level, because collapsed\n * tree nodes will not be known by the list.\n */\nclass Trait {\n    get nodeSet() {\n        if (!this._nodeSet) {\n            this._nodeSet = this.createNodeSet();\n        }\n        return this._nodeSet;\n    }\n    constructor(getFirstViewElementWithTrait, identityProvider) {\n        this.getFirstViewElementWithTrait = getFirstViewElementWithTrait;\n        this.identityProvider = identityProvider;\n        this.nodes = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    set(nodes, browserEvent) {\n        if (!(browserEvent === null || browserEvent === void 0 ? void 0 : browserEvent.__forceEvent) && equals(this.nodes, nodes)) {\n            return;\n        }\n        this._set(nodes, false, browserEvent);\n    }\n    _set(nodes, silent, browserEvent) {\n        this.nodes = [...nodes];\n        this.elements = undefined;\n        this._nodeSet = undefined;\n        if (!silent) {\n            const that = this;\n            this._onDidChange.fire({ get elements() { return that.get(); }, browserEvent });\n        }\n    }\n    get() {\n        if (!this.elements) {\n            this.elements = this.nodes.map(node => node.element);\n        }\n        return [...this.elements];\n    }\n    getNodes() {\n        return this.nodes;\n    }\n    has(node) {\n        return this.nodeSet.has(node);\n    }\n    onDidModelSplice({ insertedNodes, deletedNodes }) {\n        if (!this.identityProvider) {\n            const set = this.createNodeSet();\n            const visit = (node) => set.delete(node);\n            deletedNodes.forEach(node => dfs(node, visit));\n            this.set([...set.values()]);\n            return;\n        }\n        const deletedNodesIdSet = new Set();\n        const deletedNodesVisitor = (node) => deletedNodesIdSet.add(this.identityProvider.getId(node.element).toString());\n        deletedNodes.forEach(node => dfs(node, deletedNodesVisitor));\n        const insertedNodesMap = new Map();\n        const insertedNodesVisitor = (node) => insertedNodesMap.set(this.identityProvider.getId(node.element).toString(), node);\n        insertedNodes.forEach(node => dfs(node, insertedNodesVisitor));\n        const nodes = [];\n        for (const node of this.nodes) {\n            const id = this.identityProvider.getId(node.element).toString();\n            const wasDeleted = deletedNodesIdSet.has(id);\n            if (!wasDeleted) {\n                nodes.push(node);\n            }\n            else {\n                const insertedNode = insertedNodesMap.get(id);\n                if (insertedNode && insertedNode.visible) {\n                    nodes.push(insertedNode);\n                }\n            }\n        }\n        if (this.nodes.length > 0 && nodes.length === 0) {\n            const node = this.getFirstViewElementWithTrait();\n            if (node) {\n                nodes.push(node);\n            }\n        }\n        this._set(nodes, true);\n    }\n    createNodeSet() {\n        const set = new Set();\n        for (const node of this.nodes) {\n            set.add(node);\n        }\n        return set;\n    }\n}\nclass TreeNodeListMouseController extends MouseController {\n    constructor(list, tree) {\n        super(list);\n        this.tree = tree;\n    }\n    onViewPointer(e) {\n        if (isButton(e.browserEvent.target) ||\n            isInputElement(e.browserEvent.target) ||\n            isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        const node = e.element;\n        if (!node) {\n            return super.onViewPointer(e);\n        }\n        if (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n            return super.onViewPointer(e);\n        }\n        const target = e.browserEvent.target;\n        const onTwistie = target.classList.contains('monaco-tl-twistie')\n            || (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && e.browserEvent.offsetX < 16);\n        let expandOnlyOnTwistieClick = false;\n        if (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n            expandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n        }\n        else {\n            expandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n        }\n        if (expandOnlyOnTwistieClick && !onTwistie && e.browserEvent.detail !== 2) {\n            return super.onViewPointer(e);\n        }\n        if (!this.tree.expandOnDoubleClick && e.browserEvent.detail === 2) {\n            return super.onViewPointer(e);\n        }\n        if (node.collapsible) {\n            const location = this.tree.getNodeLocation(node);\n            const recursive = e.browserEvent.altKey;\n            this.tree.setFocus([location]);\n            this.tree.toggleCollapsed(location, recursive);\n            if (expandOnlyOnTwistieClick && onTwistie) {\n                // Do not set this before calling a handler on the super class, because it will reject it as handled\n                e.browserEvent.isHandledByList = true;\n                return;\n            }\n        }\n        super.onViewPointer(e);\n    }\n    onDoubleClick(e) {\n        const onTwistie = e.browserEvent.target.classList.contains('monaco-tl-twistie');\n        if (onTwistie || !this.tree.expandOnDoubleClick) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        super.onDoubleClick(e);\n    }\n}\n/**\n * We use this List subclass to restore selection and focus as nodes\n * get rendered in the list, possibly due to a node expand() call.\n */\nclass TreeNodeList extends List {\n    constructor(user, container, virtualDelegate, renderers, focusTrait, selectionTrait, anchorTrait, options) {\n        super(user, container, virtualDelegate, renderers, options);\n        this.focusTrait = focusTrait;\n        this.selectionTrait = selectionTrait;\n        this.anchorTrait = anchorTrait;\n    }\n    createMouseController(options) {\n        return new TreeNodeListMouseController(this, options.tree);\n    }\n    splice(start, deleteCount, elements = []) {\n        super.splice(start, deleteCount, elements);\n        if (elements.length === 0) {\n            return;\n        }\n        const additionalFocus = [];\n        const additionalSelection = [];\n        let anchor;\n        elements.forEach((node, index) => {\n            if (this.focusTrait.has(node)) {\n                additionalFocus.push(start + index);\n            }\n            if (this.selectionTrait.has(node)) {\n                additionalSelection.push(start + index);\n            }\n            if (this.anchorTrait.has(node)) {\n                anchor = start + index;\n            }\n        });\n        if (additionalFocus.length > 0) {\n            super.setFocus(distinct([...super.getFocus(), ...additionalFocus]));\n        }\n        if (additionalSelection.length > 0) {\n            super.setSelection(distinct([...super.getSelection(), ...additionalSelection]));\n        }\n        if (typeof anchor === 'number') {\n            super.setAnchor(anchor);\n        }\n    }\n    setFocus(indexes, browserEvent, fromAPI = false) {\n        super.setFocus(indexes, browserEvent);\n        if (!fromAPI) {\n            this.focusTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setSelection(indexes, browserEvent, fromAPI = false) {\n        super.setSelection(indexes, browserEvent);\n        if (!fromAPI) {\n            this.selectionTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setAnchor(index, fromAPI = false) {\n        super.setAnchor(index);\n        if (!fromAPI) {\n            if (typeof index === 'undefined') {\n                this.anchorTrait.set([]);\n            }\n            else {\n                this.anchorTrait.set([this.element(index)]);\n            }\n        }\n    }\n}\nexport class AbstractTree {\n    get onDidChangeFocus() { return this.eventBufferer.wrapEvent(this.focus.onDidChange); }\n    get onDidChangeSelection() { return this.eventBufferer.wrapEvent(this.selection.onDidChange); }\n    get onMouseDblClick() { return Event.filter(Event.map(this.view.onMouseDblClick, asTreeMouseEvent), e => e.target !== TreeMouseEventTarget.Filter); }\n    get onPointer() { return Event.map(this.view.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.view.onDidFocus; }\n    get onDidChangeModel() { return Event.signal(this.model.onDidSplice); }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get findMode() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.mode) !== null && _b !== void 0 ? _b : TreeFindMode.Highlight; }\n    set findMode(findMode) { if (this.findController) {\n        this.findController.mode = findMode;\n    } }\n    get findMatchType() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.matchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy; }\n    set findMatchType(findFuzzy) { if (this.findController) {\n        this.findController.matchType = findFuzzy;\n    } }\n    get expandOnDoubleClick() { return typeof this._options.expandOnDoubleClick === 'undefined' ? true : this._options.expandOnDoubleClick; }\n    get expandOnlyOnTwistieClick() { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? true : this._options.expandOnlyOnTwistieClick; }\n    get onDidDispose() { return this.view.onDidDispose; }\n    constructor(_user, container, delegate, renderers, _options = {}) {\n        var _a;\n        this._user = _user;\n        this._options = _options;\n        this.eventBufferer = new EventBufferer();\n        this.onDidChangeFindOpenState = Event.None;\n        this.disposables = new DisposableStore();\n        this._onWillRefilter = new Emitter();\n        this.onWillRefilter = this._onWillRefilter.event;\n        this._onDidUpdateOptions = new Emitter();\n        const treeDelegate = new ComposedTreeDelegate(delegate);\n        const onDidChangeCollapseStateRelay = new Relay();\n        const onDidChangeActiveNodes = new Relay();\n        const activeNodes = this.disposables.add(new EventCollection(onDidChangeActiveNodes.event));\n        const renderedIndentGuides = new SetMap();\n        this.renderers = renderers.map(r => new TreeRenderer(r, () => this.model, onDidChangeCollapseStateRelay.event, activeNodes, renderedIndentGuides, _options));\n        for (const r of this.renderers) {\n            this.disposables.add(r);\n        }\n        let filter;\n        if (_options.keyboardNavigationLabelProvider) {\n            filter = new FindFilter(this, _options.keyboardNavigationLabelProvider, _options.filter);\n            _options = Object.assign(Object.assign({}, _options), { filter: filter }); // TODO need typescript help here\n            this.disposables.add(filter);\n        }\n        this.focus = new Trait(() => this.view.getFocusedElements()[0], _options.identityProvider);\n        this.selection = new Trait(() => this.view.getSelectedElements()[0], _options.identityProvider);\n        this.anchor = new Trait(() => this.view.getAnchorElement(), _options.identityProvider);\n        this.view = new TreeNodeList(_user, container, treeDelegate, this.renderers, this.focus, this.selection, this.anchor, Object.assign(Object.assign({}, asListOptions(() => this.model, _options)), { tree: this }));\n        this.model = this.createModel(_user, this.view, _options);\n        onDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n        const onDidModelSplice = Event.forEach(this.model.onDidSplice, e => {\n            this.eventBufferer.bufferEvents(() => {\n                this.focus.onDidModelSplice(e);\n                this.selection.onDidModelSplice(e);\n            });\n        }, this.disposables);\n        // Make sure the `forEach` always runs\n        onDidModelSplice(() => null, null, this.disposables);\n        // Active nodes can change when the model changes or when focus or selection change.\n        // We debounce it with 0 delay since these events may fire in the same stack and we only\n        // want to run this once. It also doesn't matter if it runs on the next tick since it's only\n        // a nice to have UI feature.\n        onDidChangeActiveNodes.input = Event.chain(Event.any(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange))\n            .debounce(() => null, 0)\n            .map(() => {\n            const set = new Set();\n            for (const node of this.focus.getNodes()) {\n                set.add(node);\n            }\n            for (const node of this.selection.getNodes()) {\n                set.add(node);\n            }\n            return [...set.values()];\n        }).event;\n        if (_options.keyboardSupport !== false) {\n            const onKeyDown = Event.chain(this.view.onKeyDown)\n                .filter(e => !isInputElement(e.target))\n                .map(e => new StandardKeyboardEvent(e));\n            onKeyDown.filter(e => e.keyCode === 15 /* KeyCode.LeftArrow */).on(this.onLeftArrow, this, this.disposables);\n            onKeyDown.filter(e => e.keyCode === 17 /* KeyCode.RightArrow */).on(this.onRightArrow, this, this.disposables);\n            onKeyDown.filter(e => e.keyCode === 10 /* KeyCode.Space */).on(this.onSpace, this, this.disposables);\n        }\n        if (((_a = _options.findWidgetEnabled) !== null && _a !== void 0 ? _a : true) && _options.keyboardNavigationLabelProvider && _options.contextViewProvider) {\n            const opts = this.options.findWidgetStyles ? { styles: this.options.findWidgetStyles } : undefined;\n            this.findController = new FindController(this, this.model, this.view, filter, _options.contextViewProvider, opts);\n            this.focusNavigationFilter = node => this.findController.shouldAllowFocus(node);\n            this.onDidChangeFindOpenState = this.findController.onDidChangeOpenState;\n            this.disposables.add(this.findController);\n            this.onDidChangeFindMode = this.findController.onDidChangeMode;\n            this.onDidChangeFindMatchType = this.findController.onDidChangeMatchType;\n        }\n        else {\n            this.onDidChangeFindMode = Event.None;\n            this.onDidChangeFindMatchType = Event.None;\n        }\n        this.styleElement = createStyleSheet(this.view.getHTMLElement());\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        for (const renderer of this.renderers) {\n            renderer.updateOptions(optionsUpdate);\n        }\n        this.view.updateOptions(this._options);\n        (_a = this.findController) === null || _a === void 0 ? void 0 : _a.updateOptions(optionsUpdate);\n        this._onDidUpdateOptions.fire(this._options);\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    get options() {\n        return this._options;\n    }\n    // Widget\n    getHTMLElement() {\n        return this.view.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.view.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.view.scrollTop = scrollTop;\n    }\n    domFocus() {\n        this.view.domFocus();\n    }\n    layout(height, width) {\n        var _a;\n        this.view.layout(height, width);\n        if (isNumber(width)) {\n            (_a = this.findController) === null || _a === void 0 ? void 0 : _a.layout(width);\n        }\n    }\n    style(styles) {\n        const suffix = `.${this.view.domId}`;\n        const content = [];\n        if (styles.treeIndentGuidesStroke) {\n            content.push(`.monaco-list${suffix}:hover .monaco-tl-indent > .indent-guide, .monaco-list${suffix}.always .monaco-tl-indent > .indent-guide  { border-color: ${styles.treeInactiveIndentGuidesStroke}; }`);\n            content.push(`.monaco-list${suffix} .monaco-tl-indent > .indent-guide.active { border-color: ${styles.treeIndentGuidesStroke}; }`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n        this.view.style(styles);\n    }\n    // Tree navigation\n    getParentElement(location) {\n        const parentRef = this.model.getParentNodeLocation(location);\n        const parentNode = this.model.getNode(parentRef);\n        return parentNode.element;\n    }\n    getFirstElementChild(location) {\n        return this.model.getFirstElementChild(location);\n    }\n    // Tree\n    getNode(location) {\n        return this.model.getNode(location);\n    }\n    getNodeLocation(node) {\n        return this.model.getNodeLocation(node);\n    }\n    collapse(location, recursive = false) {\n        return this.model.setCollapsed(location, true, recursive);\n    }\n    expand(location, recursive = false) {\n        return this.model.setCollapsed(location, false, recursive);\n    }\n    toggleCollapsed(location, recursive = false) {\n        return this.model.setCollapsed(location, undefined, recursive);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsible) {\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    refilter() {\n        this._onWillRefilter.fire(undefined);\n        this.model.refilter();\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.selection.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setSelection(indexes, browserEvent, true);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.focus.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setFocus(indexes, browserEvent, true);\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    reveal(location, relativeTop) {\n        this.model.expandTo(location);\n        const index = this.model.getListIndex(location);\n        if (index === -1) {\n            return;\n        }\n        this.view.reveal(index, relativeTop);\n    }\n    // List\n    onLeftArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, true);\n        if (!didChange) {\n            const parentLocation = this.model.getParentNodeLocation(location);\n            if (!parentLocation) {\n                return;\n            }\n            const parentListIndex = this.model.getListIndex(parentLocation);\n            this.view.reveal(parentListIndex);\n            this.view.setFocus([parentListIndex]);\n        }\n    }\n    onRightArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, false);\n        if (!didChange) {\n            if (!node.children.some(child => child.visible)) {\n                return;\n            }\n            const [focusedIndex] = this.view.getFocus();\n            const firstChildIndex = focusedIndex + 1;\n            this.view.reveal(firstChildIndex);\n            this.view.setFocus([firstChildIndex]);\n        }\n    }\n    onSpace(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const recursive = e.browserEvent.altKey;\n        this.model.setCollapsed(location, undefined, recursive);\n    }\n    dispose() {\n        dispose(this.disposables);\n        this.view.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { ComposedTreeDelegate } from './abstractTree.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { CompressibleObjectTree, ObjectTree } from './objectTree.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { createCancelablePromise, Promises, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { isCancellationError, onUnexpectedError } from '../../../common/errors.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { isIterable } from '../../../common/types.js';\nfunction createAsyncDataTreeNode(props) {\n    return Object.assign(Object.assign({}, props), { children: [], refreshPromise: undefined, stale: true, slow: false, collapsedByDefault: undefined });\n}\nfunction isAncestor(ancestor, descendant) {\n    if (!descendant.parent) {\n        return false;\n    }\n    else if (descendant.parent === ancestor) {\n        return true;\n    }\n    else {\n        return isAncestor(ancestor, descendant.parent);\n    }\n}\nfunction intersects(node, other) {\n    return node === other || isAncestor(node, other) || isAncestor(other, node);\n}\nclass AsyncDataTreeNodeWrapper {\n    get element() { return this.node.element.element; }\n    get children() { return this.node.children.map(node => new AsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass AsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n    }\n}\nfunction asTreeEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        elements: e.elements.map(e => e.element)\n    };\n}\nfunction asTreeMouseEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        element: e.element && e.element.element,\n        target: e.target\n    };\n}\nclass AsyncDataTreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asAsyncDataTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new AsyncDataTreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass AsyncDataTreeNodeListDragAndDrop {\n    constructor(dnd) {\n        this.dnd = dnd;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asAsyncDataTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.dnd.drop(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n}\nfunction asObjectTreeOptions(options) {\n    return options && Object.assign(Object.assign({}, options), { collapseByDefault: true, identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new AsyncDataTreeNodeListDragAndDrop(options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getPosInSet: undefined, getSetSize: undefined, getRole: options.accessibilityProvider.getRole ? (el) => {\n                return options.accessibilityProvider.getRole(el.element);\n            } : () => 'treeitem', isChecked: options.accessibilityProvider.isChecked ? (e) => {\n                var _a;\n                return !!((_a = options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.isChecked(e.element));\n            } : undefined, getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider.getAriaLevel && (node => {\n                return options.accessibilityProvider.getAriaLevel(node.element);\n            }), getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), filter: options.filter && {\n            filter(e, parentVisibility) {\n                return options.filter.filter(e.element, parentVisibility);\n            }\n        }, keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(e) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element);\n            } }), sorter: undefined, expandOnlyOnTwistieClick: typeof options.expandOnlyOnTwistieClick === 'undefined' ? undefined : (typeof options.expandOnlyOnTwistieClick !== 'function' ? options.expandOnlyOnTwistieClick : (e => options.expandOnlyOnTwistieClick(e.element))), defaultFindVisibility: e => {\n            if (e.hasChildren && e.stale) {\n                return 1 /* TreeVisibility.Visible */;\n            }\n            else if (typeof options.defaultFindVisibility === 'number') {\n                return options.defaultFindVisibility;\n            }\n            else if (typeof options.defaultFindVisibility === 'undefined') {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n            else {\n                return options.defaultFindVisibility(e.element);\n            }\n        } });\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\nexport class AsyncDataTree {\n    get onDidChangeFocus() { return Event.map(this.tree.onDidChangeFocus, asTreeEvent); }\n    get onDidChangeSelection() { return Event.map(this.tree.onDidChangeSelection, asTreeEvent); }\n    get onMouseDblClick() { return Event.map(this.tree.onMouseDblClick, asTreeMouseEvent); }\n    get onPointer() { return Event.map(this.tree.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.tree.onDidFocus; }\n    /**\n     * To be used internally only!\n     * @deprecated\n     */\n    get onDidChangeModel() { return this.tree.onDidChangeModel; }\n    get onDidChangeCollapseState() { return this.tree.onDidChangeCollapseState; }\n    get onDidChangeFindOpenState() { return this.tree.onDidChangeFindOpenState; }\n    get onDidDispose() { return this.tree.onDidDispose; }\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        this.user = user;\n        this.dataSource = dataSource;\n        this.nodes = new Map();\n        this.subTreeRefreshPromises = new Map();\n        this.refreshPromises = new Map();\n        this._onDidRender = new Emitter();\n        this._onDidChangeNodeSlowState = new Emitter();\n        this.nodeMapper = new WeakMapper(node => new AsyncDataTreeNodeWrapper(node));\n        this.disposables = new DisposableStore();\n        this.identityProvider = options.identityProvider;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.sorter = options.sorter;\n        this.collapseByDefault = options.collapseByDefault;\n        this.tree = this.createTree(user, container, delegate, renderers, options);\n        this.onDidChangeFindMode = this.tree.onDidChangeFindMode;\n        this.root = createAsyncDataTreeNode({\n            element: undefined,\n            parent: null,\n            hasChildren: true\n        });\n        if (this.identityProvider) {\n            this.root = Object.assign(Object.assign({}, this.root), { id: null });\n        }\n        this.nodes.set(null, this.root);\n        this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState, this, this.disposables);\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new AsyncDataTreeRenderer(r, this.nodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asObjectTreeOptions(options) || {};\n        return new ObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    // Widget\n    getHTMLElement() {\n        return this.tree.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.tree.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.tree.scrollTop = scrollTop;\n    }\n    domFocus() {\n        this.tree.domFocus();\n    }\n    layout(height, width) {\n        this.tree.layout(height, width);\n    }\n    style(styles) {\n        this.tree.style(styles);\n    }\n    // Model\n    getInput() {\n        return this.root.element;\n    }\n    setInput(input, viewState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.refreshPromises.forEach(promise => promise.cancel());\n            this.refreshPromises.clear();\n            this.root.element = input;\n            const viewStateContext = viewState && { viewState, focus: [], selection: [] };\n            yield this._updateChildren(input, true, false, viewStateContext);\n            if (viewStateContext) {\n                this.tree.setFocus(viewStateContext.focus);\n                this.tree.setSelection(viewStateContext.selection);\n            }\n            if (viewState && typeof viewState.scrollTop === 'number') {\n                this.scrollTop = viewState.scrollTop;\n            }\n        });\n    }\n    _updateChildren(element = this.root.element, recursive = true, rerender = false, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            yield this.refreshAndRenderNode(node, recursive, viewStateContext, options);\n            if (rerender) {\n                try {\n                    this.tree.rerender(node);\n                }\n                catch (_a) {\n                    // missing nodes are fine, this could've resulted from\n                    // parallel refresh calls, removing `node` altogether\n                }\n            }\n        });\n    }\n    // View\n    rerender(element) {\n        if (element === undefined || element === this.root.element) {\n            this.tree.rerender();\n            return;\n        }\n        const node = this.getDataNode(element);\n        this.tree.rerender(node);\n    }\n    // Tree\n    getNode(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getNode(dataNode === this.root ? null : dataNode);\n        return this.nodeMapper.map(node);\n    }\n    collapse(element, recursive = false) {\n        const node = this.getDataNode(element);\n        return this.tree.collapse(node === this.root ? null : node, recursive);\n    }\n    expand(element, recursive = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            if (this.tree.hasElement(node) && !this.tree.isCollapsible(node)) {\n                return false;\n            }\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            if (node !== this.root && !node.refreshPromise && !this.tree.isCollapsed(node)) {\n                return false;\n            }\n            const result = this.tree.expand(node === this.root ? null : node, recursive);\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            return result;\n        });\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setSelection(nodes, browserEvent);\n    }\n    getSelection() {\n        const nodes = this.tree.getSelection();\n        return nodes.map(n => n.element);\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setFocus(nodes, browserEvent);\n    }\n    getFocus() {\n        const nodes = this.tree.getFocus();\n        return nodes.map(n => n.element);\n    }\n    reveal(element, relativeTop) {\n        this.tree.reveal(this.getDataNode(element), relativeTop);\n    }\n    // Tree navigation\n    getParentElement(element) {\n        const node = this.tree.getParentElement(this.getDataNode(element));\n        return (node && node.element);\n    }\n    getFirstElementChild(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getFirstElementChild(dataNode === this.root ? null : dataNode);\n        return (node && node.element);\n    }\n    // Implementation\n    getDataNode(element) {\n        const node = this.nodes.get((element === this.root.element ? null : element));\n        if (!node) {\n            throw new TreeError(this.user, `Data tree node not found: ${element}`);\n        }\n        return node;\n    }\n    refreshAndRenderNode(node, recursive, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.refreshNode(node, recursive, viewStateContext);\n            this.render(node, viewStateContext, options);\n        });\n    }\n    refreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let result;\n            this.subTreeRefreshPromises.forEach((refreshPromise, refreshNode) => {\n                if (!result && intersects(refreshNode, node)) {\n                    result = refreshPromise.then(() => this.refreshNode(node, recursive, viewStateContext));\n                }\n            });\n            if (result) {\n                return result;\n            }\n            if (node !== this.root) {\n                const treeNode = this.tree.getNode(node);\n                if (treeNode.collapsed) {\n                    node.hasChildren = !!this.dataSource.hasChildren(node.element);\n                    node.stale = true;\n                    return;\n                }\n            }\n            return this.doRefreshSubTree(node, recursive, viewStateContext);\n        });\n    }\n    doRefreshSubTree(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let done;\n            node.refreshPromise = new Promise(c => done = c);\n            this.subTreeRefreshPromises.set(node, node.refreshPromise);\n            node.refreshPromise.finally(() => {\n                node.refreshPromise = undefined;\n                this.subTreeRefreshPromises.delete(node);\n            });\n            try {\n                const childrenToRefresh = yield this.doRefreshNode(node, recursive, viewStateContext);\n                node.stale = false;\n                yield Promises.settled(childrenToRefresh.map(child => this.doRefreshSubTree(child, recursive, viewStateContext)));\n            }\n            finally {\n                done();\n            }\n        });\n    }\n    doRefreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            node.hasChildren = !!this.dataSource.hasChildren(node.element);\n            let childrenPromise;\n            if (!node.hasChildren) {\n                childrenPromise = Promise.resolve(Iterable.empty());\n            }\n            else {\n                const children = this.doGetChildren(node);\n                if (isIterable(children)) {\n                    childrenPromise = Promise.resolve(children);\n                }\n                else {\n                    const slowTimeout = timeout(800);\n                    slowTimeout.then(() => {\n                        node.slow = true;\n                        this._onDidChangeNodeSlowState.fire(node);\n                    }, _ => null);\n                    childrenPromise = children.finally(() => slowTimeout.cancel());\n                }\n            }\n            try {\n                const children = yield childrenPromise;\n                return this.setChildren(node, children, recursive, viewStateContext);\n            }\n            catch (err) {\n                if (node !== this.root && this.tree.hasElement(node)) {\n                    this.tree.collapse(node);\n                }\n                if (isCancellationError(err)) {\n                    return [];\n                }\n                throw err;\n            }\n            finally {\n                if (node.slow) {\n                    node.slow = false;\n                    this._onDidChangeNodeSlowState.fire(node);\n                }\n            }\n        });\n    }\n    doGetChildren(node) {\n        let result = this.refreshPromises.get(node);\n        if (result) {\n            return result;\n        }\n        const children = this.dataSource.getChildren(node.element);\n        if (isIterable(children)) {\n            return this.processChildren(children);\n        }\n        else {\n            result = createCancelablePromise(() => __awaiter(this, void 0, void 0, function* () { return this.processChildren(yield children); }));\n            this.refreshPromises.set(node, result);\n            return result.finally(() => { this.refreshPromises.delete(node); });\n        }\n    }\n    _onDidChangeCollapseState({ node, deep }) {\n        if (node.element === null) {\n            return;\n        }\n        if (!node.collapsed && node.element.stale) {\n            if (deep) {\n                this.collapse(node.element.element);\n            }\n            else {\n                this.refreshAndRenderNode(node.element, false)\n                    .catch(onUnexpectedError);\n            }\n        }\n    }\n    setChildren(node, childrenElementsIterable, recursive, viewStateContext) {\n        const childrenElements = [...childrenElementsIterable];\n        // perf: if the node was and still is a leaf, avoid all this hassle\n        if (node.children.length === 0 && childrenElements.length === 0) {\n            return [];\n        }\n        const nodesToForget = new Map();\n        const childrenTreeNodesById = new Map();\n        for (const child of node.children) {\n            nodesToForget.set(child.element, child);\n            if (this.identityProvider) {\n                const collapsed = this.tree.isCollapsed(child);\n                childrenTreeNodesById.set(child.id, { node: child, collapsed });\n            }\n        }\n        const childrenToRefresh = [];\n        const children = childrenElements.map(element => {\n            const hasChildren = !!this.dataSource.hasChildren(element);\n            if (!this.identityProvider) {\n                const asyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, hasChildren });\n                if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const id = this.identityProvider.getId(element).toString();\n            const result = childrenTreeNodesById.get(id);\n            if (result) {\n                const asyncDataTreeNode = result.node;\n                nodesToForget.delete(asyncDataTreeNode.element);\n                this.nodes.delete(asyncDataTreeNode.element);\n                this.nodes.set(element, asyncDataTreeNode);\n                asyncDataTreeNode.element = element;\n                asyncDataTreeNode.hasChildren = hasChildren;\n                if (recursive) {\n                    if (result.collapsed) {\n                        asyncDataTreeNode.children.forEach(node => dfs(node, node => this.nodes.delete(node.element)));\n                        asyncDataTreeNode.children.splice(0, asyncDataTreeNode.children.length);\n                        asyncDataTreeNode.stale = true;\n                    }\n                    else {\n                        childrenToRefresh.push(asyncDataTreeNode);\n                    }\n                }\n                else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const childAsyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, id, hasChildren });\n            if (viewStateContext && viewStateContext.viewState.focus && viewStateContext.viewState.focus.indexOf(id) > -1) {\n                viewStateContext.focus.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.selection && viewStateContext.viewState.selection.indexOf(id) > -1) {\n                viewStateContext.selection.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.expanded && viewStateContext.viewState.expanded.indexOf(id) > -1) {\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                childAsyncDataTreeNode.collapsedByDefault = false;\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            return childAsyncDataTreeNode;\n        });\n        for (const node of nodesToForget.values()) {\n            dfs(node, node => this.nodes.delete(node.element));\n        }\n        for (const child of children) {\n            this.nodes.set(child.element, child);\n        }\n        node.children.splice(0, node.children.length, ...children);\n        // TODO@joao this doesn't take filter into account\n        if (node !== this.root && this.autoExpandSingleChildren && children.length === 1 && childrenToRefresh.length === 0) {\n            children[0].collapsedByDefault = false;\n            childrenToRefresh.push(children[0]);\n        }\n        return childrenToRefresh;\n    }\n    render(node, viewStateContext, options) {\n        const children = node.children.map(node => this.asTreeElement(node, viewStateContext));\n        const objectTreeOptions = options && Object.assign(Object.assign({}, options), { diffIdentityProvider: options.diffIdentityProvider && {\n                getId(node) {\n                    return options.diffIdentityProvider.getId(node.element);\n                }\n            } });\n        this.tree.setChildren(node === this.root ? null : node, children, objectTreeOptions);\n        if (node !== this.root) {\n            this.tree.setCollapsible(node, node.hasChildren);\n        }\n        this._onDidRender.fire();\n    }\n    asTreeElement(node, viewStateContext) {\n        if (node.stale) {\n            return {\n                element: node,\n                collapsible: node.hasChildren,\n                collapsed: true\n            };\n        }\n        let collapsed;\n        if (viewStateContext && viewStateContext.viewState.expanded && node.id && viewStateContext.viewState.expanded.indexOf(node.id) > -1) {\n            collapsed = false;\n        }\n        else {\n            collapsed = node.collapsedByDefault;\n        }\n        node.collapsedByDefault = undefined;\n        return {\n            element: node,\n            children: node.hasChildren ? Iterable.map(node.children, child => this.asTreeElement(child, viewStateContext)) : [],\n            collapsible: node.hasChildren,\n            collapsed\n        };\n    }\n    processChildren(children) {\n        if (this.sorter) {\n            children = [...children].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return children;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nclass CompressibleAsyncDataTreeNodeWrapper {\n    get element() {\n        return {\n            elements: this.node.element.elements.map(e => e.element),\n            incompressible: this.node.element.incompressible\n        };\n    }\n    get children() { return this.node.children.map(node => new CompressibleAsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass CompressibleAsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, compressibleNodeMapperProvider, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.compressibleNodeMapperProvider = compressibleNodeMapperProvider;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.disposables = [];\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderCompressedElements(node, index, templateData, height) {\n        this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeCompressedElements(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.disposables = dispose(this.disposables);\n    }\n}\nfunction asCompressibleObjectTreeOptions(options) {\n    const objectTreeOptions = options && asObjectTreeOptions(options);\n    return objectTreeOptions && Object.assign(Object.assign({}, objectTreeOptions), { keyboardNavigationLabelProvider: objectTreeOptions.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, objectTreeOptions.keyboardNavigationLabelProvider), { getCompressedNodeKeyboardNavigationLabel(els) {\n                return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(els.map(e => e.element));\n            } }) });\n}\nexport class CompressibleAsyncDataTree extends AsyncDataTree {\n    constructor(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options = {}) {\n        super(user, container, virtualDelegate, renderers, dataSource, options);\n        this.compressionDelegate = compressionDelegate;\n        this.compressibleNodeMapper = new WeakMapper(node => new CompressibleAsyncDataTreeNodeWrapper(node));\n        this.filter = options.filter;\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new CompressibleAsyncDataTreeRenderer(r, this.nodeMapper, () => this.compressibleNodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asCompressibleObjectTreeOptions(options) || {};\n        return new CompressibleObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    asTreeElement(node, viewStateContext) {\n        return Object.assign({ incompressible: this.compressionDelegate.isIncompressible(node.element) }, super.asTreeElement(node, viewStateContext));\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    render(node, viewStateContext) {\n        if (!this.identityProvider) {\n            return super.render(node, viewStateContext);\n        }\n        // Preserve traits across compressions. Hacky but does the trick.\n        // This is hard to fix properly since it requires rewriting the traits\n        // across trees and lists. Let's just keep it this way for now.\n        const getId = (element) => this.identityProvider.getId(element).toString();\n        const getUncompressedIds = (nodes) => {\n            const result = new Set();\n            for (const node of nodes) {\n                const compressedNode = this.tree.getCompressedTreeNode(node === this.root ? null : node);\n                if (!compressedNode.element) {\n                    continue;\n                }\n                for (const node of compressedNode.element.elements) {\n                    result.add(getId(node.element));\n                }\n            }\n            return result;\n        };\n        const oldSelection = getUncompressedIds(this.tree.getSelection());\n        const oldFocus = getUncompressedIds(this.tree.getFocus());\n        super.render(node, viewStateContext);\n        const selection = this.getSelection();\n        let didChangeSelection = false;\n        const focus = this.getFocus();\n        let didChangeFocus = false;\n        const visit = (node) => {\n            const compressedNode = node.element;\n            if (compressedNode) {\n                for (let i = 0; i < compressedNode.elements.length; i++) {\n                    const id = getId(compressedNode.elements[i].element);\n                    const element = compressedNode.elements[compressedNode.elements.length - 1].element;\n                    // github.com/microsoft/vscode/issues/85938\n                    if (oldSelection.has(id) && selection.indexOf(element) === -1) {\n                        selection.push(element);\n                        didChangeSelection = true;\n                    }\n                    if (oldFocus.has(id) && focus.indexOf(element) === -1) {\n                        focus.push(element);\n                        didChangeFocus = true;\n                    }\n                }\n            }\n            node.children.forEach(visit);\n        };\n        visit(this.tree.getCompressedTreeNode(node === this.root ? null : node));\n        if (didChangeSelection) {\n            this.setSelection(selection);\n        }\n        if (didChangeFocus) {\n            this.setFocus(focus);\n        }\n    }\n    // For compressed async data trees, `TreeVisibility.Recurse` doesn't currently work\n    // and we have to filter everything beforehand\n    // Related to #85193 and #85835\n    processChildren(children) {\n        if (this.filter) {\n            children = Iterable.filter(children, e => {\n                const result = this.filter.filter(e, 1 /* TreeVisibility.Visible */);\n                const visibility = getVisibility(result);\n                if (visibility === 2 /* TreeVisibility.Recurse */) {\n                    throw new Error('Recursive tree visibility not supported in async data compressed trees');\n                }\n                return visibility === 1 /* TreeVisibility.Visible */;\n            });\n        }\n        return super.processChildren(children);\n    }\n}\nfunction getVisibility(filterResult) {\n    if (typeof filterResult === 'boolean') {\n        return filterResult ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n    }\n    else if (isFilterResult(filterResult)) {\n        return getVisibleState(filterResult.visibility);\n    }\n    else {\n        return getVisibleState(filterResult);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AbstractTree } from './abstractTree.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nexport class DataTree extends AbstractTree {\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n        this.dataSource = dataSource;\n        this.identityProvider = options.identityProvider;\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TreeError } from './tree.js';\nimport { splice, tail2 } from '../../../common/arrays.js';\nimport { Delayer } from '../../../common/async.js';\nimport { MicrotaskDelay } from '../../../common/symbols.js';\nimport { LcsDiff } from '../../../common/diff/diff.js';\nimport { Emitter, EventBufferer } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport function isFilterResult(obj) {\n    return typeof obj === 'object' && 'visibility' in obj && 'data' in obj;\n}\nexport function getVisibleState(visibility) {\n    switch (visibility) {\n        case true: return 1 /* TreeVisibility.Visible */;\n        case false: return 0 /* TreeVisibility.Hidden */;\n        default: return visibility;\n    }\n}\nfunction isCollapsibleStateUpdate(update) {\n    return typeof update.collapsible === 'boolean';\n}\nexport class IndexTreeModel {\n    constructor(user, list, rootElement, options = {}) {\n        this.user = user;\n        this.list = list;\n        this.rootRef = [];\n        this.eventBufferer = new EventBufferer();\n        this._onDidChangeCollapseState = new Emitter();\n        this.onDidChangeCollapseState = this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);\n        this._onDidChangeRenderNodeCount = new Emitter();\n        this.onDidChangeRenderNodeCount = this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);\n        this._onDidSplice = new Emitter();\n        this.onDidSplice = this._onDidSplice.event;\n        this.refilterDelayer = new Delayer(MicrotaskDelay);\n        this.collapseByDefault = typeof options.collapseByDefault === 'undefined' ? false : options.collapseByDefault;\n        this.filter = options.filter;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.root = {\n            parent: undefined,\n            element: rootElement,\n            children: [],\n            depth: 0,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: false,\n            collapsed: false,\n            renderNodeCount: 0,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n    }\n    splice(location, deleteCount, toInsert = Iterable.empty(), options = {}) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        if (options.diffIdentityProvider) {\n            this.spliceSmart(options.diffIdentityProvider, location, deleteCount, toInsert, options);\n        }\n        else {\n            this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n    }\n    spliceSmart(identity, location, deleteCount, toInsertIterable, options, recurseLevels) {\n        var _a;\n        if (toInsertIterable === void 0) { toInsertIterable = Iterable.empty(); }\n        if (recurseLevels === void 0) { recurseLevels = (_a = options.diffDepth) !== null && _a !== void 0 ? _a : 0; }\n        const { parentNode } = this.getParentNodeWithListIndex(location);\n        if (!parentNode.lastDiffIds) {\n            return this.spliceSimple(location, deleteCount, toInsertIterable, options);\n        }\n        const toInsert = [...toInsertIterable];\n        const index = location[location.length - 1];\n        const diff = new LcsDiff({ getElements: () => parentNode.lastDiffIds }, {\n            getElements: () => [\n                ...parentNode.children.slice(0, index),\n                ...toInsert,\n                ...parentNode.children.slice(index + deleteCount),\n            ].map(e => identity.getId(e.element).toString())\n        }).ComputeDiff(false);\n        // if we were given a 'best effort' diff, use default behavior\n        if (diff.quitEarly) {\n            parentNode.lastDiffIds = undefined;\n            return this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n        const locationPrefix = location.slice(0, -1);\n        const recurseSplice = (fromOriginal, fromModified, count) => {\n            if (recurseLevels > 0) {\n                for (let i = 0; i < count; i++) {\n                    fromOriginal--;\n                    fromModified--;\n                    this.spliceSmart(identity, [...locationPrefix, fromOriginal, 0], Number.MAX_SAFE_INTEGER, toInsert[fromModified].children, options, recurseLevels - 1);\n                }\n            }\n        };\n        let lastStartO = Math.min(parentNode.children.length, index + deleteCount);\n        let lastStartM = toInsert.length;\n        for (const change of diff.changes.sort((a, b) => b.originalStart - a.originalStart)) {\n            recurseSplice(lastStartO, lastStartM, lastStartO - (change.originalStart + change.originalLength));\n            lastStartO = change.originalStart;\n            lastStartM = change.modifiedStart - index;\n            this.spliceSimple([...locationPrefix, lastStartO], change.originalLength, Iterable.slice(toInsert, lastStartM, lastStartM + change.modifiedLength), options);\n        }\n        // at this point, startO === startM === count since any remaining prefix should match\n        recurseSplice(lastStartO, lastStartM, lastStartO);\n    }\n    spliceSimple(location, deleteCount, toInsert = Iterable.empty(), { onDidCreateNode, onDidDeleteNode, diffIdentityProvider }) {\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const treeListElementsToInsert = [];\n        const nodesToInsertIterator = Iterable.map(toInsert, el => this.createTreeNode(el, parentNode, parentNode.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, revealed, treeListElementsToInsert, onDidCreateNode));\n        const lastIndex = location[location.length - 1];\n        const lastHadChildren = parentNode.children.length > 0;\n        // figure out what's the visible child start index right before the\n        // splice point\n        let visibleChildStartIndex = 0;\n        for (let i = lastIndex; i >= 0 && i < parentNode.children.length; i--) {\n            const child = parentNode.children[i];\n            if (child.visible) {\n                visibleChildStartIndex = child.visibleChildIndex;\n                break;\n            }\n        }\n        const nodesToInsert = [];\n        let insertedVisibleChildrenCount = 0;\n        let renderNodeCount = 0;\n        for (const child of nodesToInsertIterator) {\n            nodesToInsert.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildStartIndex + insertedVisibleChildrenCount++;\n            }\n        }\n        const deletedNodes = splice(parentNode.children, lastIndex, deleteCount, nodesToInsert);\n        if (!diffIdentityProvider) {\n            parentNode.lastDiffIds = undefined;\n        }\n        else if (parentNode.lastDiffIds) {\n            splice(parentNode.lastDiffIds, lastIndex, deleteCount, nodesToInsert.map(n => diffIdentityProvider.getId(n.element).toString()));\n        }\n        else {\n            parentNode.lastDiffIds = parentNode.children.map(n => diffIdentityProvider.getId(n.element).toString());\n        }\n        // figure out what is the count of deleted visible children\n        let deletedVisibleChildrenCount = 0;\n        for (const child of deletedNodes) {\n            if (child.visible) {\n                deletedVisibleChildrenCount++;\n            }\n        }\n        // and adjust for all visible children after the splice point\n        if (deletedVisibleChildrenCount !== 0) {\n            for (let i = lastIndex + nodesToInsert.length; i < parentNode.children.length; i++) {\n                const child = parentNode.children[i];\n                if (child.visible) {\n                    child.visibleChildIndex -= deletedVisibleChildrenCount;\n                }\n            }\n        }\n        // update parent's visible children count\n        parentNode.visibleChildrenCount += insertedVisibleChildrenCount - deletedVisibleChildrenCount;\n        if (revealed && visible) {\n            const visibleDeleteCount = deletedNodes.reduce((r, node) => r + (node.visible ? node.renderNodeCount : 0), 0);\n            this._updateAncestorsRenderNodeCount(parentNode, renderNodeCount - visibleDeleteCount);\n            this.list.splice(listIndex, visibleDeleteCount, treeListElementsToInsert);\n        }\n        if (deletedNodes.length > 0 && onDidDeleteNode) {\n            const visit = (node) => {\n                onDidDeleteNode(node);\n                node.children.forEach(visit);\n            };\n            deletedNodes.forEach(visit);\n        }\n        this._onDidSplice.fire({ insertedNodes: nodesToInsert, deletedNodes });\n        const currentlyHasChildren = parentNode.children.length > 0;\n        if (lastHadChildren !== currentlyHasChildren) {\n            this.setCollapsible(location.slice(0, -1), currentlyHasChildren);\n        }\n        let node = parentNode;\n        while (node) {\n            if (node.visibility === 2 /* TreeVisibility.Recurse */) {\n                // delayed to avoid excessive refiltering, see #135941\n                this.refilterDelayer.trigger(() => this.refilter());\n                break;\n            }\n            node = node.parent;\n        }\n    }\n    rerender(location) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        if (node.visible && revealed) {\n            this.list.splice(listIndex, 1, [node]);\n        }\n    }\n    has(location) {\n        return this.hasTreeNode(location);\n    }\n    getListIndex(location) {\n        const { listIndex, visible, revealed } = this.getTreeNodeWithListIndex(location);\n        return visible && revealed ? listIndex : -1;\n    }\n    getListRenderCount(location) {\n        return this.getTreeNode(location).renderNodeCount;\n    }\n    isCollapsible(location) {\n        return this.getTreeNode(location).collapsible;\n    }\n    setCollapsible(location, collapsible) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsible === 'undefined') {\n            collapsible = !node.collapsible;\n        }\n        const update = { collapsible };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    isCollapsed(location) {\n        return this.getTreeNode(location).collapsed;\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsed === 'undefined') {\n            collapsed = !node.collapsed;\n        }\n        const update = { collapsed, recursive: recursive || false };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    _setCollapseState(location, update) {\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        const result = this._setListNodeCollapseState(node, listIndex, revealed, update);\n        if (node !== this.root && this.autoExpandSingleChildren && result && !isCollapsibleStateUpdate(update) && node.collapsible && !node.collapsed && !update.recursive) {\n            let onlyVisibleChildIndex = -1;\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                if (child.visible) {\n                    if (onlyVisibleChildIndex > -1) {\n                        onlyVisibleChildIndex = -1;\n                        break;\n                    }\n                    else {\n                        onlyVisibleChildIndex = i;\n                    }\n                }\n            }\n            if (onlyVisibleChildIndex > -1) {\n                this._setCollapseState([...location, onlyVisibleChildIndex], update);\n            }\n        }\n        return result;\n    }\n    _setListNodeCollapseState(node, listIndex, revealed, update) {\n        const result = this._setNodeCollapseState(node, update, false);\n        if (!revealed || !node.visible || !result) {\n            return result;\n        }\n        const previousRenderNodeCount = node.renderNodeCount;\n        const toInsert = this.updateNodeAfterCollapseChange(node);\n        const deleteCount = previousRenderNodeCount - (listIndex === -1 ? 0 : 1);\n        this.list.splice(listIndex + 1, deleteCount, toInsert.slice(1));\n        return result;\n    }\n    _setNodeCollapseState(node, update, deep) {\n        let result;\n        if (node === this.root) {\n            result = false;\n        }\n        else {\n            if (isCollapsibleStateUpdate(update)) {\n                result = node.collapsible !== update.collapsible;\n                node.collapsible = update.collapsible;\n            }\n            else if (!node.collapsible) {\n                result = false;\n            }\n            else {\n                result = node.collapsed !== update.collapsed;\n                node.collapsed = update.collapsed;\n            }\n            if (result) {\n                this._onDidChangeCollapseState.fire({ node, deep });\n            }\n        }\n        if (!isCollapsibleStateUpdate(update) && update.recursive) {\n            for (const child of node.children) {\n                result = this._setNodeCollapseState(child, update, true) || result;\n            }\n        }\n        return result;\n    }\n    expandTo(location) {\n        this.eventBufferer.bufferEvents(() => {\n            let node = this.getTreeNode(location);\n            while (node.parent) {\n                node = node.parent;\n                location = location.slice(0, location.length - 1);\n                if (node.collapsed) {\n                    this._setCollapseState(location, { collapsed: false, recursive: false });\n                }\n            }\n        });\n    }\n    refilter() {\n        const previousRenderNodeCount = this.root.renderNodeCount;\n        const toInsert = this.updateNodeAfterFilterChange(this.root);\n        this.list.splice(0, previousRenderNodeCount, toInsert);\n        this.refilterDelayer.cancel();\n    }\n    createTreeNode(treeElement, parent, parentVisibility, revealed, treeListElements, onDidCreateNode) {\n        const node = {\n            parent,\n            element: treeElement.element,\n            children: [],\n            depth: parent.depth + 1,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : (typeof treeElement.collapsed !== 'undefined'),\n            collapsed: typeof treeElement.collapsed === 'undefined' ? this.collapseByDefault : treeElement.collapsed,\n            renderNodeCount: 1,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n        const visibility = this._filterNode(node, parentVisibility);\n        node.visibility = visibility;\n        if (revealed) {\n            treeListElements.push(node);\n        }\n        const childElements = treeElement.children || Iterable.empty();\n        const childRevealed = revealed && visibility !== 0 /* TreeVisibility.Hidden */ && !node.collapsed;\n        let visibleChildrenCount = 0;\n        let renderNodeCount = 1;\n        for (const el of childElements) {\n            const child = this.createTreeNode(el, node, visibility, childRevealed, treeListElements, onDidCreateNode);\n            node.children.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildrenCount++;\n            }\n        }\n        node.collapsible = node.collapsible || node.children.length > 0;\n        node.visibleChildrenCount = visibleChildrenCount;\n        node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? visibleChildrenCount > 0 : (visibility === 1 /* TreeVisibility.Visible */);\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                treeListElements.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount = renderNodeCount;\n        }\n        onDidCreateNode === null || onDidCreateNode === void 0 ? void 0 : onDidCreateNode(node);\n        return node;\n    }\n    updateNodeAfterCollapseChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterCollapseChange(node, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterCollapseChange(node, result) {\n        if (node.visible === false) {\n            return 0;\n        }\n        result.push(node);\n        node.renderNodeCount = 1;\n        if (!node.collapsed) {\n            for (const child of node.children) {\n                node.renderNodeCount += this._updateNodeAfterCollapseChange(child, result);\n            }\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.renderNodeCount;\n    }\n    updateNodeAfterFilterChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterFilterChange(node, node.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterFilterChange(node, parentVisibility, result, revealed = true) {\n        let visibility;\n        if (node !== this.root) {\n            visibility = this._filterNode(node, parentVisibility);\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                node.visible = false;\n                node.renderNodeCount = 0;\n                return false;\n            }\n            if (revealed) {\n                result.push(node);\n            }\n        }\n        const resultStartLength = result.length;\n        node.renderNodeCount = node === this.root ? 0 : 1;\n        let hasVisibleDescendants = false;\n        if (!node.collapsed || visibility !== 0 /* TreeVisibility.Hidden */) {\n            let visibleChildIndex = 0;\n            for (const child of node.children) {\n                hasVisibleDescendants = this._updateNodeAfterFilterChange(child, visibility, result, revealed && !node.collapsed) || hasVisibleDescendants;\n                if (child.visible) {\n                    child.visibleChildIndex = visibleChildIndex++;\n                }\n            }\n            node.visibleChildrenCount = visibleChildIndex;\n        }\n        else {\n            node.visibleChildrenCount = 0;\n        }\n        if (node !== this.root) {\n            node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? hasVisibleDescendants : (visibility === 1 /* TreeVisibility.Visible */);\n            node.visibility = visibility;\n        }\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                result.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount += result.length - resultStartLength;\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.visible;\n    }\n    _updateAncestorsRenderNodeCount(node, diff) {\n        if (diff === 0) {\n            return;\n        }\n        while (node) {\n            node.renderNodeCount += diff;\n            this._onDidChangeRenderNodeCount.fire(node);\n            node = node.parent;\n        }\n    }\n    _filterNode(node, parentVisibility) {\n        const result = this.filter ? this.filter.filter(node.element, parentVisibility) : 1 /* TreeVisibility.Visible */;\n        if (typeof result === 'boolean') {\n            node.filterData = undefined;\n            return result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n        }\n        else if (isFilterResult(result)) {\n            node.filterData = result.data;\n            return getVisibleState(result.visibility);\n        }\n        else {\n            node.filterData = undefined;\n            return getVisibleState(result);\n        }\n    }\n    // cheap\n    hasTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return true;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            return false;\n        }\n        return this.hasTreeNode(rest, node.children[index]);\n    }\n    // cheap\n    getTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return node;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        return this.getTreeNode(rest, node.children[index]);\n    }\n    // expensive\n    getTreeNodeWithListIndex(location) {\n        if (location.length === 0) {\n            return { node: this.root, listIndex: -1, revealed: true, visible: false };\n        }\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const index = location[location.length - 1];\n        if (index < 0 || index > parentNode.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const node = parentNode.children[index];\n        return { node, listIndex, revealed, visible: visible && node.visible };\n    }\n    getParentNodeWithListIndex(location, node = this.root, listIndex = 0, revealed = true, visible = true) {\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        // TODO@joao perf!\n        for (let i = 0; i < index; i++) {\n            listIndex += node.children[i].renderNodeCount;\n        }\n        revealed = revealed && !node.collapsed;\n        visible = visible && node.visible;\n        if (rest.length === 0) {\n            return { parentNode: node, listIndex, revealed, visible };\n        }\n        return this.getParentNodeWithListIndex(rest, node.children[index], listIndex + 1, revealed, visible);\n    }\n    getNode(location = []) {\n        return this.getTreeNode(location);\n    }\n    // TODO@joao perf!\n    getNodeLocation(node) {\n        const location = [];\n        let indexTreeNode = node; // typing woes\n        while (indexTreeNode.parent) {\n            location.push(indexTreeNode.parent.children.indexOf(indexTreeNode));\n            indexTreeNode = indexTreeNode.parent;\n        }\n        return location.reverse();\n    }\n    getParentNodeLocation(location) {\n        if (location.length === 0) {\n            return undefined;\n        }\n        else if (location.length === 1) {\n            return [];\n        }\n        else {\n            return tail2(location)[0];\n        }\n    }\n    getFirstElementChild(location) {\n        const node = this.getTreeNode(location);\n        if (node.children.length === 0) {\n            return undefined;\n        }\n        return node.children[0].element;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nfunction noCompress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.from(element.children), noCompress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function compress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    let childrenIterator;\n    let children;\n    while (true) {\n        [children, childrenIterator] = Iterable.consume(Iterable.from(element.children), 2);\n        if (children.length !== 1) {\n            break;\n        }\n        if (children[0].incompressible) {\n            break;\n        }\n        element = children[0];\n        elements.push(element.element);\n    }\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.concat(children, childrenIterator), compress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\nfunction _decompress(element, index = 0) {\n    let children;\n    if (index < element.element.elements.length - 1) {\n        children = [_decompress(element, index + 1)];\n    }\n    else {\n        children = Iterable.map(Iterable.from(element.children), el => _decompress(el, 0));\n    }\n    if (index === 0 && element.element.incompressible) {\n        return {\n            element: element.element.elements[index],\n            children,\n            incompressible: true,\n            collapsible: element.collapsible,\n            collapsed: element.collapsed\n        };\n    }\n    return {\n        element: element.element.elements[index],\n        children,\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function decompress(element) {\n    return _decompress(element, 0);\n}\nfunction splice(treeElement, element, children) {\n    if (treeElement.element === element) {\n        return Object.assign(Object.assign({}, treeElement), { children });\n    }\n    return Object.assign(Object.assign({}, treeElement), { children: Iterable.map(Iterable.from(treeElement.children), e => splice(e, element, children)) });\n}\nconst wrapIdentityProvider = (base) => ({\n    getId(node) {\n        return node.elements.map(e => base.getId(e).toString()).join('\\0');\n    }\n});\n// Exported only for test reasons, do not use directly\nexport class CompressedObjectTreeModel {\n    get onDidSplice() { return this.model.onDidSplice; }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get onDidChangeRenderNodeCount() { return this.model.onDidChangeRenderNodeCount; }\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.model = new ObjectTreeModel(user, list, options);\n        this.enabled = typeof options.compressionEnabled === 'undefined' ? true : options.compressionEnabled;\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        // Diffs must be deem, since the compression can affect nested elements.\n        // @see https://github.com/microsoft/vscode/pull/114237#issuecomment-759425034\n        const diffIdentityProvider = options.diffIdentityProvider && wrapIdentityProvider(options.diffIdentityProvider);\n        if (element === null) {\n            const compressedChildren = Iterable.map(children, this.enabled ? compress : noCompress);\n            this._setChildren(null, compressedChildren, { diffIdentityProvider, diffDepth: Infinity });\n            return;\n        }\n        const compressedNode = this.nodes.get(element);\n        if (!compressedNode) {\n            throw new TreeError(this.user, 'Unknown compressed tree node');\n        }\n        const node = this.model.getNode(compressedNode);\n        const compressedParentNode = this.model.getParentNodeLocation(compressedNode);\n        const parent = this.model.getNode(compressedParentNode);\n        const decompressedElement = decompress(node);\n        const splicedElement = splice(decompressedElement, element, children);\n        const recompressedElement = (this.enabled ? compress : noCompress)(splicedElement);\n        const parentChildren = parent.children\n            .map(child => child === node ? recompressedElement : child);\n        this._setChildren(parent.element, parentChildren, {\n            diffIdentityProvider,\n            diffDepth: node.depth - parent.depth,\n        });\n    }\n    setCompressionEnabled(enabled) {\n        if (enabled === this.enabled) {\n            return;\n        }\n        this.enabled = enabled;\n        const root = this.model.getNode();\n        const rootChildren = root.children;\n        const decompressedRootChildren = Iterable.map(rootChildren, decompress);\n        const recompressedRootChildren = Iterable.map(decompressedRootChildren, enabled ? compress : noCompress);\n        // it should be safe to always use deep diff mode here if an identity\n        // provider is available, since we know the raw nodes are unchanged.\n        this._setChildren(null, recompressedRootChildren, {\n            diffIdentityProvider: this.identityProvider,\n            diffDepth: Infinity,\n        });\n    }\n    _setChildren(node, children, options) {\n        const insertedElements = new Set();\n        const onDidCreateNode = (node) => {\n            for (const element of node.element.elements) {\n                insertedElements.add(element);\n                this.nodes.set(element, node.element);\n            }\n        };\n        const onDidDeleteNode = (node) => {\n            for (const element of node.element.elements) {\n                if (!insertedElements.has(element)) {\n                    this.nodes.delete(element);\n                }\n            }\n        };\n        this.model.setChildren(node, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListIndex(node);\n    }\n    getListRenderCount(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListRenderCount(node);\n    }\n    getNode(location) {\n        if (typeof location === 'undefined') {\n            return this.model.getNode();\n        }\n        const node = this.getCompressedNode(location);\n        return this.model.getNode(node);\n    }\n    // TODO: review this\n    getNodeLocation(node) {\n        const compressedNode = this.model.getNodeLocation(node);\n        if (compressedNode === null) {\n            return null;\n        }\n        return compressedNode.elements[compressedNode.elements.length - 1];\n    }\n    // TODO: review this\n    getParentNodeLocation(location) {\n        const compressedNode = this.getCompressedNode(location);\n        const parentNode = this.model.getParentNodeLocation(compressedNode);\n        if (parentNode === null) {\n            return null;\n        }\n        return parentNode.elements[parentNode.elements.length - 1];\n    }\n    getFirstElementChild(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.getFirstElementChild(compressedNode);\n    }\n    isCollapsible(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsible(compressedNode);\n    }\n    setCollapsible(location, collapsible) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsible(compressedNode, collapsible);\n    }\n    isCollapsed(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsed(compressedNode);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsed(compressedNode, collapsed, recursive);\n    }\n    expandTo(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.expandTo(compressedNode);\n    }\n    rerender(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.rerender(compressedNode);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getCompressedNode(element) {\n        if (element === null) {\n            return null;\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n}\nexport const DefaultElementMapper = elements => elements[elements.length - 1];\nclass CompressedTreeNodeWrapper {\n    get element() { return this.node.element === null ? null : this.unwrapper(this.node.element); }\n    get children() { return this.node.children.map(node => new CompressedTreeNodeWrapper(this.unwrapper, node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(unwrapper, node) {\n        this.unwrapper = unwrapper;\n        this.node = node;\n    }\n}\nfunction mapList(nodeMapper, list) {\n    return {\n        splice(start, deleteCount, toInsert) {\n            list.splice(start, deleteCount, toInsert.map(node => nodeMapper.map(node)));\n        },\n        updateElementHeight(index, height) {\n            list.updateElementHeight(index, height);\n        }\n    };\n}\nfunction mapOptions(compressedNodeUnwrapper, options) {\n    return Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(node) {\n                return options.identityProvider.getId(compressedNodeUnwrapper(node));\n            }\n        }, sorter: options.sorter && {\n            compare(node, otherNode) {\n                return options.sorter.compare(node.elements[0], otherNode.elements[0]);\n            }\n        }, filter: options.filter && {\n            filter(node, parentVisibility) {\n                return options.filter.filter(compressedNodeUnwrapper(node), parentVisibility);\n            }\n        } });\n}\nexport class CompressibleObjectTreeModel {\n    get onDidSplice() {\n        return Event.map(this.model.onDidSplice, ({ insertedNodes, deletedNodes }) => ({\n            insertedNodes: insertedNodes.map(node => this.nodeMapper.map(node)),\n            deletedNodes: deletedNodes.map(node => this.nodeMapper.map(node)),\n        }));\n    }\n    get onDidChangeCollapseState() {\n        return Event.map(this.model.onDidChangeCollapseState, ({ node, deep }) => ({\n            node: this.nodeMapper.map(node),\n            deep\n        }));\n    }\n    get onDidChangeRenderNodeCount() {\n        return Event.map(this.model.onDidChangeRenderNodeCount, node => this.nodeMapper.map(node));\n    }\n    constructor(user, list, options = {}) {\n        this.rootRef = null;\n        this.elementMapper = options.elementMapper || DefaultElementMapper;\n        const compressedNodeUnwrapper = node => this.elementMapper(node.elements);\n        this.nodeMapper = new WeakMapper(node => new CompressedTreeNodeWrapper(compressedNodeUnwrapper, node));\n        this.model = new CompressedObjectTreeModel(user, mapList(this.nodeMapper, list), mapOptions(compressedNodeUnwrapper, options));\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        this.model.setChildren(element, children, options);\n    }\n    setCompressionEnabled(enabled) {\n        this.model.setCompressionEnabled(enabled);\n    }\n    has(location) {\n        return this.model.has(location);\n    }\n    getListIndex(location) {\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(location) {\n        return this.model.getListRenderCount(location);\n    }\n    getNode(location) {\n        return this.nodeMapper.map(this.model.getNode(location));\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(location) {\n        return this.model.getParentNodeLocation(location);\n    }\n    getFirstElementChild(location) {\n        const result = this.model.getFirstElementChild(location);\n        if (result === null || typeof result === 'undefined') {\n            return result;\n        }\n        return this.elementMapper(result.elements);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsed) {\n        return this.model.setCollapsible(location, collapsed);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(location) {\n        return this.model.expandTo(location);\n    }\n    rerender(location) {\n        return this.model.rerender(location);\n    }\n    refilter() {\n        return this.model.refilter();\n    }\n    getCompressedTreeNode(location = null) {\n        return this.model.getNode(location);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AbstractTree } from './abstractTree.js';\nimport { CompressibleObjectTreeModel } from './compressedObjectTreeModel.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTree extends AbstractTree {\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    constructor(user, container, delegate, renderers, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    rerender(element) {\n        if (element === undefined) {\n            this.view.rerender();\n            return;\n        }\n        this.model.rerender(element);\n    }\n    hasElement(element) {\n        return this.model.has(element);\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\nclass CompressibleRenderer {\n    get compressedTreeNodeProvider() {\n        return this._compressedTreeNodeProvider();\n    }\n    constructor(_compressedTreeNodeProvider, renderer) {\n        this._compressedTreeNodeProvider = _compressedTreeNodeProvider;\n        this.renderer = renderer;\n        this.templateId = renderer.templateId;\n        if (renderer.onDidChangeTwistieState) {\n            this.onDidChangeTwistieState = renderer.onDidChangeTwistieState;\n        }\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { compressedTreeNode: undefined, data };\n    }\n    renderElement(node, index, templateData, height) {\n        const compressedTreeNode = this.compressedTreeNodeProvider.getCompressedTreeNode(node.element);\n        if (compressedTreeNode.element.elements.length === 1) {\n            templateData.compressedTreeNode = undefined;\n            this.renderer.renderElement(node, index, templateData.data, height);\n        }\n        else {\n            templateData.compressedTreeNode = compressedTreeNode;\n            this.renderer.renderCompressedElements(compressedTreeNode, index, templateData.data, height);\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b, _c, _d;\n        if (templateData.compressedTreeNode) {\n            (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, templateData.compressedTreeNode, index, templateData.data, height);\n        }\n        else {\n            (_d = (_c = this.renderer).disposeElement) === null || _d === void 0 ? void 0 : _d.call(_c, node, index, templateData.data, height);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.data);\n    }\n    renderTwistie(element, twistieElement) {\n        if (this.renderer.renderTwistie) {\n            return this.renderer.renderTwistie(element, twistieElement);\n        }\n        return false;\n    }\n}\n__decorate([\n    memoize\n], CompressibleRenderer.prototype, \"compressedTreeNodeProvider\", null);\nfunction asObjectTreeOptions(compressedTreeNodeProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n            getKeyboardNavigationLabel(e) {\n                let compressedTreeNode;\n                try {\n                    compressedTreeNode = compressedTreeNodeProvider().getCompressedTreeNode(e);\n                }\n                catch (_a) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                if (compressedTreeNode.element.elements.length === 1) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                else {\n                    return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(compressedTreeNode.element.elements);\n                }\n            }\n        } });\n}\nexport class CompressibleObjectTree extends ObjectTree {\n    constructor(user, container, delegate, renderers, options = {}) {\n        const compressedTreeNodeProvider = () => this;\n        const compressibleRenderers = renderers.map(r => new CompressibleRenderer(compressedTreeNodeProvider, r));\n        super(user, container, delegate, compressibleRenderers, asObjectTreeOptions(compressedTreeNodeProvider, options));\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    createModel(user, view, options) {\n        return new CompressibleObjectTreeModel(user, view, options);\n    }\n    updateOptions(optionsUpdate = {}) {\n        super.updateOptions(optionsUpdate);\n        if (typeof optionsUpdate.compressionEnabled !== 'undefined') {\n            this.model.setCompressionEnabled(optionsUpdate.compressionEnabled);\n        }\n    }\n    getCompressedTreeNode(element = null) {\n        return this.model.getCompressedTreeNode(element);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IndexTreeModel } from './indexTreeModel.js';\nimport { ObjectTreeElementCollapseState, TreeError } from './tree.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTreeModel {\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.nodesByIdentity = new Map();\n        this.model = new IndexTreeModel(user, list, null, options);\n        this.onDidSplice = this.model.onDidSplice;\n        this.onDidChangeCollapseState = this.model.onDidChangeCollapseState;\n        this.onDidChangeRenderNodeCount = this.model.onDidChangeRenderNodeCount;\n        if (options.sorter) {\n            this.sorter = {\n                compare(a, b) {\n                    return options.sorter.compare(a.element, b.element);\n                }\n            };\n        }\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        const location = this.getElementLocation(element);\n        this._setChildren(location, this.preserveCollapseState(children), options);\n    }\n    _setChildren(location, children = Iterable.empty(), options) {\n        const insertedElements = new Set();\n        const insertedElementIds = new Set();\n        const onDidCreateNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            insertedElements.add(tnode.element);\n            this.nodes.set(tnode.element, tnode);\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                insertedElementIds.add(id);\n                this.nodesByIdentity.set(id, tnode);\n            }\n            (_a = options.onDidCreateNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        const onDidDeleteNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            if (!insertedElements.has(tnode.element)) {\n                this.nodes.delete(tnode.element);\n            }\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                if (!insertedElementIds.has(id)) {\n                    this.nodesByIdentity.delete(id);\n                }\n            }\n            (_a = options.onDidDeleteNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        this.model.splice([...location, 0], Number.MAX_VALUE, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    preserveCollapseState(elements = Iterable.empty()) {\n        if (this.sorter) {\n            elements = [...elements].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return Iterable.map(elements, treeElement => {\n            let node = this.nodes.get(treeElement.element);\n            if (!node && this.identityProvider) {\n                const id = this.identityProvider.getId(treeElement.element).toString();\n                node = this.nodesByIdentity.get(id);\n            }\n            if (!node) {\n                let collapsed;\n                if (typeof treeElement.collapsed === 'undefined') {\n                    collapsed = undefined;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed) {\n                    collapsed = true;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                    collapsed = false;\n                }\n                else {\n                    collapsed = Boolean(treeElement.collapsed);\n                }\n                return Object.assign(Object.assign({}, treeElement), { children: this.preserveCollapseState(treeElement.children), collapsed });\n            }\n            const collapsible = typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : node.collapsible;\n            let collapsed;\n            if (typeof treeElement.collapsed === 'undefined' || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                collapsed = node.collapsed;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed) {\n                collapsed = true;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded) {\n                collapsed = false;\n            }\n            else {\n                collapsed = Boolean(treeElement.collapsed);\n            }\n            return Object.assign(Object.assign({}, treeElement), { collapsible,\n                collapsed, children: this.preserveCollapseState(treeElement.children) });\n        });\n    }\n    rerender(element) {\n        const location = this.getElementLocation(element);\n        this.model.rerender(location);\n    }\n    getFirstElementChild(ref = null) {\n        const location = this.getElementLocation(ref);\n        return this.model.getFirstElementChild(location);\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListRenderCount(location);\n    }\n    isCollapsible(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(element, collapsible) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(element, collapsed, recursive) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(element) {\n        const location = this.getElementLocation(element);\n        this.model.expandTo(location);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getNode(element = null) {\n        if (element === null) {\n            return this.model.getNode(this.model.rootRef);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(element) {\n        if (element === null) {\n            throw new TreeError(this.user, `Invalid getParentNodeLocation call`);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        const location = this.model.getNodeLocation(node);\n        const parentLocation = this.model.getParentNodeLocation(location);\n        const parent = this.model.getNode(parentLocation);\n        return parent.element;\n    }\n    getElementLocation(element) {\n        if (element === null) {\n            return [];\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return this.model.getNodeLocation(node);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var ObjectTreeElementCollapseState;\n(function (ObjectTreeElementCollapseState) {\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Expanded\"] = 0] = \"Expanded\";\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Collapsed\"] = 1] = \"Collapsed\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, expand it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrExpanded\"] = 2] = \"PreserveOrExpanded\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, collapse it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrCollapsed\"] = 3] = \"PreserveOrCollapsed\";\n})(ObjectTreeElementCollapseState || (ObjectTreeElementCollapseState = {}));\nexport var TreeMouseEventTarget;\n(function (TreeMouseEventTarget) {\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Unknown\"] = 0] = \"Unknown\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Twistie\"] = 1] = \"Twistie\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Element\"] = 2] = \"Element\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Filter\"] = 3] = \"Filter\";\n})(TreeMouseEventTarget || (TreeMouseEventTarget = {}));\nexport class TreeError extends Error {\n    constructor(user, message) {\n        super(`TreeError [${user}] ${message}`);\n    }\n}\nexport class WeakMapper {\n    constructor(fn) {\n        this.fn = fn;\n        this._map = new WeakMap();\n    }\n    map(key) {\n        let result = this._map.get(key);\n        if (!result) {\n            result = this.fn(key);\n            this._map.set(key, result);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../dom.js';\nimport { StandardKeyboardEvent } from '../keyboardEvent.js';\nimport { StandardMouseEvent } from '../mouseEvent.js';\nimport { Gesture } from '../touch.js';\nimport { Disposable } from '../../common/lifecycle.js';\nexport class Widget extends Disposable {\n    onclick(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.CLICK, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmousedown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_DOWN, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseover(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_OVER, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseleave(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_LEAVE, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onkeydown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    onkeyup(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    oninput(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.INPUT, listener));\n    }\n    onblur(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.BLUR, listener));\n    }\n    onfocus(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.FOCUS, listener));\n    }\n    ignoreGesture(domNode) {\n        return Gesture.ignoreTarget(domNode);\n    }\n}\n"],"names":["$","dom","unthemedKeybindingLabelOptions","keybindingLabelBackground","undefined","keybindingLabelForeground","keybindingLabelBorder","keybindingLabelBottomBorder","keybindingLabelShadow","KeybindingLabel","constructor","container","os","options","this","keyElements","Set","Object","create","labelForeground","domNode","style","color","didEverRender","appendChild","element","set","keybinding","matches","areSame","render","_a","clear","chords","getChords","renderChord","firstPart","i","length","chordPart","title","disableTitle","getAriaLabel","removeAttribute","renderUnboundKeybindings","renderUnbound","parent","chord","match","modifierLabels","UILabelProvider","ctrlKey","renderKey","Boolean","separator","shiftKey","altKey","metaKey","keyLabel","keyCode","label","highlight","createKeyElement","localize","keyElement","arguments","add","backgroundColor","borderColor","borderBottomColor","boxShadow","concat","a","b","equals","PagedRenderer","templateId","renderer","modelProvider","renderTemplate","data","disposable","Disposable","None","renderElement","index","_","height","dispose","model","isResolved","get","cts","CancellationTokenSource","promise","resolve","token","cancel","renderPlaceholder","then","entry","disposeTemplate","PagedAccessibilityProvider","accessibilityProvider","getWidgetAriaLabel","PagedList","user","virtualDelegate","renderers","pagedRenderers","map","r","list","List","assign","fromPagedListOptions","updateOptions","getHTMLElement","onDidFocus","onDidDispose","onMouseDblClick","Event","_ref","browserEvent","_model","onPointer","_ref2","onDidChangeSelection","_ref3","elements","indexes","e","splice","range","getFocus","getSelection","getSelectedElements","styles","groupIntersect","groups","result","start","end","intersection","Range","intersect","isEmpty","push","size","shift","much","RangeMap","_size","deleteCount","items","diff","before","after","Number","POSITIVE_INFINITY","g","middle","item","_len","Array","_key","previousGroup","group","consolidate","reduce","t","count","len","indexAt","position","newSize","Math","floor","indexAfter","min","positionAt","groupCount","newCount","RowCache","cache","Map","transactionNodesPendingRemoval","inTransaction","alloc","getTemplateCache","pop","isStale","has","delete","templateData","getRenderer","row","isReusingConnectedDomNode","release","releaseRow","transact","makeChanges","Error","doRemoveNode","classList","remove","parentElement","removeChild","removeFromParent","forEach","cachedRows","cachedRow","__decorate","decorators","target","key","desc","d","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","StaticDND","CurrentDragAndDropData","DefaultOptions","useShadows","verticalScrollMode","setRowLineHeight","setRowHeight","supportDynamicHeights","dnd","getDragElements","getDragURI","onDragStart","onDragOver","drop","horizontalScrolling","transformOptimization","alwaysConsumeMouseWheel","ElementsDragAndDropData","update","getData","ExternalElementsDragAndDropData","NativeDragAndDropData","types","files","dataTransfer","file","type","ListViewAccessibilityProvider","getSetSize","bind","l","getPosInSet","getRole","isChecked","ListView","contentHeight","rangeMap","_horizontalScrolling","value","toggle","measureItemWidth","updateScrollWidth","scrollableElement","setScrollDimensions","width","getContentWidth","rowsContainer","max","scrollWidth","renderWidth","scrollableElementWidthDelayer","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","domId","InstanceCount","_scrollHeight","scrollableElementUpdateDisposable","Delayer","splicing","dragOverAnimationStopDisposable","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","disposables","DisposableStore","_onDidChangeContentHeight","Emitter","_onDidChangeContentWidth","itemId","lastRenderTop","lastRenderHeight","document","createElement","className","tabIndex","mouseSupport","additionalScrollHeight","transform","overflow","contain","Gesture","addTarget","scrollable","Scrollable","forceIntegerValues","smoothScrollDuration","smoothScrolling","scheduleAtNextAnimationFrame","cb","SmoothScrollableElement","horizontal","vertical","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollByPage","getDomNode","onScroll","addDisposableListener","TouchEventType","Change","onTouchChange","scrollTop","toDragEvent","onDrop","onDragLeave","onDragEnd","layout","initialSize","scrollableOptions","scrollHeight","setSmoothScrollDuration","_splice","fire","previousRenderRange","getRenderRange","deleteRange","removeRange","rowsToDispose","dragStartDisposable","checkedDisposable","rows","disposeElement","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","relativeComplement","inserted","id","String","getTemplateId","getHeight","hasDynamicHeight","lastDynamicHeightWidth","uri","dropTarget","deleted","delta","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","removeItemFromDOM","unrenderedRestRanges","insertRanges","beforeElement","getNextToLastElement","insertItemInDOM","values","eventuallyUpdateScrollDimensions","_rerender","renderHeight","eventuallyUpdateScrollWidth","trigger","rerender","getScrollDimensions","firstVisibleIndex","firstElTop","nextElTop","domElement","elementHeight","elementTop","scrollDimensions","getContentHeight","renderTop","renderLeft","updateItemsInDOM","rangesToInsert","rangesToRemove","rangesToUpdate","left","top","role","setAttribute","checked","onDidChange","insertBefore","draggable","event","window","getComputedStyle","paddingLeft","parseFloat","paddingRight","lineHeight","getElementDomId","getScrollTop","getScrollPosition","setScrollTop","reuseAnimation","setScrollPosition","onMouseClick","DomEmitter","toMouseEvent","onMouseMiddleClick","filter","button","onMouseDown","onMouseOver","onMouseOut","onContextMenu","any","Contextmenu","toGestureEvent","onTouchStart","toTouchEvent","onTap","Tap","getItemIndexFromEventTarget","initialTarget","scrollLeft","inSmoothScrolling","err","console","error","preventDefault","stopPropagation","translationY","effectAllowed","setData","DataTransfers","TEXT","setDragImage","getDragLabel","dragImage","textContent","contains","body","getDragImageContainer","setTimeout","currentDragData","call","setupDragAndDropScrollTopAnimation","accept","currentDragFeedback","feedback","dropEffect","effect","distinct","sort","f1","f2","isArray","toDisposable","disposableTimeout","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","dragOverAnimationDisposable","viewTop","getTopLeftOffset","animate","animateDragAndDropScrollTop","pageY","upperLimit","HTMLElement","rawIndex","getAttribute","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","unrenderRanges","renderRanges","afterIndex","beforeRow","deltaScrollTop","getFutureScrollPosition","newScrollTop","getDynamicHeight","offsetHeight","BugIndicatingError","setDynamicHeight","ranges","lastRange","nextToLastItem","parentNode","memoize","prototype","CombinedSpliceable","spliceables","s","ListError","message","super","TypeNavigationMode","TypeNavigationControllerState","__awaiter","thisArg","_arguments","P","generator","Promise","reject","fulfilled","step","next","rejected","done","apply","TraitRenderer","trait","renderedElements","name","renderedElementIndex","findIndex","el","rendered","unrender","renderIndex","insertCount","renderedElement","renderIndexes","indexOf","Trait","_trait","sortedIndexes","_onChange","onChange","hasTrait","first","find","_set","numericSort","sortedResult","toRender","disjunction","binarySearch","SelectionTrait","setAriaSelected","TraitSpliceable","view","identityProvider","pastElementsWithTrait","getId","toString","elementsWithTrait","isInputElement","tagName","isMonacoEditor","isButton","KeyboardController","onKeyDown","chain","StandardKeyboardEvent","multipleSelectionDisposables","on","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","multipleSelectionSupport","platform","onCtrlA","optionsUpdate","setSelection","focusPrevious","setAnchor","reveal","focus","focusNext","focusPreviousPage","focusNextPage","DefaultKeyboardNavigationDelegate","mightProducePrintableCharacter","TypeNavigationController","keyboardNavigationLabelProvider","keyboardNavigationEventFilter","delegate","enabled","state","Idle","mode","Automatic","triggered","previouslyFocused","enabledDisposables","typeNavigationEnabled","enable","disable","typeNavigationMode","typing","onChar","EventHelper","stop","onClear","debounce","onInput","ariaLabel","alert","word","Typing","getKeyboardNavigationLabel","labelStr","matchesPrefix","setFocus","DOMFocusController","onTab","focusedDomElement","tabIndexElement","querySelector","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","DefaultMultipleSelectionController","MouseController","_onPointer","multipleSelectionController","onDoubleClick","onViewPointer","isSelectionChangeEvent","activeElement","domFocus","isHandledByList","changeSelection","MouseEvent","anchor","getAnchor","currentFocus","rangeSelection","selection","contiguousRange","reverse","getContiguousRangeContaining","newSelection","one","other","j","DefaultStyleController","styleElement","selectorSuffix","suffix","content","listBackground","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listActiveSelectionIconForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusForeground","listInactiveSelectionIconForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","focusAndSelectionOutline","asCssValueWithDefault","listFocusAndSelectionOutline","listSelectionOutline","listFocusOutline","inactiveFocusAndSelectionOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","tableColumnsBorder","tableOddRowsBackgroundColor","join","unthemedListStyles","treeIndentGuidesStroke","treeInactiveIndentGuidesStroke","Color","fromHex","transparent","keyboardSupport","PipelineRenderer","_templateId","AccessibiltyRenderer","ariaLevel","getAriaLevel","ListViewDragAndDrop","originalEvent","targetElement","targetIndex","onDidChangeFocus","eventBufferer","wrapEvent","toListEvent","mouseController","didJustPressContextMenuKey","fromKeyDown","fromKeyUp","fromMouse","x","pageX","y","signal","_options","EventBufferer","_ariaLabel","_onDidDispose","getWidgetRole","baseRenderers","onDidChangeActiveDescendant","viewOptions","createListView","styleController","createStyleSheet","spliceable","keyboardController","keyboardNavigationDelegate","typeNavigationController","createMouseController","_onFocusChange","_onSelectionChange","bufferEvents","preventScroll","firstOrDefault","getAnchorElement","n","loop","findNextIndex","findPreviousIndex","lastPageIndex","currentlyFocusedElementIndex","lastGoodPageIndex","previousScrollTop","nextpageScrollTop","timeout","firstPageIndex","firstGoodPageIndex","focusLast","focusFirst","focusNth","getFocusedElements","relativeTop","isNumber","m","clamp","viewItemBottom","scrollBottom","getElementID","getActiveDescendantId","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","Direction","Menu","ActionBar","actions","menuStyles","menuElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","ariaRole","focusOnlyEnabledItems","triggerKeys","keys","isMacintosh","isLinux","keyDown","actionsList","menuDisposables","_register","initializeOrUpdateStyleSheet","EventType","KEY_DOWN","enableMnemonics","toLocaleLowerCase","mnemonics","SubmenuMenuActionViewItem","focusItemByElement","onClick","focusedItem","viewItems","MOUSE_OUT","relatedTarget","isAncestor","updateFocus","MOUSE_OVER","lastFocusedItem","setFocusedItem","DomScrollableElement","verticalScrollbarSize","handleMouseWheel","scrollElement","styleScrollElement","MOUSE_UP","maxHeight","innerHeight","getBoundingClientRect","submenuIds","warn","icon","isMenu","scanDomNode","MenuSeparatorActionViewItem","array","updatePositionInSet","styleSheet","isInShadowDOM","globalStyleSheet","isForShadowDom","formatRule","Codicon","menuSelection","menuSubmenu","scrollbarShadowColor","scrollbarShadow","scrollbarSliderBackgroundColor","scrollbarSliderBackground","scrollbarSliderHoverBackgroundColor","scrollbarSliderHoverBackground","scrollbarSliderActiveBackgroundColor","scrollbarSliderActiveBackground","getMenuWidgetCSS","fgColor","foregroundColor","bgColor","border","shadow","shadowColor","outline","borderRadius","getContainer","children","fromRight","round","Separator","SubmenuAction","menuActionViewItem","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","useEventAsContext","getKeyBinding","keybindingLabel","getLabel","BaseMenuActionViewItem","BaseActionViewItem","ctx","menuStyle","cssClass","exec","runOnceToEnableMouseUp","RunOnceScheduler","isFirefox","StandardMouseEvent","rightButton","CONTEXT_MENU","append","_action","ID","check","ThemeIcon","asCSSSelector","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","applyStyle","blur","pos","setSize","clearNode","stripIcons","cleanLabel","regex","mnemonicInText","replace","trim","cleanMnemonic","strings","lastIndex","escMatch","replaceDoubleEscapes","str","substr","innerText","split","class","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","outlineOffset","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","getActiveElement","submenu","updateAriaExpanded","submenuIndicator","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","submenuContainer","calculateSubmenuMenuLayout","windowDimensions","ret","offset","selectFirstItem","computedStyles","paddingTop","zIndex","EmptySubmenuAction","entryBox","entryBoxUpdated","viewBox","Dimension","innerWidth","lift","onDidCancel","ActionViewItem","separatorColor","fontCharacter","getCodiconFontCharacters","MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","CSS_DONE","CSS_ACTIVE","CSS_INFINITE","CSS_INFINITE_LONG_RUNNING","CSS_DISCRETE","ProgressBar","workedVal","showDelayedScheduler","show","longRunningScheduler","infiniteLongRunning","LONG_RUNNING_INFINITE_THRESHOLD","bit","progressBarBackground","off","opacity","totalWork","doDone","delayed","infinite","ResizableHTMLElement","currentSize","_onDidWillResize","onDidWillResize","_onDidResize","onDidResize","_sashListener","_minSize","_maxSize","MAX_SAFE_INTEGER","_eastSash","Sash","getVerticalSashLeft","_westSash","_northSash","getHorizontalSashTop","orthogonalEdge","OrthogonalEdge","North","_southSash","South","orthogonalStartSash","orthogonalEndSash","deltaY","deltaX","onDidStart","onDidEnd","dimension","currentX","startX","east","west","currentY","startY","north","south","onDidReset","_preferredSize","enableSashes","minHeight","minWidth","maxWidth","clearSashHoverState","maxSize","minSize","preferredSize","onDidChangeGlobalSize","onDidChangeHoverDelay","MouseEventFactory","onPointerMove","onPointerUp","GestureEventFactory","End","OrthogonalPointerEventFactory","factory","PointerEventsDisabledCssClass","_state","_orthogonalStartSash","_orthogonalEndSash","onDidEnablementChange","sash","orthogonalStartDragHandleDisposables","orthogonalStartSashDisposables","_orthogonalStartDragHandle","onMouseEnter","onMouseLeave","orthogonalEndDragHandleDisposables","orthogonalEndSashDisposables","_orthogonalEndDragHandle","layoutProvider","hoverDelay","hoverDelayer","_onDidStart","_onDidChange","_onDidReset","_onDidEnd","linkedSash","onPointerStart","onMouseDoubleClick","onPointerDoublePress","Start","doubleTapTimeout","clearTimeout","delay","pointerEventFactory","isMultisashResize","__orthogonalSashEvent","orthogonalSash","getOrthogonalSash","__linkedSashEvent","iframes","getElementsByTagName","iframe","startEvent","updateStyle","cursor","fromLinkedSash","verticalProvider","getVerticalSashTop","getVerticalSashHeight","horizontalProvider","getHorizontalSashLeft","getHorizontalSashWidth","ARROW_IMG_SIZE","ScrollbarArrow","Widget","opts","_onActivate","onActivate","bgDomNode","bgWidth","bgHeight","bottom","right","asClassNameArray","_pointerMoveMonitor","GlobalPointerMoveMonitor","POINTER_DOWN","_arrowPointerDown","_pointerdownRepeatTimer","IntervalTimer","_pointerdownScheduleRepeatTimer","TimeoutTimer","Element","cancelAndSet","scheduleRepeater","startMonitoring","pointerId","buttons","pointerMoveData","ScrollbarVisibilityController","visibleClassName","invisibleClassName","_visibility","_visibleClassName","_invisibleClassName","_domNode","_isVisible","_isNeeded","_rawShouldBeVisible","_shouldBeVisible","_revealTimer","setVisibility","_updateShouldBeVisible","setShouldBeVisible","rawShouldBeVisible","_applyVisibilitySetting","shouldBeVisible","ensureVisibility","setIsNeeded","isNeeded","setDomNode","setClassName","_reveal","_hide","setIfNotSet","withFadeAway","AbstractScrollbar","_lazyRender","lazyRender","_host","host","_scrollable","_scrollByPage","_scrollbarState","scrollbarState","_visibilityController","extraScrollbarClassName","_shouldRender","createFastDomNode","setPosition","_domNodePointerDown","_createArrow","arrow","_createSlider","slider","setTop","setLeft","setWidth","setHeight","setLayerHinting","setContain","_sliderPointerDown","onclick","leftButton","_onElementSize","visibleSize","setVisibleSize","_onElementScrollSize","elementScrollSize","setScrollSize","_onElementScrollPosition","elementScrollPosition","beginReveal","beginHide","_renderDomNode","getRectangleLargeSize","getRectangleSmallSize","_updateSlider","getSliderSize","getArrowSize","getSliderPosition","_onPointerDown","delegatePointerDown","domTop","getClientRects","sliderStart","sliderStop","pointerPos","_sliderPointerPosition","offsetX","offsetY","domNodePosition","_pointerDownRelativePosition","_setDesiredScrollPositionNow","getDesiredScrollPositionFromOffsetPaged","getDesiredScrollPositionFromOffset","initialPointerPosition","initialPointerOrthogonalPosition","_sliderOrthogonalPointerPosition","initialScrollbarState","clone","toggleClassName","pointerOrthogonalPosition","pointerOrthogonalDelta","abs","pointerDelta","getDesiredScrollPositionFromDelta","_desiredScrollPosition","desiredScrollPosition","writeScrollPosition","setScrollPositionNow","updateScrollbarSize","scrollbarSize","_updateScrollbarSize","setScrollbarSize","ScrollbarState","arrowSize","oppositeScrollbarSize","scrollSize","scrollPosition","_scrollbarSize","_oppositeScrollbarSize","_arrowSize","_visibleSize","_scrollSize","_scrollPosition","_computedAvailableSize","_computedIsNeeded","_computedSliderSize","_computedSliderRatio","_computedSliderPosition","_refreshComputedValues","iVisibleSize","iScrollSize","iScrollPosition","setOppositeScrollbarSize","_computeValues","computedAvailableSize","computedRepresentableSize","computedIsNeeded","computedSliderSize","computedSliderRatio","computedSliderPosition","desiredSliderPosition","correctedOffset","HorizontalScrollbar","getCurrentScrollPosition","horizontalHasArrows","horizontalScrollbarSize","arrowDelta","scrollbarDelta","scrollbarButtonLeft","onMouseWheel","StandardWheelEvent","scrollbarButtonRight","horizontalSliderSize","sliderSize","sliderPosition","largeSize","smallSize","setBottom","onDidScroll","VerticalScrollbar","verticalHasArrows","scrollbarButtonUp","scrollbarButtonDown","verticalSliderSize","setRight","MouseWheelClassifierItem","timestamp","score","MouseWheelClassifier","_capacity","_memory","_front","_rear","isPhysicalMouseWheel","remainingInfluence","iteration","influence","pow","acceptStandardWheelEvent","osZoomFactor","devicePixelRatio","getZoomFactor","Date","now","_computeScore","_isAlmostInt","INSTANCE","AbstractScrollableElement","_onScroll","_onWillScroll","flipAxes","consumeMouseWheelIfScrollbarIsNeeded","scrollYToX","scrollPredominantAxis","mouseWheelSmoothScroll","listenOnDomNode","resolveOptions","_onDidScroll","scrollbarHost","mouseWheelEvent","_onMouseWheel","_onDragStart","_onDragEnd","_verticalScrollbar","_horizontalScrollbar","_leftShadowDomNode","_topShadowDomNode","_topLeftShadowDomNode","_listenOnDomNode","_mouseWheelToDispose","_setListeningToMouseWheel","onmouseover","_onMouseOver","onmouseleave","_onMouseLeave","_hideTimeout","_isDragging","_mouseIsOver","_revealOnScroll","getOverviewRulerLayoutInfo","delegateVerticalScrollbarPointerDown","dimensions","updateClassName","newClassName","newOptions","_render","delegateScrollFromMouseWheelEvent","shouldListen","MOUSE_WHEEL","passive","classifier","didScroll","shiftConvert","futureScrollPosition","desiredScrollTop","ceil","deltaScrollLeft","desiredScrollLeft","validateScrollPosition","setScrollPositionSmooth","consumeMouseWheel","renderNow","scrollState","enableTop","enableLeft","leftClassName","topClassName","topLeftClassName","_scheduleHide","ScrollableElement","callback","_element","scrollTopChanged","scrollLeftChanged","clientWidth","clientHeight","SELECT_OPTION_ENTRY_TEMPLATE_ID","SelectListRenderer","root","text","detail","decoratorRight","isDisabled","_templateData","SelectBoxList","selected","contextViewProvider","selectBoxOptions","_currentSelection","_hasDetails","_skipLayout","_sticky","minBottomMargin","DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN","selectElement","ariaDescription","_onDidSelect","registerListeners","constructSelectDropDown","setOptions","initStyleSheet","selectDropDownContainer","selectionDetailsPane","widthControlOuterDiv","widthControlInnerDiv","widthControlElement","_dropDownPosition","DRAG_START","listIsVisibleOnTouchStart","selectedIndex","CLICK","hideSelectDropDown","showSelectDropDown","MOUSE_DOWN","showDropDown","onDidSelect","arrays","_cachedMaxDetailsHeight","option","createOption","description","select","setOptionsList","selectList","setFocusable","focusable","styleSelectElement","decoratorRightForeground","selectBackground","selectBorder","selectListBorder","background","foreground","selectForeground","styleList","selectListBackground","selectDropDownListContainer","optionsBorder","focusBorder","outlineColor","disabled","createSelectList","showContextView","renderSelectDropDown","layoutSelectDropDown","onHide","anchorPosition","optionsAsChildren","focusSelect","hideContextView","preLayoutPosition","measureMaxDetailsHeight","maxDetailsPaneHeight","_option","updateDetail","selectPosition","verticalPadding","getPropertyValue","maxSelectDropDownHeightBelow","maxSelectDropDownHeightAbove","DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN","selectWidth","offsetWidth","selectMinWidth","setWidthControlElement","selectOptimalWidth","listHeight","minRequiredDropDownHeight","maxVisibleOptionsBelow","maxVisibleOptionsAbove","DEFAULT_MINIMUM_VISIBLE_OPTIONS","elementWidth","longest","longestLength","detailLength","rightDecoratorLength","listRenderer","comment","onSelectDropDownKeyDown","onPageDown","onPageUp","onHome","onEnd","onCharacter","POINTER_UP","onListFocus","onListBlur","listRowElement","closest","renderDescriptionMarkdown","actionHandler","cleanRenderedMarkdown","childNodes","child","toLowerCase","renderMarkdown","supportThemeIcons","descriptionIsMarkdown","descriptionMarkdownActionHandler","nextOptionDisabled","ch","KeyCodeUtils","optionIndex","charAt","toUpperCase","SelectBoxNative","eventType","showSelect","applyStyles","SelectBox","useCustomDrawn","selectBoxDelegate","defaultStyles","separatorBorder","ViewItem","visible","_cachedVisibleSize","setVisible","viewMinimumSize","viewMaximumSize","minimumSize","maximumSize","priority","proportionalLayout","snap","pointerEvents","cachedVisibleSize","layoutContext","layoutContainer","VerticalViewItem","HorizontalViewItem","State","Sizing","Distribute","Split","Invisible","SplitView","startSnappingEnabled","_startSnappingEnabled","endSnappingEnabled","_endSnappingEnabled","sashItem","sashItems","updateSashEnablement","contentSize","proportions","_onDidSashChange","_onDidSashReset","onDidSashChange","onDidSashReset","inverseAltBehavior","getSashOrthogonalSize","sashContainer","viewContainer","scrollbarVisibility","onDidScrollViewContainer","descriptor","views","viewDescriptor","sizing","doAddView","saveProportions","isTransparent","removeProperty","setProperty","addView","skipLayout","previousSize","total","proportion","lowPriorityIndexes","highPriorityIndexes","resize","distributeEmptySpace","layoutViews","onSashStart","alt","combinedDisposable","resetSashDragState","sashDragState","current","sizes","snapBefore","snapAfter","minDelta","NEGATIVE_INFINITY","maxDelta","viewItem","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","limitDelta","onSashChange","newDelta","isLastSash","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","onViewChange","relayout","resizeView","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","getViewSize","onChangeDisposable","containerDisposable","viewSize","getSashPosition","sashEventMapper","onStartDisposable","onStart","onEndDisposable","onDidResetDisposable","overloadMinDelta","overloadMaxDelta","pushToStart","pushToEnd","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","deltaDown","lowPriorityIndex","emptyDelta","updateScrollableElement","previous","collapsesDown","expandsDown","reverseViews","collapsesUp","expandsUp","snappedBefore","snappedAfter","TableListRenderer","columns","getColumnSize","TemplateId","renderedTemplates","rendererMap","column","rowContainer","cellContainers","cellTemplateData","cellContainer","cell","project","layoutColumn","ColumnHeader","minimumWidth","maximumWidth","onDidChangeWidthConstraints","_onDidLayout","onDidLayout","tooltip","Table","cachedWidth","cachedHeight","headers","weight","splitview","headerRowHeight","h","totalWeight","unthemedToggleStyles","inputActiveOptionBorder","inputActiveOptionForeground","inputActiveOptionBackground","Toggle","_onKeyDown","_opts","_checked","classes","_icon","actionClassName","notFocusable","ev","ignoreGesture","onkeydown","keyboardEvent","newIsChecked","ToolBar","contextMenuProvider","submenuActionViewItems","hasSecondaryActions","_onDidChangeDropdownVisibility","EventMultiplexer","onDidChangeDropdownVisibility","lookupKeybindings","toggleMenuAction","ToggleMenuAction","toggleMenuActionViewItem","toggleMenuTitle","actionBar","allowContextMenu","viewItemOptions","DropdownMenuActionViewItem","menuActions","keybindingProvider","classNames","moreIcon","toolBarMore","anchorAlignmentProvider","menuAsChild","renderDropdownAsChildElement","setActionContext","onDidChangeVisibility","getElement","getItemAction","indexOrElement","getAction","setActions","primaryActions","secondaryActions","primaryActionsToSet","slice","getKeybindingLabel","withNullAsUndefined","Action","toggleDropdownMenu","nls","_menuActions","run","RenderIndentGuides","TreeElementsDragAndDropData","node","asTreeDragAndDropData","TreeNodeListDragAndDrop","autoExpandDisposable","nodes","targetNode","raw","didChangeAutoExpandNode","autoExpandNode","autoExpand","ref","getNodeLocation","isCollapsed","setCollapsed","bubble","parentRef","getParentNodeLocation","getNode","parentIndex","getListIndex","getListRenderCount","ComposedTreeDelegate","EventCollection","_elements","TreeRenderer","onDidChangeCollapseState","activeNodes","renderedIndentGuides","renderedNodes","indent","DefaultIndent","hideTwistiesOfChildlessElements","shouldRenderIndentGuides","activeIndentNodes","indentGuidesDisposable","onDidChangeNodeTwistieState","onDidChangeTwistieState","renderTreeElement","renderIndentGuides","_renderIndentGuides","_onDidChangeActiveNodes","twistie","contents","depth","collapsible","collapsed","treeItemExpanded","twistieRendered","renderTwistie","visibleChildrenCount","disposableStore","guide","childElementCount","firstElementChild","line","FindFilter","totalCount","_totalCount","matchCount","_matchCount","tree","_filter","_pattern","_lowercasePattern","onWillRefilter","reset","parentVisibility","isFilterResult","getVisibleState","FuzzyScore","Default","labels","findMatchType","TreeFindMatchType","Contiguous","fuzzyScore","firstMatchCanBeWeak","boostFullMatch","findMode","TreeFindMode","Filter","defaultFindVisibility","unthemedInboxStyles","FindController","pattern","_mode","widget","refilter","_onDidChangeMode","matchType","_matchType","_onDidChangeMatchType","onDidChangeMode","onDidChangeMatchType","_onDidChangePattern","_onDidChangeOpenState","onDidChangeOpenState","defaultFindMode","Highlight","defaultFindMatchType","Fuzzy","onDidSplice","onDidSpliceModel","noMatches","showNotFoundMessage","showMessage","clearMessage","shouldAllowFocus","isDefault","filterData","_history","asTreeMouseEvent","TreeMouseEventTarget","Unknown","hasParentWithClass","Twistie","dfs","fn","nodeSet","_nodeSet","createNodeSet","getFirstViewElementWithTrait","__forceEvent","silent","that","getNodes","onDidModelSplice","insertedNodes","deletedNodes","visit","deletedNodesIdSet","deletedNodesVisitor","insertedNodesMap","insertedNodesVisitor","insertedNode","TreeNodeListMouseController","onTwistie","expandOnlyOnTwistieClick","expandOnDoubleClick","location","recursive","toggleCollapsed","TreeNodeList","focusTrait","selectionTrait","anchorTrait","additionalFocus","additionalSelection","fromAPI","AbstractTree","onDidChangeModel","findController","findFuzzy","_user","onDidChangeFindOpenState","_onWillRefilter","_onDidUpdateOptions","treeDelegate","onDidChangeCollapseStateRelay","Relay","onDidChangeActiveNodes","SetMap","visibleChildIndex","createModel","input","onLeftArrow","onRightArrow","onSpace","findWidgetEnabled","findWidgetStyles","focusNavigationFilter","onDidChangeFindMode","onDidChangeFindMatchType","Always","getParentElement","getFirstElementChild","collapse","expand","isCollapsible","setCollapsible","expandTo","parentLocation","parentListIndex","some","focusedIndex","firstChildIndex","createAsyncDataTreeNode","props","refreshPromise","stale","slow","collapsedByDefault","ancestor","descendant","AsyncDataTreeNodeWrapper","AsyncDataTreeRenderer","nodeMapper","twistieElement","treeItemLoading","asTreeEvent","AsyncDataTreeElementsDragAndDropData","asAsyncDataTreeDragAndDropData","AsyncDataTreeNodeListDragAndDrop","asObjectTreeOptions","collapseByDefault","sorter","hasChildren","AsyncDataTree","dataSource","subTreeRefreshPromises","refreshPromises","_onDidRender","_onDidChangeNodeSlowState","WeakMapper","autoExpandSingleChildren","createTree","_onDidChangeCollapseState","objectTreeDelegate","objectTreeRenderers","objectTreeOptions","ObjectTree","getInput","setInput","viewState","viewStateContext","_updateChildren","TreeError","toPromise","getDataNode","refreshAndRenderNode","dataNode","hasElement","refreshNode","intersects","doRefreshSubTree","finally","childrenToRefresh","doRefreshNode","Promises","settled","childrenPromise","doGetChildren","isIterable","slowTimeout","Iterable","empty","setChildren","isCancellationError","getChildren","processChildren","createCancelablePromise","deep","catch","onUnexpectedError","childrenElementsIterable","childrenElements","nodesToForget","childrenTreeNodesById","asyncDataTreeNode","childAsyncDataTreeNode","expanded","asTreeElement","diffIdentityProvider","compare","CompressibleAsyncDataTreeNodeWrapper","incompressible","CompressibleAsyncDataTreeRenderer","compressibleNodeMapperProvider","renderCompressedElements","disposeCompressedElements","CompressibleAsyncDataTree","compressionDelegate","compressibleNodeMapper","getCompressedNodeKeyboardNavigationLabel","els","asCompressibleObjectTreeOptions","CompressibleObjectTree","isIncompressible","getUncompressedIds","compressedNode","getCompressedTreeNode","oldSelection","oldFocus","didChangeSelection","didChangeFocus","filterResult","DataTree","ObjectTreeModel","obj","isCollapsibleStateUpdate","IndexTreeModel","rootElement","rootRef","_onDidChangeRenderNodeCount","onDidChangeRenderNodeCount","_onDidSplice","refilterDelayer","MicrotaskDelay","renderNodeCount","toInsert","spliceSmart","spliceSimple","identity","toInsertIterable","recurseLevels","diffDepth","getParentNodeWithListIndex","lastDiffIds","LcsDiff","getElements","ComputeDiff","quitEarly","locationPrefix","recurseSplice","fromOriginal","fromModified","lastStartO","lastStartM","change","changes","originalStart","originalLength","modifiedStart","modifiedLength","onDidCreateNode","onDidDeleteNode","listIndex","revealed","treeListElementsToInsert","nodesToInsertIterator","createTreeNode","lastHadChildren","visibleChildStartIndex","nodesToInsert","insertedVisibleChildrenCount","deletedVisibleChildrenCount","visibleDeleteCount","_updateAncestorsRenderNodeCount","currentlyHasChildren","getTreeNodeWithListIndex","hasTreeNode","getTreeNode","_setCollapseState","_setListNodeCollapseState","onlyVisibleChildIndex","_setNodeCollapseState","previousRenderNodeCount","updateNodeAfterCollapseChange","updateNodeAfterFilterChange","treeElement","treeListElements","_filterNode","childElements","childRevealed","_updateNodeAfterCollapseChange","_updateNodeAfterFilterChange","resultStartLength","hasVisibleDescendants","rest","indexTreeNode","tail2","noCompress","from","compress","childrenIterator","consume","_decompress","decompress","CompressedObjectTreeModel","compressionEnabled","base","compressedChildren","_setChildren","Infinity","compressedParentNode","splicedElement","recompressedElement","parentChildren","setCompressionEnabled","rootChildren","decompressedRootChildren","recompressedRootChildren","insertedElements","getCompressedNode","DefaultElementMapper","CompressedTreeNodeWrapper","unwrapper","CompressibleObjectTreeModel","elementMapper","compressedNodeUnwrapper","updateElementHeight","mapList","otherNode","mapOptions","CompressibleRenderer","compressedTreeNodeProvider","_compressedTreeNodeProvider","compressedTreeNode","nodesByIdentity","getElementLocation","preserveCollapseState","insertedElementIds","MAX_VALUE","tnode","ObjectTreeElementCollapseState","Collapsed","PreserveOrCollapsed","Expanded","PreserveOrExpanded","_map","WeakMap","listener","onmousedown","onkeyup","oninput","INPUT","onblur","BLUR","onfocus","FOCUS","ignoreTarget"],"sourceRoot":""}